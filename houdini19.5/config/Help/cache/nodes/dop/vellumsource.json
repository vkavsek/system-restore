{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "vellumsource", "icon": "DOP/vellumsource", "tags": "vellum", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Vellum Source"], "extent": [102, 120]}, {"type": "summary", "indent": 0, "text": ["A Vellum node that creates Vellum patches."], "extent": [120, 171]}, {"type": "para", "indent": 0, "text": ["Vellum Source emits new patches of Vellum geometry into a Vellum solver.\nVellum patches consist of both the geometry of the patch and the geometry\ndescribing the constraints on the patch, so some bookkeeping is required\nto update everything properly."], "extent": [171, 423]}, {"type": "para", "indent": 0, "text": ["A Vellum simulation object has Geometry data which describes the surface\nof the patch.  It has ConstraintGeometry data which describes the\nconstraints holding the patch together, and should be a one-to-one\nmatching of points with the Geometry data.  Finally, a PatchGeometry\ndata stores the names of all the patches to tell if they have\nbeen emitted or not."], "extent": [423, 782]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [782, 794], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Activation"], "extent": [794, 807], "body": [{"type": "para", "indent": 4, "text": ["Controls if the Vellum source will emit or not."], "extent": [826, 880]}], "container": true, "attrs": {"id": "activate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Type"], "extent": [880, 895], "body": [{"type": "para", "indent": 4, "text": ["How patches will be emitted from the source geometry."], "extent": [914, 973]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Only Once"], "extent": [973, 988], "body": [{"type": "para", "indent": 8, "text": ["The geometry will only be added once to the Vellum object.  Note\n        the patch name is used to detect if it has been added."], "extent": [988, 1125]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Each Frame"], "extent": [1125, 1141], "body": [{"type": "para", "indent": 8, "text": ["Geometry is added every frame that this DOP is active.   Does\n        not add during substeps, only on new frames."], "extent": [1141, 1265]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Each Substep"], "extent": [1265, 1283], "body": [{"type": "para", "indent": 8, "text": ["Geometry is added every substep that this DOP is active."], "extent": [1283, 1349]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Instance on Points"], "extent": [1349, 1373], "body": [{"type": "para", "indent": 8, "text": ["Like ", {"type": "ui", "text": ["Each Frame"]}, " emission, geometry is added every frame the\n        DOP is active.  However, a point geometry is also provided\n        to instance the patches on.   The point geometry\u2019s instance\n        attributes (like ", {"type": "code", "text": ["orient"]}, " and ", {"type": "code", "text": ["N"]}, ") are used to instance the\n        patch; matching the Copy to Points behavior."], "extent": [1373, 1702]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "emittype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Particle Density"], "extent": [1702, 1720], "body": [{"type": "para", "indent": 4, "text": ["When sourcing grain or fluid particles, this node checks the density\n    of the new particles against the existing particles to avoid having too\n    many particles in one place and causing large outward velocities.\n    This parameter allows scaling the permitted density, with lower values\n    making the emission sparser and higher values making it more full."], "extent": [1746, 2112]}], "container": true, "attrs": {"id": "particledensity"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Source"], "extent": [2112, 2125], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["SOP Path"], "extent": [2125, 2136], "body": [{"type": "para", "indent": 4, "text": ["Path to a SOP to fetch the surface geometry of the Vellum patch."], "extent": [2154, 2225]}], "container": true, "attrs": {"id": "soppath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Path"], "extent": [2225, 2238], "body": [{"type": "para", "indent": 4, "text": ["SOP Path to use as the target for the Vellum patch.  When points\n    are set to follow the target animation, this is the path used.\n    Note that the path will be re-evaluated at every substep."], "extent": [2259, 2459]}], "container": true, "attrs": {"id": "targetpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraint SOP Path"], "extent": [2459, 2480], "body": [{"type": "para", "indent": 4, "text": ["Path to a SOP to fetch the constraint geometry of the Vellum patch.\n    Should be in a one-to-one point correspondence of the surface geometry.\n    Note that because you cannot point to an extra output, you may need\n    a Null SOP to act as a target to a Vellum Constraint SOP."], "extent": [2505, 2788]}], "container": true, "attrs": {"id": "constraintpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Instance Points"], "extent": [2788, 2805], "body": [{"type": "para", "indent": 4, "text": ["In instance mode, this SOP\u2019s geometry will be used to instance\n    Vellum patches.   A patch will be created for every point in this\n    geometry and positioned and oriented according to the point\u2019s attributes."], "extent": [2828, 3044]}], "container": true, "attrs": {"id": "instancepath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Copy Instance Attr."], "extent": [3044, 3065], "body": [{"type": "para", "indent": 4, "text": ["When instancing, these point attributes will be copied to the\n    instanced geometry.  Adding a ", {"type": "code", "text": ["instanceid"]}, " allows you to track\n    which point each instance came from to further control the\n    copies individually."], "extent": [3081, 3307]}, {"type": "para", "indent": 4, "text": ["A Vellum Constraints Property DOP will iterate over the\n    ", {"type": "code", "text": ["ConstraintGeometry"]}, ", not the ", {"type": "code", "text": ["Geometry"]}, ", so not directly be able to access\n    these.  However, the Geometry is bound by default, allowing\n    ", {"type": "code", "text": ["point(1,\"aname\",@ptnum);"]}, " to be used."], "extent": [3307, 3555]}], "container": true, "attrs": {"id": "setpt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vellum Patch Name"], "extent": [3555, 3574], "body": [{"type": "para", "indent": 4, "text": ["All the points of the Vellum patch will gain a ", {"type": "code", "text": ["patchname"]}, " attribute\n    with this value.  This is used to recognize if a patch already exists\n    for the Emit Once mode, and can be used to separate out the different\n    patches after the simulation is complete."], "extent": [3595, 3863]}], "container": true, "attrs": {"id": "vellumname"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Stream"], "extent": [3863, 3876], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Stream Name"], "extent": [3876, 3890], "body": [{"type": "para", "indent": 4, "text": ["POP forces can be applied to a Vellum patch by wiring them after\n    the Vellum Source node.   The streamname allows the POP forces\n    to properly isolate their behavior to a single patch."], "extent": [3911, 4106]}], "container": true, "attrs": {"id": "streamname"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bindings"], "extent": [4106, 4121], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Transform"], "extent": [4121, 4133], "body": [{"type": "para", "indent": 4, "text": ["When fetching the geometry from other SOPs, the other SOPs\n    world transform usually must be applied to transform to\n    the right space.   This is the Into This Object mode."], "extent": [4155, 4337]}, {"type": "para", "indent": 4, "text": ["However, if the DOP solver is inside a sop, and the source\n    are other sops at the same level, using the world transform\n    will double apply it and the None mode should be used."], "extent": [4337, 4524]}], "container": true, "attrs": {"id": "importxform"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Geometry"], "extent": [4524, 4534], "body": [{"type": "para", "indent": 4, "text": ["Name of the data on the simulation object to use for the surface\n    geometry."], "extent": [4552, 4637]}], "container": true, "attrs": {"id": "bindgeo"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraint Geometry"], "extent": [4637, 4658], "body": [{"type": "para", "indent": 4, "text": ["Name of the data on the simulation object to store the constraint geometry."], "extent": [4683, 4765]}], "container": true, "attrs": {"id": "bindconstraint"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Patch Index Geometry"], "extent": [4765, 4787], "body": [{"type": "para", "indent": 4, "text": ["Name of the data on the simulation object to store the list of patches."], "extent": [4807, 4883]}], "container": true, "attrs": {"id": "bindpatch"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["Vellum Source"], "summary": ["A Vellum node that creates Vellum patches."]}