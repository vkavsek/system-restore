{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "cloudlight", "icon": "SOP/cloudlight", "tags": "baking, volumes, clouds", "since": "12.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Cloud Light"], "extent": [0, 16]}, {"type": "summary", "indent": 0, "text": ["Fills a volume with a diffuse light."], "extent": [132, 176]}, {"type": "para", "indent": 0, "text": ["The Cloud Light SOP is a tool to compute a light field you can add\nto a volume render.  It can be used to create an approximation of multiple\nscattering in a cloud without the expense (or rendering noise) that \nsuch solutions entail."], "extent": [176, 411]}, {"type": "para", "indent": 0, "text": ["It is not a realistic operation, but it provides controls to allow an artist\nto quickly converge to a realistic solution.  It may be best to think of\nit as a way to paint light fields efficiently."], "extent": [411, 609]}, {"type": "para", "indent": 0, "text": ["There are three stages to the computation of the light field."], "extent": [609, 672]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Computation of a speed field"], "extent": [672, 703], "body": [{"type": "para", "indent": 4, "text": ["The input volume needs to be turned into a speed field.  Each voxel will\n    have its speed limit.  Speed can be thought of a sort of inverse density -\n    higher values will result in lower arrival times."], "extent": [703, 914]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Computation of arrival times"], "extent": [914, 945], "body": [{"type": "para", "indent": 4, "text": ["The  ", {"scheme": "Node", "value": "/nodes/sop/volumearrivaltime", "type": "link", "text": ["Volume Arrival Time SOP"], "fullpath": "/nodes/sop/volumearrivaltime"}, " is used to compute how long it takes to reach any particular voxel from one of the seed points.  Voxels that are only reachable through low speeds will thus have higher values as they take longer to get to."], "extent": [945, 1215]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Lighting the arrival times"], "extent": [1215, 1244], "body": [{"type": "para", "indent": 4, "text": ["Finally, the arrival time field is converted into a light field.  This\n    usually implies an inversion - high arrival times correspond to dark\n    lights."], "extent": [1244, 1405]}, {"type": "para", "indent": 4, "text": ["The expensive stage is the arrival time computation, so it is often fast to\n    tweak this stage for a fixed arrival time."], "extent": [1405, 1533]}, {"type": "para", "indent": 4, "text": ["A good place to start is to adjust the color ramp\u2019s black and white points\n    to figure out visually where the contrast range is in your scenario."], "extent": [1533, 1686]}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": ["It is quite reasonable to layer multiple light fields together by adding them\ntogether."], "extent": [1686, 1775]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [16, 22], "body": [{"type": "para", "indent": 4, "text": ["This node currently only works with standard Houdini volumes.\n    It does not work with ", {"scheme": null, "value": "/model/volumes", "type": "link", "text": ["VDBs"], "fullpath": "/model/volumes"}, "."], "extent": [22, 137]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1793, 1805], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Group"], "extent": [1805, 1816], "body": [{"type": "para", "indent": 8, "text": ["Which volumes to compute a light field for.  These are processed\n        independently and will each get their own light field at the end."], "extent": [1816, 1963]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Resolution Scale"], "extent": [1963, 1985], "body": [{"type": "para", "indent": 8, "text": ["Multiscattered light is a low-frequency effect.  Thus, you do not need\n        a as a high resolution for the light field as you would use for the\n        cloud itself.  Scaling down the resolution by 0.5 will take an eighth\n        the memory and an eighth the time, so is usually a good idea."], "extent": [1985, 2288]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Output Speed Function"], "extent": [2288, 2315], "body": [{"type": "para", "indent": 8, "text": ["Outputs the speed function with no further processing.  This is very\n        useful to figure out how the propagation parameters work as you can see\n        them directly."], "extent": [2315, 2495]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Output Arrival Times"], "extent": [2495, 2521], "body": [{"type": "para", "indent": 8, "text": ["Disables the lighting tab and just outputs the arrival times directly."], "extent": [2521, 2600]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Keep Original"], "extent": [2600, 2619], "body": [{"type": "para", "indent": 8, "text": ["The incoming density fields are passed through.  A ", {"scheme": "Node", "value": "/nodes/sop/volumevisualization", "type": "link", "text": ["Volume Visualization\n        SOP"], "fullpath": "/nodes/sop/volumevisualization"}, " will also be used to set the light field to light volume, letting\n        you see the result in the viewport."], "extent": [2619, 2853]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [2853, 2867], "body": [{"type": "para", "indent": 16, "text": ["There is no particular reason that the density field you use to compute a light field has to be used for rendering the light field. You may find it profitable to alter the incoming density field for light propagation reasons only."], "extent": [2867, 3115]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Propagation"], "extent": [3115, 3137], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Treat Input as Raw Speed"], "extent": [3137, 3172], "body": [{"type": "para", "indent": 12, "text": ["Disables all processing of the incoming density field, using it\n            directly as a speed function for the ", {"scheme": "Node", "value": "/nodes/sop/volumearrivaltime", "type": "link", "text": ["Volume Arrival Time SOP"], "fullpath": "/nodes/sop/volumearrivaltime"}, "."], "extent": [3172, 3352]}, {"type": "para", "indent": 12, "text": ["You may want to use this if you had used an earlier Volume Cloud\n            Light SOP with the ", {"type": "ui", "text": ["Output Speed Function"]}, " enabled, had modified the\n            speed field a bit, and now want to directly compute the lighting on\n            it."], "extent": [3352, 3609]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Max Density"], "extent": [3609, 3630], "body": [{"type": "para", "indent": 12, "text": ["This density value will map to the upper end of the density\n            contrast range."], "extent": [3630, 3739]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Forward Bias"], "extent": [3739, 3761], "body": [{"type": "para", "indent": 12, "text": ["A bias function moving the speed function either to the highest\n            density or lowest density."], "extent": [3761, 3877]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Density Contrast"], "extent": [3877, 3903], "body": [{"type": "para", "indent": 12, "text": ["Controls the range of the density to speed conversion.  The lowest\n            value will go to ", {"type": "code", "text": ["1 - contrast/2"]}, ", the highest to ", {"type": "code", "text": ["contrast/2"]}, "."], "extent": [3903, 4059]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Complement Speed"], "extent": [4059, 4085], "body": [{"type": "para", "indent": 12, "text": ["Complements the speed field: sets it to one minus its computed\n            value.  Thus the slow areas become fast and the fast become slow."], "extent": [4085, 4239]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Use Phase"], "extent": [4239, 4258], "body": [{"type": "para", "indent": 12, "text": ["Defines a lobed volume which will revert to zero-density behavior\n            rather than max-density behavior."], "extent": [4258, 4391]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Phase Model"], "extent": [4391, 4412], "body": [{"type": "para", "indent": 12, "text": ["The lobe is defined from the average of the seed points to the\n            cloud center.  It may be a lobe that starts at the cloud center and\n            leaves away from the seeds.  Or it can start from the seeds and\n            head to the center.  And finally, it can start from the seed and\n            reach its maximum at the cloud center."], "extent": [4412, 4771]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Cloud Center"], "extent": [4771, 4793], "body": [{"type": "para", "indent": 12, "text": ["The barycenter of the cloud is computed to find where the lobe\n            should point.  Alternatively, you can use this to override where\n            the center is.  This is useful if an animated cloud might cause\n            unexpected changes in lobe direction."], "extent": [4793, 5072]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Convergence Tolerance"], "extent": [5072, 5103], "body": [{"type": "para", "indent": 12, "text": ["How accurate the resulting arrival times have to be before the\n            iteration is stopped."], "extent": [5103, 5212]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Maximum Iterations"], "extent": [5212, 5240], "body": [{"type": "para", "indent": 12, "text": ["Even if a solution within the tolerance is not found, the process\n            will still be stopped if this number of passes has been done."], "extent": [5240, 5393]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Lighting"], "extent": [5393, 5412], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Light Color"], "extent": [5412, 5434], "body": [{"type": "para", "indent": 12, "text": ["The generated light fields will be multiplied by this color."], "extent": [5434, 5507]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Light Intensity"], "extent": [5507, 5532], "body": [{"type": "para", "indent": 12, "text": ["The light fields will be multiplied by this scalar value."], "extent": [5532, 5603]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Exponential Falloff"], "extent": [5603, 5632], "body": [{"type": "para", "indent": 12, "text": ["When converting the arrival time to a light intensity, the arrival\n            time can be sent through an exponential curve.  This simulates the\n            fall off of light through an extinguishing medium, but is often too\n            harsh a curve."], "extent": [5632, 5897]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Density Scale"], "extent": [5897, 5920], "body": [{"type": "para", "indent": 12, "text": ["How quickly light is extinguished by the arrival time field."], "extent": [5920, 5993]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Color Ramp"], "extent": [5993, 6013], "body": [{"type": "para", "indent": 12, "text": ["The complemented arrival time field is sent through this color ramp\n            to get the color.  Adjusting the white and black point here is\n            usually the first step in finding a good lighting for a cloud."], "extent": [6013, 6243]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Gain"], "extent": [6243, 6257], "body": [{"type": "para", "indent": 12, "text": ["Controls a gain factor, accentuating or hiding the variation in the\n            cloud light values."], "extent": [6257, 6370]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [6370, 6379], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/volumearrivaltime", "type": "link", "text": "", "fullpath": "/nodes/sop/volumearrivaltime"}], "extent": [6379, 6414]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/volumevisualization", "type": "link", "text": "", "fullpath": "/nodes/sop/volumevisualization"}], "extent": [6414, 6452]}], "container": true}], "text": "Related"}], "title": ["Cloud Light"], "summary": ["Fills a volume with a diffuse light."], "included": ["/nodes/sop/no_vdb"]}