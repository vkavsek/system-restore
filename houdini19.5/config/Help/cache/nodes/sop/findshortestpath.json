{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "findshortestpath", "icon": "SOP/findshortestpath", "tags": "crowds, tech, games", "since": "13.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Find Shortest Path"], "extent": [0, 23]}, {"type": "summary", "indent": 0, "text": ["Finds the shortest paths from start points to end points, following the edges of a surface."], "extent": [147, 246]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [246, 261], "body": [{"type": "para", "indent": 0, "text": ["This node finds the shortest paths through edges of the input surface geometry, between all pairs of start and end points, creating polygon curves along those paths."], "extent": [261, 429]}, {"type": "para", "indent": 0, "text": ["There are many options for specifying path costs other than just the length of the path, for example, costs for visiting certain points.  If a pair of start and end points cannot be joined by a path, or if the cost would be infinite, no polygon is created for that pair."], "extent": [429, 701]}, {"type": "para", "indent": 0, "text": ["Also, if a second input is supplied, the ", {"type": "ui", "text": ["Start Points"]}, " and ", {"type": "ui", "text": ["End Points"]}, " parameters refer to points in the second input. The paths will start and end at the points in the first input (Surface Geometry), that are closest to the specified points in the second input.  For example, this allows you to provide a single line segment into the second input and move it around interactively, specifying 0 as the start point and 1 as the end point."], "extent": [701, 1146]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1146, 1158], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Start Points"], "extent": [1158, 1173], "body": [{"type": "para", "indent": 4, "text": ["The points, often just one, from which to start the paths to the end points.  If a second input is supplied, this refers to points in the second input, and the paths will start at the points in the first input that are closest to the specified points in the second input."], "extent": [1173, 1454]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["End Points"], "extent": [1454, 1466], "body": [{"type": "para", "indent": 4, "text": ["The points, often just one, at which the paths from the start points are to end.  If a second input is supplied, this refers to points in the second input, and the paths will end at the points in the first input that are closest to the specified points in the second input."], "extent": [1466, 1749]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Adjacency Array Attribute"], "extent": [1749, 1776], "body": [{"type": "para", "indent": 4, "text": ["If enabled, this specifies a point attribute that indicates to add directed edges from each point to the points whose numbers are in the array.  In this case, ", {"type": "ui", "text": ["Point Cost Attribute"]}, " can optionally be an array attribute whose entries correspond with costs added to these edges, in addition to any other costs."], "extent": [1776, 2092]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Output"], "extent": [2092, 2105], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Output Paths"], "extent": [2105, 2124], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the paths found will be output as polygon curves.  If disabled, the paths will not be output, and ", {"type": "ui", "text": ["Keep Original Geometry"]}, " will always be enabled."], "extent": [2124, 2290]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["From any start to any end"], "extent": [2290, 2317], "body": [{"type": "para", "indent": 4, "text": ["A single, lowest-cost path between any pair of start and end points will be output, if any path exists."], "extent": [2317, 2426]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["From each start to any end"], "extent": [2426, 2454], "body": [{"type": "para", "indent": 4, "text": ["For each start point, the lowest-cost path from that point to any end point will be output, if any path exists."], "extent": [2454, 2571]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["From any start to each end"], "extent": [2571, 2599], "body": [{"type": "para", "indent": 4, "text": ["For each end point, the lowest-cost path to that point from any start point will be output, if any path exists."], "extent": [2599, 2716]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["From each start to each end"], "extent": [2716, 2745], "body": [{"type": "para", "indent": 4, "text": ["For each start point, and for each end point, the lowest-cost path from that start point to that end point will be output, if any path exists."], "extent": [2745, 2893]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["From each start to corresponding end"], "extent": [2893, 2931], "body": [{"type": "para", "indent": 4, "text": ["For each start point, the lowest-cost path will be output from that start point to the end point corresponding with it in the specified order of start points and end points, if any path exists.  The number of end points must be equal to the number of start points."], "extent": [2931, 3205]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Original Geometry"], "extent": [3205, 3229], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the surface geometry will be output.  If ", {"type": "ui", "text": ["Output Paths"]}, " is also enabled, the paths will share the points with the surface geometry.  If ", {"type": "ui", "text": ["Output Paths"]}, " is disabled, this will always be enabled."], "extent": [3229, 3447]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cost Attribute"], "extent": [3447, 3463], "body": [{"type": "para", "indent": 4, "text": ["If given, a point attribute with the specified name will be created, indicating the accumulated cost at each point.  If ", {"type": "ui", "text": ["Keep Original Geometry"]}, " is also enabled, the cost for reaching all points will be output, including for points not in paths being output.  In that case, if multiple start points are specified, the minimum cost of reaching each point from any start point will be output, regardless of the option selected in the ", {"type": "ui", "text": ["Output Paths"]}, " dropdown menu.  If any point is unreachable from the specified start points, this attribute will have a negative value for that point.  If multiple start points are specified and one of the two ", {"type": "ui", "text": ["From each start\u2026"]}, " options is selected, this attribute will contain tuples of size equal to the number of start points, to output the minimum costs of paths from each start point, in the order given in the ", {"type": "ui", "text": ["Start Points"]}, " field.  If ", {"type": "ui", "text": ["Adjacency Array Attribute"]}, " is enabled, this can optionally be an array attribute whose entries correspond with costs added to the directed edges specified by the adjacency attribute, in addition to any other costs."], "extent": [3463, 4573]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Previous Point Number Attribute"], "extent": [4573, 4606], "body": [{"type": "para", "indent": 4, "text": ["If given, a point attribute with the specified name will be created, indicating the surface geometry point number that each output point was first reached via.  This provides a path representation that is easier to use in VEX than the output path polygon representation."], "extent": [4636, 4916]}], "container": true, "attrs": {"id": "outputprevptnum"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Point Number Attribute"], "extent": [4916, 4940], "body": [{"type": "para", "indent": 4, "text": ["If given, a point attribute with the specified name will be created, indicating the surface geometry point number that corresponds with each output point.  This information provides a mapping back to the surface geometry, useful for the case where ", {"type": "ui", "text": ["Keep Original Geometry"]}, " is disabled."], "extent": [4940, 5237]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Paths Group"], "extent": [5237, 5250], "body": [{"type": "para", "indent": 4, "text": ["If given, a primitive group with the specified name will be created, and the path polygon curves will be added to it.  This can be useful for distinguishing surface geometry from the output paths."], "extent": [5250, 5456]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start Point Attribute"], "extent": [5456, 5479], "body": [{"type": "para", "indent": 4, "text": ["If given, a primitive attribute with the specified name will be created, indicating the input start point that corresponds with each output path.  If ", {"type": "ui", "text": ["Keep Original Geometry"]}, " is enabled, this attribute will have value -1 for primitives that are not output paths."], "extent": [5479, 5753]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["End Point Attribute"], "extent": [5753, 5774], "body": [{"type": "para", "indent": 4, "text": ["If given, a primitive attribute with the specified name will be created, indicating the input end point that corresponds with each output path.  If ", {"type": "ui", "text": ["Keep Original Geometry"]}, " is enabled, this attribute will have value -1 for primitives that are not output paths."], "extent": [5774, 6046]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Path Cost Attribute"], "extent": [6046, 6067], "body": [{"type": "para", "indent": 4, "text": ["If given, a primitive attribute with the specified name will be created, indicating the cost of each output path.  If ", {"type": "ui", "text": ["Keep Original Geometry"]}, " is enabled, this attribute will have a negative value for primitives that are not output paths."], "extent": [6067, 6321]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Path Costs"], "extent": [6321, 6338], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Max Search Path Cost"], "extent": [6338, 6365], "body": [{"type": "para", "indent": 4, "text": ["If enabled, no paths with cost higher than this will be considered valid.  This can help cut short the search for paths if higher cost paths are not relevant."], "extent": [6365, 6533]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Point Cost Attribute"], "extent": [6533, 6555], "body": [{"type": "para", "indent": 4, "text": ["If given, the specified point attribute on the surface geometry will be added to the cost of a path visiting each node."], "extent": [6555, 6684]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Primitive Cost Attribute"], "extent": [6684, 6710], "body": [{"type": "para", "indent": 4, "text": ["If given, the specified primitive attribute on the surface geometry will be added to the cost of a path passing along an edge of the primitive.  When multiple primitives share the same edge, the primitive with lowest number is used.  If a primitive is in the ", {"type": "ui", "text": ["Directed Primitives"]}, " group, it will only be considered if the edge is in the correct direction within the primitive."], "extent": [6710, 7098]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Omit Distance from Cost"], "extent": [7098, 7123], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the length of an edge will not be included in the cost of the edge.  This can be useful if an edge cost that is not directly dependent on the length is desired, which can be specified in the ", {"type": "ui", "text": ["Custom Edge Cost"]}, " parameter."], "extent": [7123, 7367]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Consider Turning Costs"], "extent": [7367, 7391], "body": [{"type": "para", "indent": 4, "text": ["This is disabled by default, and the cost of an edge can only depend on the points on that edge.  However, when this is enabled, a slower approach is used that allows the cost of an edge to also depend on the previous edge.  This enables the costs to depend on, for example, turning angles."], "extent": [7391, 7691]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Angular Cost Attribute"], "extent": [7691, 7715], "body": [{"type": "para", "indent": 4, "text": ["If given, the specified point attribute on the surface geometry will be multiplied by the angle turned at each point in a path and the result will be added to the cost of the path.  This can only be used if Consider Turning Costs is enabled."], "extent": [7715, 7966]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Custom Edge Cost"], "extent": [7966, 7984], "body": [{"type": "para", "indent": 4, "text": ["This provides the option to specify a custom edge cost, either as a constant cost added to all edges, or as an expression, allowing for a very broad range of costs.  For example, you could penalize edges with steep slopes.  If ", {"type": "ui", "text": ["Consider Turning Costs"]}, " is enabled, the expression can refer to the point visited previous to the edge.  See below for a list of available local variables."], "extent": [7984, 8379]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Primitive Variables in Custom Cost"], "extent": [8379, 8422], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the expressions in ", {"type": "ui", "text": ["Custom Edge Cost"]}, " and ", {"type": "ui", "text": ["Override Heuristic"]}, " can refer to the primitive of the edge being considered.  If ", {"type": "ui", "text": ["Consider Turning Costs"]}, " is enabled, these expressions can refer to the primitive visited previous to the edge.  See below for a list of available local variables."], "extent": [8422, 8737]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Override Heuristic"], "extent": [8737, 8757], "body": [{"type": "para", "indent": 4, "text": ["In the cases where paths are only to be found to one end point, a heuristic underestimate of the minimum cost of traveling from the current point to the end point is used to guide the search.  In some cases, a better underestimate is known, which can sometimes greatly speed up searching, and can be specified here."], "extent": [8757, 9086]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Surface Constraints"], "extent": [9086, 9112], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Surface Primitives"], "extent": [9112, 9137], "body": [{"type": "para", "indent": 4, "text": ["Paths are only allowed to pass through the edges of these primitives.  If this field is left empty, paths will be able to pass through the edges of any primitives."], "extent": [9137, 9310]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Directed Primitives"], "extent": [9310, 9331], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the edges of the specified primitives will be considered ", {"type": "q", "text": ["directed"]}, ", meaning that paths will only be able to pass through such an edge in the direction it appears in the primitive, unless the edge occurs in another primitive.  This is useful for specifying transitions that can only go one-way, for example, jumping down but not up, using polygon curves in the desired direction.  The ", {"type": "ui", "text": ["Custom Edge Cost"]}, " can also be used to make an edge cost more in one direction than in the other."], "extent": [9331, 9837]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edges to Avoid"], "extent": [9837, 9853], "body": [{"type": "para", "indent": 4, "text": ["If enabled, these edges will not be used in any paths."], "extent": [9853, 9913]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "locals", "container": true, "type": "locals_section", "indent": 0, "role": "section", "extent": [9913, 9921], "body": [{"type": "para", "indent": 0, "text": ["Both the ", {"type": "ui", "text": ["Custom Edge Cost"]}, " and ", {"type": "ui", "text": ["Override Heuristic"]}, " parameters allow for expressions using the following local variables."], "extent": [9921, 10050]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["PTSTART"], "extent": [10050, 10059], "body": [{"type": "para", "indent": 4, "text": ["The number of the current start point.  If there are multiple start points and the ", {"type": "ui", "text": ["Output Paths"]}, " option is either disabled or set to search for paths from any start point, this will not be available."], "extent": [10059, 10271]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PT0"], "extent": [10271, 10276], "body": [{"type": "para", "indent": 4, "text": ["The number of the point at the tail of the edge previous to the edge being considered.  If ", {"type": "code", "text": ["$PT"]}, " is the start point, there is no previous point, so this is -1.  This is only available if ", {"type": "ui", "text": ["Consider Turning Costs"]}, " is enabled."], "extent": [10276, 10511]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PT"], "extent": [10511, 10515], "body": [{"type": "para", "indent": 4, "text": ["The number of the point at the tail of the edge being considered, i.e. the point that was most recently added to the current search path."], "extent": [10515, 10662]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PT2"], "extent": [10662, 10667], "body": [{"type": "para", "indent": 4, "text": ["The number of the point at the head of the edge being considered, i.e. the point that is being considered for addition to the current search path."], "extent": [10667, 10823]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PTEND"], "extent": [10823, 10830], "body": [{"type": "para", "indent": 4, "text": ["The number of the unique end point.  If there are multiple end points, this will not be available."], "extent": [10830, 10938]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PR0"], "extent": [10938, 10943], "body": [{"type": "para", "indent": 4, "text": ["The lowest number of a primitive sharing the edge previous to the edge being considered, i.e. the edge that was most recently added to the current search path.  If ", {"type": "code", "text": ["$PT"]}, " is the start point, there is no previous point, so this is -1.  This is only available if ", {"type": "ui", "text": ["Consider Turning Costs"]}, " and ", {"type": "ui", "text": ["Enable Primitive Variables in Custom Cost"]}, " are enabled.  If ", {"type": "ui", "text": ["Directed Primitives"]}, " is enabled, a primitive in the directed group is only considered to share edges that are traversed in the direction in which they appear in the primitive."], "extent": [10943, 11485]}], "container": true}, {"type": "dt", "indent": 0, "text": ["PR"], "extent": [11485, 11489], "body": [{"type": "para", "indent": 4, "text": ["The lowest number of a primitive sharing the edge being considered for addition to the current search path.  This is only available if ", {"type": "ui", "text": ["Enable Primitive Variables in Custom Cost"]}, " is enabled.  If ", {"type": "ui", "text": ["Directed Primitives"]}, " is enabled, a primitive in the directed group is only considered to share edges that are traversed in the direction in which they appear in the primitive."], "extent": [11489, 11874]}], "container": true}, {"type": "dt", "indent": 0, "text": ["LEN0"], "extent": [11874, 11880], "body": [{"type": "para", "indent": 4, "text": ["The length of the edge previous to the edge being considered.  If ", {"type": "code", "text": ["$PT"]}, " is the start point, there is no previous point, so this is 0.  This is only available if ", {"type": "ui", "text": ["Consider Turning Costs"]}, " is enabled."], "extent": [11880, 12089]}], "container": true}, {"type": "dt", "indent": 0, "text": ["LEN"], "extent": [12089, 12094], "body": [{"type": "para", "indent": 4, "text": ["The length of the edge being considered."], "extent": [12094, 12144]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TXSTART, TYSTART, TZSTART"], "extent": [12144, 12171], "body": [{"type": "para", "indent": 4, "text": ["The coordinates of the current start point.  If there are multiple start points and the ", {"type": "ui", "text": ["Output Paths"]}, " option is either disabled or set to search for paths from any start point, these will not be available."], "extent": [12171, 12389]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TX0, TY0, TZ0"], "extent": [12389, 12404], "body": [{"type": "para", "indent": 4, "text": ["The coordinates of the point at the tail of the edge previous to the edge being considered.  If ", {"type": "code", "text": ["$PT"]}, " is the start point, there is no previous point, so these are equal to the start coordinates.  This is only available if ", {"type": "ui", "text": ["Consider Turning Costs"]}, " is enabled."], "extent": [12404, 12674]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TX, TY, TZ"], "extent": [12674, 12686], "body": [{"type": "para", "indent": 4, "text": ["The coordinates of the point at the tail of the edge being considered, i.e. the point that was most recently added to the current search path."], "extent": [12686, 12838]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TX2, TY2, TZ2"], "extent": [12838, 12853], "body": [{"type": "para", "indent": 4, "text": ["The coordinates of the point at the head of the edge being considered, i.e. the point that is being considered for addition to the current search path."], "extent": [12853, 13014]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TXEND, TYEND, TZEND"], "extent": [13014, 13035], "body": [{"type": "para", "indent": 4, "text": ["The coordinates of the unique end point.  If there are multiple end points, these will not be available."], "extent": [13035, 13145]}], "container": true}], "container": true}], "text": "Locals"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [13145, 13154], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/polywire", "type": "link", "text": "", "fullpath": "/nodes/sop/polywire"}], "extent": [13154, 13177]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/line", "type": "link", "text": "", "fullpath": "/nodes/sop/line"}], "extent": [13177, 13195]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/add", "type": "link", "text": "", "fullpath": "/nodes/sop/add"}], "extent": [13195, 13212]}], "container": true}], "text": "Related"}], "title": ["Find Shortest Path"], "summary": ["Finds the shortest paths from start points to end points, following the edges of a surface."]}