{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "guidedeform", "icon": "FUR/animate", "since": "16.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Guide Deform"], "extent": [91, 108]}, {"type": "summary", "indent": 0, "text": ["Deforms geometry with an animated skin and optionally guide curves."], "extent": [108, 184]}, {"type": "para", "indent": 0, "text": ["This node deforms geometry using another deforming geometry. This is typically used for deforming hair curves with an animated character mesh."], "extent": [184, 328]}, {"type": "para", "indent": 0, "text": ["It can also deform the input geometry using guide curves."], "extent": [328, 387]}, {"type": "para", "indent": 0, "text": ["The input geometry can be hair curves, for example the dense hair of a character, generated in the rest position."], "extent": [387, 502]}, {"type": "para", "indent": 0, "text": ["The operator can also deform arbitrary geometry."], "extent": [502, 552]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [552, 564], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Mode"], "extent": [564, 571], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Deform only by Skin"], "extent": [586, 611], "body": [{"type": "para", "indent": 12, "text": ["Deforms the input geometry by the difference between rest and animated skin geometry."], "extent": [611, 710]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Guide Capture and Deform"], "extent": [710, 740], "body": [{"type": "para", "indent": 12, "text": ["Finds nearby guides in the rest geometry for each point in the first input\u2019s geometry and assigns weights to them depending on their distance to the guide."], "extent": [740, 909]}, {"type": "para", "indent": 12, "text": ["Each point is then deformed by the difference between rest and animated guides."], "extent": [909, 1002]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Guide Capture"], "extent": [1002, 1021], "body": [{"type": "para", "indent": 12, "text": ["Finds nearby guides in the rest geometry for each point in the first input\u2019s geometry and assigns weights to them depending on their distance to the guide."], "extent": [1021, 1190]}, {"type": "para", "indent": 12, "text": ["The result is output as ", {"type": "code", "text": ["guides"]}, " and ", {"type": "code", "text": ["weights"]}, " attributes. These can be used to deform the geometry with another Guide Deform SOP, with its mode set to ", {"type": "ui", "text": ["Guide Deform"]}, "."], "extent": [1190, 1373]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Guide Deform"], "extent": [1373, 1391], "body": [{"type": "para", "indent": 12, "text": ["Uses the ", {"type": "code", "text": ["guides"]}, " and ", {"type": "code", "text": ["weights"]}, " attribute output by another Guide Deform SOP to deform each point in the first input by the difference between rest and animated guides."], "extent": [1391, 1573]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Method"], "extent": [1573, 1581], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Per Point Capture (Legacy)"], "extent": [1598, 1630], "body": [{"type": "para", "indent": 12, "text": ["Captures curve points by finding a number of close points on nearby guide curves. This can be rather slow, and is no longer recommended."], "extent": [1630, 1780]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Use Existing Weights"], "extent": [1780, 1806], "body": [{"type": "para", "indent": 12, "text": ["Uses guide and weight attributes as output by the ", {"scheme": "Node", "value": "/nodes/obj/hairgen", "type": "link", "text": ["Hair Generate Object"], "fullpath": "/nodes/obj/hairgen"}, " and ", {"scheme": "Node", "value": "/nodes/sop/hairgen", "type": "link", "text": ["Hair Generate SOP"], "fullpath": "/nodes/sop/hairgen"}, ". This is intended to closely replicate the result of running Hair Generate on every frame of an animation."], "extent": [1806, 2057]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Barycentric Weights"], "extent": [2057, 2082], "body": [{"type": "para", "indent": 12, "text": ["Creates a triangulated surface with the guide roots as its points, and computes weights for each hair using coordinates within the closest generated triangle."], "extent": [2082, 2254]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "method"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Capture"], "extent": [2254, 2268], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Split Clumps"], "extent": [2268, 2283], "body": [{"type": "para", "indent": 4, "text": ["For curves that are influences by the guides of multiple clumps, discards any weights that are not part of the most influential clump."], "extent": [2305, 2445]}], "container": true, "attrs": {"id": "splitclumps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pick Single Best Guide"], "extent": [2445, 2469], "body": [{"type": "para", "indent": 4, "text": ["Discards all but the single most influential guide. This can significantly speed up deformation and can be useful for outputting quick tests. Results can potentially be good enough for the final output when the guide density is very high relative to the final hair density."], "extent": [2491, 2770]}], "container": true, "attrs": {"id": "singleguide"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Split Passes"], "extent": [2770, 2792], "body": [{"type": "para", "indent": 4, "text": ["Polygons of the skin surface are split at guide locations, adding the root point into the surface topology. For polygons containing multiple guides, this is done a guide at a time, until all guides have a point on the surface or until this maximum number of passes is reached."], "extent": [2817, 3099]}], "container": true, "attrs": {"id": "maxsplitpasses"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edge Flip Passes"], "extent": [3099, 3117], "body": [{"type": "para", "indent": 4, "text": ["Edges are flipped to create a more uniformly distributed triangle surface, which results in smoother weights. This is a maximum number of passes to perform."], "extent": [3142, 3304]}], "container": true, "attrs": {"id": "edgeflippasses"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Guide Coverage"], "extent": [3304, 3320], "body": [{"type": "para", "indent": 4, "text": ["Ensure that each point is captured & deformed by at least this many guides."], "extent": [3344, 3425]}], "container": true, "attrs": {"id": "guidecoverage"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Guide Radius Attribute"], "extent": [3425, 3453], "body": [{"type": "para", "indent": 4, "text": ["Use an attribute on the guides to determine their influence radii."], "extent": [3484, 3556]}], "container": true, "attrs": {"id": "useguideradiusattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Guide Radius Attribute"], "extent": [3556, 3580], "body": [{"type": "para", "indent": 4, "text": ["The name of the attribute specifying the guide influence radius."], "extent": [3608, 3678]}], "container": true, "attrs": {"id": "guideradiusattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compute Radius From Guide Coverage"], "extent": [3678, 3714], "body": [{"type": "para", "indent": 4, "text": ["Compute a radius automatically, such that each point will find roughly the number of guides specified by ", {"type": "ui", "text": ["Guide Coverage"]}, "."], "extent": [3738, 3868]}, {"type": "para", "indent": 4, "text": ["This makes it easier to deform by guides that have varying density across the skin geometry. For example when using more guides in the face of a character."], "extent": [3868, 4029]}], "container": true, "attrs": {"id": "computeradius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Radius"], "extent": [4029, 4037], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Compute Radius From Guide Coverage"]}, " is disabled, this sets an absolute radius to use."], "extent": [4054, 4153]}], "container": true, "attrs": {"id": "radius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Limit Segments Per Guide"], "extent": [4153, 4179], "body": [{"type": "para", "indent": 4, "text": ["Limit the number of capture segments per guide. This helps manage the amount of memory (or disk space) the weight information takes up."], "extent": [4204, 4345]}], "container": true, "attrs": {"id": "limitguidesegs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Segments Per Guide"], "extent": [4345, 4365], "body": [{"type": "para", "indent": 4, "text": ["The maximum number of segments that each point in the first input can be captured by."], "extent": [4388, 4479]}], "container": true, "attrs": {"id": "maxguidesegs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Expand Radius for Uncaptured Points"], "extent": [4479, 4516], "body": [{"type": "para", "indent": 4, "text": ["Expands the radius for points that aren\u2019t covered by the number of guides specified by ", {"type": "ui", "text": ["Guide Coverage"]}, "."], "extent": [4539, 4651]}, {"type": "para", "indent": 4, "text": ["This allows using a small number of guides (or a small radius) overall, which is necessary to preserve finely detailed guide movement, while covering points that may otherwise not be captured by the required number of points."], "extent": [4651, 4882]}], "container": true, "attrs": {"id": "expandradius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Expansion Iterations"], "extent": [4882, 4904], "body": [{"type": "para", "indent": 4, "text": ["The maximum number of times the radius is expanded. The loop is stopped early if each point has been captured by the number of guide specified by ", {"type": "ui", "text": ["Guide Coverage"]}, "."], "extent": [4929, 5100]}], "container": true, "attrs": {"id": "expansioniters"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Expansion Factor"], "extent": [5100, 5118], "body": [{"type": "para", "indent": 4, "text": ["The factor by which the radius is multiplied in each expansion iterations."], "extent": [5144, 5224]}], "container": true, "attrs": {"id": "expansionfactor"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Deform"], "extent": [5224, 5237], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Geometry to Deform"], "extent": [5237, 5258], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Hair Curves"], "extent": [5278, 5295], "body": [{"type": "para", "indent": 8, "text": ["Deform the input geometry as hair curves. The main difference is that the first point of each primitive is expected to sit on the rest skin geometry, and this constraint is preserved on the animated skin."], "extent": [5295, 5509]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Arbitrary Geometry"], "extent": [5509, 5533], "body": [{"type": "para", "indent": 8, "text": ["Deform any geometry. Note that this works for hair curves as well, but shouldn\u2019t be used for these because it doesn\u2019t preserve the constraints mentioned above."], "extent": [5533, 5702]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "inputtype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rigidly Transform Pieces"], "extent": [5702, 5728], "body": [{"type": "para", "indent": 4, "text": ["Computes a rigid transform for each piece that matches the soft guide deformation as closely as possible."], "extent": [5753, 5864]}, {"type": "para", "indent": 4, "text": ["Pieces are identified by connectivity or by an attribute when ", {"type": "ui", "text": ["Use Piece Attribute"]}, " is enabled."], "extent": [5864, 5967]}], "container": true, "attrs": {"id": "rigidtransform"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Piece Attribute"], "extent": [5967, 5988], "body": [{"type": "para", "indent": 4, "text": ["Use an attribute rather than connectivity to identify pieces."], "extent": [6013, 6080]}], "container": true, "attrs": {"id": "usepieceattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Piece Attribute"], "extent": [6080, 6097], "body": [{"type": "para", "indent": 4, "text": ["The attribute to identify pieces by. All points with the same value are considered a single piece."], "extent": [6119, 6223]}], "container": true, "attrs": {"id": "pieceattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attributes to Transform"], "extent": [6223, 6248], "body": [{"type": "para", "indent": 4, "text": ["Attributes on the first input\u2019s geometry to deform."], "extent": [6271, 6327]}], "container": true, "attrs": {"id": "xformattribs"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["Guide Deform"], "summary": ["Deforms geometry with an animated skin and optionally guide curves."]}