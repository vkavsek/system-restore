{"type": "root", "attrs": {"type": "node", "context": "sop", "namespace": "kinefx", "internal": "fullbodyik", "icon": "SOP/kinefx-fullbodyik", "tags": "soprigging, rigging, motion, retargeting, fbik, solvers, kinefx", "since": "18.5", "version": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Full Body IK"], "extent": [186, 203]}, {"type": "summary", "indent": 0, "text": ["Transfer a motion to a SOP-based skeleton using full-body inverse kinematics algorithm."], "extent": [203, 299]}, {"level": 1, "id": "attributes", "container": true, "type": "attributes_section", "indent": 0, "role": "section", "extent": [299, 311], "body": [{"type": "para", "indent": 0, "text": [{"scheme": null, "value": "/nodes/sop/kinefx--fbikconfiguretargets", "type": "link", "text": ["Full Body IK Configure Targets"], "fullpath": "/nodes/sop/kinefx--fbikconfiguretargets"}, " and ", {"scheme": null, "value": "/nodes/sop/kinefx--configurejoints", "type": "link", "text": ["Configure Joints"], "fullpath": "/nodes/sop/kinefx--configurejoints"}, " \ncan be used to set up per-joint properties for the IK solver."], "extent": [311, 507]}, {"type": "attributes_item_group", "body": [{"type": "attributes_item", "indent": 0, "text": [{"type": "code", "text": ["fbik_targetconfig"]}], "extent": [1900, 1921], "body": [{"type": "para", "indent": 4, "text": ["This dictionary point attribute configures how the joint\u2019s goal transform\n    behaves in a full-body inverse kinematics solver. This is only used when\n    the joint has a goal transform (for example, if the joint is mapped to a\n    joint on the source skeleton). For more details on the valid keys, see the\n    ", {"type": "code", "text": ["targetoptions"]}, " parameter for ", {"scheme": "Vex", "value": "/vex/functions/solvephysfbik", "type": "link", "text": "", "fallback_text": "solvephysfbik()", "fullpath": "/vex/functions/solvephysfbik"}, " and ", {"scheme": "Vex", "value": "/vex/functions/solvefbik", "type": "link", "text": "", "fallback_text": "solvefbik()", "fullpath": "/vex/functions/solvefbik"}, "."], "extent": [1949, 2336]}], "container": true, "attrs": {"id": "fbik_targetconfig"}, "role": "item", "id": "fbik_targetconfig"}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["This ", {"type": "strong", "text": ["Configuration Attribute"]}, " dictionary point attribute stores the configurations. \nFor more details on the valid keys, see the ", {"type": "code", "text": ["jointoptions"]}, " parameter for ", {"scheme": "Vex", "value": "/vex/functions/solvephysfbik", "type": "link", "text": "", "fallback_text": "solvephysfbik()", "fullpath": "/vex/functions/solvephysfbik"}, " and\n", {"scheme": "Vex", "value": "/vex/functions/solvefbik", "type": "link", "text": "", "fallback_text": "solvefbik()", "fullpath": "/vex/functions/solvefbik"}, "."], "extent": [551, 752]}], "text": "Attributes"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [752, 764], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Root Constrain"], "extent": [764, 781], "body": [{"type": "para", "indent": 4, "text": ["When on, specifies the joint on the ", {"type": "em", "text": ["target skeleton"]}, " that will be constrained to its driver prior to the full-body IK solve. This can be useful when retargeting to an animation in which the character turns around more that 180 degrees from the rest pose."], "extent": [805, 1066]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [1066, 1076], "body": [{"type": "para", "indent": 8, "text": ["The joint you specify needs to be mapped to a joint on the ", {"type": "em", "text": ["source skeleton"]}, " for the retarget."], "extent": [1076, 1180]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "constrainroot"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Solver"], "extent": [1180, 1188], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["FABRIK (Forward and Backward Reaching Inverse Kinematics)"], "extent": [1205, 1268], "body": [{"type": "para", "indent": 8, "text": ["A very fast, simple Full Body IK solver. This solver prefers to be very densely mapped with a high number of iterations to converge nicely and can behave less stably than the Physical Full Body IK solve. This solver is widely used across many different platforms so can be suitable for applications where compatibility is important or where the more physically based solve might be unsuitable."], "extent": [1268, 1671]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Physical Full Body IK (Default)"], "extent": [1671, 1708], "body": [{"type": "para", "indent": 8, "text": ["A sophisticated and robust algorithm for solving the Full Body problem on a skeleton, this solver supports Center of Mass calculations and can provide an intuitive solve from very few target transforms. This solver prefers to be sparsely mapped with far fewer iterations that the FABRIK solve."], "extent": [1708, 2011]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [2011, 2025], "body": [{"type": "para", "indent": 12, "text": ["Increasing the iterations often requires a higher value to be set on the 'Damping' parameter."], "extent": [2025, 2132]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "container": true, "attrs": {"id": "solver"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Iterations"], "extent": [2132, 2144], "body": [{"type": "para", "indent": 4, "text": ["The number of iterations of the solve to perform."], "extent": [2164, 2219]}], "container": true, "attrs": {"id": "iterations"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping"], "extent": [2219, 2228], "body": [{"type": "para", "indent": 4, "text": ["Damping factor for the solver.\n    Larger values will produce more stable results when, for example, a target is unreachable.\n    A value that is too large, however, will require more iterations to converge.\n    Around 0.5 is typically a suitable initial value."], "extent": [2245, 2512]}], "container": true, "attrs": {"id": "damping"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tolerance"], "extent": [2512, 2523], "body": [{"type": "para", "indent": 4, "text": ["The margin of error that we allow the solver to work within. Once achieved, the solver can exit early from its iterations (setting this to 0 will force the solver to always perform the full number of iterations)."], "extent": [2542, 2760]}], "container": true, "attrs": {"id": "tolerance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pin Root"], "extent": [2760, 2770], "body": [{"type": "para", "indent": 4, "text": ["Pin the translation of any points without a parent."], "extent": [2787, 2844]}], "container": true, "attrs": {"id": "pinroot"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Map Using"], "extent": [4974, 4985], "body": [{"type": "para", "indent": 4, "text": ["This parameter allows you to choose whether to use a dictionary attribute on the first input to look up the drivers on the second input or simply to match by an attribute present on both inputs. For example, the second option is useful when the second input contains a subset of the first input\u2019s points."], "extent": [5003, 5313]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Mapping Attribute"], "extent": [5313, 5336], "body": [{"type": "para", "indent": 8, "text": ["Use a dictionary point attribute present on the first input to look up the drivers on the second input. This attribute is created for you by the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--mappoints", "type": "link", "text": ["Map Points SOP"], "fullpath": "/nodes/sop/kinefx--mappoints"}, ", but any dictionary attribute matching the following format can be used:"], "extent": [5336, 5606]}, {"type": "disclosure_group", "body": [{"ext": null, "type": "disclosure", "indent": 8, "text": ["Dictionary attribute VEX format"], "role": "item", "extent": [5606, 5658], "body": [{"lang": "vex", "type": "pre", "indent": 12, "text": ["\n            {\n                'reference': string, // The point attribute on the driver skeleton to use as reference. If set to \"ptnum\", the point number will be used.\n                'value': string or int // The value of the point attribute on the point to use as the driver.\n            }\n            "], "extent": [5658, 6000]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 4, "text": ["Match By Attribute"], "extent": [6000, 6033], "body": [{"type": "para", "indent": 8, "text": ["Match points on the first input to corresponding points on the second input using a given point attribute. For example, if ", {"type": "ui", "text": ["Attribute To Match"]}, " is set to 'name' then the points on the first input will be driven by points on the second input that share the same name."], "extent": [6033, 6311]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mapusing"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mapping Attribute"], "extent": [6311, 6330], "body": [{"type": "para", "indent": 4, "text": ["The name of the dictionary point attribute on the first input to use for mapping."], "extent": [6357, 6444]}], "container": true, "attrs": {"id": "mappingattribname"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attribute To Match"], "extent": [6444, 6464], "body": [{"type": "para", "indent": 4, "text": ["The name of the point attribute present on both inputs to be used to map points."], "extent": [6487, 6573]}], "container": true, "attrs": {"id": "attribtomatch"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Delete Mapping Attributes"], "extent": [2963, 2990], "body": [{"type": "para", "indent": 4, "text": ["Clean up the attributes used to configure the solver."], "extent": [3018, 3077]}], "container": true, "attrs": {"id": "deletemappingattrs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compute Local Transform"], "extent": [3077, 3102], "body": [{"type": "para", "indent": 4, "text": ["Recompute the local transforms after the solve."], "extent": [3133, 3186]}], "container": true, "attrs": {"id": "computelocaltransform"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Configuration Attribute"], "extent": [3186, 3211], "body": [{"type": "para", "indent": 4, "text": ["The name of the dictionary point attribute that stores the configurations.\n    See the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--configurejoints", "type": "link", "text": ["Configure Joints SOP "], "fullpath": "/nodes/sop/kinefx--configurejoints"}, "."], "extent": [3240, 3390]}], "container": true, "attrs": {"id": "configurationattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Configure"], "extent": [3390, 3401], "body": [{"type": "para", "indent": 4, "text": ["See the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--fbikconfiguretargets", "type": "link", "text": ["Full Body IK Configure Targets SOP "], "fullpath": "/nodes/sop/kinefx--fbikconfiguretargets"}, "."], "extent": [3401, 3491]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [3491, 3499], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Target Skeleton"], "extent": [3499, 3521], "body": [{"type": "para", "indent": 8, "text": ["The skeleton which we wish to run the Full Body IK solve onto. Typically this would be the skeleton of the character we wish to transfer animation onto having first mapped the two skeletons to each other use the ", {"scheme": "Node", "value": "/nodes/sop/kinefx--mappoints", "type": "link", "text": ["Map Points SOP"], "fullpath": "/nodes/sop/kinefx--mappoints"}, "."], "extent": [3521, 3787]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [3787, 3801], "body": [{"type": "para", "indent": 12, "text": ["This input does not necessarily have to be static, an animated input can also be modified based upon the driver transforms on the third input."], "extent": [3801, 3957]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 4, "text": ["Source Skeleton"], "extent": [3957, 3978], "body": [{"type": "para", "indent": 8, "text": ["The driver transforms for the Full Body IK solve."], "extent": [3978, 4037]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [4037, 4046], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["First Output"], "extent": [4046, 4061], "body": [{"type": "para", "indent": 4, "text": ["The skeleton on the first input with the result of the Full Body IK applied."], "extent": [4061, 4143]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Second Output"], "extent": [4143, 4158], "body": [{"type": "para", "indent": 4, "text": ["The unmodified ", {"type": "ui", "text": ["Source Skeleton"]}, "."], "extent": [4158, 4199]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4199, 4208], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--configurejoints", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--configurejoints"}], "extent": [4208, 4245]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--fbikconfiguretargets", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fbikconfiguretargets"}], "extent": [4245, 4287]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--fktransfer", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--fktransfer"}], "extent": [4287, 4319]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--rigpose", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--rigpose"}], "extent": [4319, 4348]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--rigmatchpose", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--rigmatchpose"}], "extent": [4348, 4382]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/kinefx--mappoints", "type": "link", "text": "", "fullpath": "/nodes/sop/kinefx--mappoints"}], "extent": [4382, 4413]}], "container": true}], "text": "Related"}], "title": ["Full Body IK"], "summary": ["Transfer a motion to a SOP-based skeleton using full-body inverse kinematics algorithm."], "included": ["/nodes/sop/_kinefx_common"]}