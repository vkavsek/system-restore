{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "polyexpand2d", "icon": "SOP/polyexpand2d", "tags": "polygons, surface, model", "since": "15.0", "verb_since": "18.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Poly Expand 2D"], "extent": [0, 19]}, {"type": "summary", "indent": 0, "text": ["Creates offset polygonal geometry for planar polygonal graphs."], "extent": [158, 228]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [228, 243], "body": [{"type": "fig_group", "body": [{"ext": null, "type": "fig", "indent": 0, "text": [{"scheme": "Image", "value": "/images/model/polyexpand2d_basic.png", "type": "img", "text": ""}], "role": "item", "extent": [243, 294], "body": [{"type": "para", "indent": 4, "text": ["This node builds offset geometry at a specified distance from a planar graph of connected polylines. It can generate polyline outlines, or polygonal surfaces."], "extent": [294, 458]}], "container": true}, {"ext": null, "type": "fig", "indent": 0, "text": [{"scheme": "Image", "value": "/images/model/polyexpand2d.jpg", "type": "img", "text": ""}], "role": "item", "extent": [458, 502], "body": [{"type": "para", "indent": 4, "text": ["This is useful for generating road geometry from connected polylines."], "extent": [502, 577]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["Currently the node does not handle polylines that simply overlap in space \u2014 the polylines must be connected with fused points. You will need to use tools such as ", {"scheme": "Node", "value": "/nodes/sop/curvesect", "type": "link", "text": ["Curvesect"], "fullpath": "/nodes/sop/curvesect"}, " and ", {"scheme": "Node", "value": "/nodes/sop/fuse", "type": "link", "text": ["Fuse"], "fullpath": "/nodes/sop/fuse"}, " to set up the input geometry."], "extent": [577, 828]}, {"type": "para", "indent": 0, "text": ["The node sets point attributes on the generated geometry when outputting ", {"type": "ui", "text": ["Offset Curves"]}, " and ", {"type": "ui", "text": ["Offset Surfaces"]}, ", and also sets primitive attributes when outputting ", {"type": "ui", "text": ["Offset Surfaces"]}, "."], "extent": [828, 1017]}, {"type": "para", "indent": 0, "text": ["The node computes the straight skeleton of the input, and to do so tries to build a triangulation of the input and its convex hull.  It will error with ", {"type": "strong", "text": ["Failed to process triangulation"]}, " if there is a problem with this step.  The common causes of this failure are overlapping curves, duplicate points, or a graph with a degenerate convex hull."], "extent": [1017, 1361]}, {"type": "para", "indent": 0, "text": ["The node may warn about other problems encountered during the skeleton computation, reporting a ", {"type": "strong", "text": ["Bad partition of collapsed polygon"]}, ", or ", {"type": "strong", "text": ["X flip event(s) ignored because of infinite loop detection"]}, ", with the second warning often a consequence of the first.  These warnings are typically an indication of numeric problems cropping up during the execution of the algorithm and may often be alleviated by either decreasing or increasing the ", {"type": "ui", "text": ["Coincidence Tolerance"]}, " or changing the scale of the input."], "extent": [1361, 1862]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["TIPS"], "extent": [1862, 1873], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["The computation of the skeleton is sensitive to size.  If you are getting artifacts, try changing the ", {"type": "ui", "text": ["Coincidence Tolerance"]}, " or scaling your geometry.  As a rough guide, you might need to increase the ", {"type": "ui", "text": ["Coincidence Tolerance"]}, " if the problem appears to be missed intersections, and decrease it if the problem appears to be missing primitives."], "extent": [1873, 2223]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The computation of the skeleton is more sensitive to parallel edges when a non-uniform ", {"type": "ui", "text": ["Inside Scale"]}, " or ", {"type": "ui", "text": ["Outside Scale"]}, " is used.  If you are getting artifacts, try increasing the ", {"type": "ui", "text": ["Parallelism Tolerance"]}, "."], "extent": [2223, 2437]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The optional ", {"type": "ui", "text": ["Edge Distance Attribute"]}, " created while generating ", {"type": "ui", "text": ["Offset Surfaces"]}, " can be used to ", {"type": "q", "text": ["raise the roof"]}, ".  Translating the output by this amount in the direction of the plane\u2019s normal will result in roof-like geometry.  For non-uniform offsets, i.e., when local scale attributes are used, you\u2019ll first need to divide the value by the optional ", {"type": "ui", "text": ["Edge Speed Attribute"]}, "."], "extent": [2437, 2822]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2822, 2834], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [2834, 2842], "body": [{"type": "para", "indent": 4, "text": ["The primitives whose edges form the input planar graph. Leave this empty to use all input geometry."], "extent": [2858, 2963]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["2D Positions"], "extent": [2963, 2978], "body": [{"type": "para", "indent": 4, "text": ["How the node converts the 3D point positions in the geometry to 2D."], "extent": [3004, 3077]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Fit Plane"], "extent": [3077, 3092], "body": [{"type": "para", "indent": 8, "text": ["Project the points onto an imaginary plane that best fits their 3D positions."], "extent": [3092, 3179]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Select Projection Plane"], "extent": [3179, 3208], "body": [{"type": "para", "indent": 8, "text": ["Manually specify the plane to project onto."], "extent": [3208, 3261]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "planepossrc"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane Origin"], "extent": [3261, 3275], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["2D Positions"]}, " is ", {"type": "ui", "text": ["Select Projection Plane"]}, ", the origin of the plane to project the points onto."], "extent": [3297, 3408]}], "container": true, "attrs": {"id": "planeorigin"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane Distance"], "extent": [3408, 3424], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["2D Positions"]}, " is ", {"type": "ui", "text": ["Select Projection Plane"]}, ", the distance along the ", {"type": "ui", "text": ["Plane Normal"]}, " direction between the projection plane\n    and the ", {"type": "ui", "text": ["Plane Origin"]}, "."], "extent": [3444, 3612]}], "container": true, "attrs": {"id": "planedist"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane Normal"], "extent": [3612, 3626], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["2D Positions"]}, " is ", {"type": "ui", "text": ["Select Projection Plane"]}, ", a vector controlling the orientation of the projection plane."], "extent": [3648, 3769]}], "container": true, "attrs": {"id": "planenormal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output"], "extent": [3769, 3777], "body": [{"type": "para", "indent": 4, "text": ["The type of offset geometry to generate."], "extent": [3794, 3844]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Offset curves"], "extent": [3844, 3863], "body": [{"type": "para", "indent": 8, "text": ["Generate polygonal curve outlines."], "extent": [3863, 3911]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Offset surfaces"], "extent": [3911, 3932], "body": [{"type": "para", "indent": 8, "text": ["Generate polygonal surfaces."], "extent": [3932, 3970]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "output"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Offset"], "extent": [3970, 3979], "body": [{"type": "para", "indent": 4, "text": ["How far to offset the edges of the new geometry from the original curves."], "extent": [3996, 4075]}], "container": true, "attrs": {"id": "offset"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Divisions"], "extent": [4075, 4087], "body": [{"type": "para", "indent": 4, "text": ["Number of offsets to perform. Numbers greater than ", {"type": "code", "text": ["1"]}, " divide the offset distance into multiple evenly spaced outlines."], "extent": [4102, 4231]}, {"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/images/model/polyexpand2d_divisions.jpg", "type": "img", "text": ""}], "extent": [4231, 4285]}], "container": true, "attrs": {"id": "divs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Side Determination"], "extent": [4285, 4305], "body": [{"type": "para", "indent": 4, "text": ["How to determine which sides of edges represent the inside and the outside\n    of the input graph."], "extent": [4333, 4437]}, {"type": "para", "indent": 4, "text": ["Vertex Order:"], "extent": [4437, 4456]}, {"type": "para", "indent": 4, "text": ["The vertex order of any primitives referencing an edge determines which\n    side of the edge is considered the inside or the outside."], "extent": [4456, 4595]}, {"type": "para", "indent": 4, "text": ["Simple Reachability:"], "extent": [4595, 4621]}, {"type": "para", "indent": 4, "text": ["A simple separation of the plane into an outside and possibly multiple\n    insides, with the outermost closed edge loops, if any, separating the\n    outside from the inside(s)."], "extent": [4621, 4803]}, {"type": "para", "indent": 4, "text": ["Alternating Reachability:"], "extent": [4803, 4834]}, {"type": "para", "indent": 4, "text": ["A nested separation of the plane into outsides and insides.  The outermost\n    closed edge loops, if any, separate the outside from the inside(s).  The\n    next outermost closed edge loops, if any, separate those insides from\n    embedded outsides.  The next outermost closed edge loops, if any, separate\n    those embedded outsides from even more embedded insides, and so on."], "extent": [4834, 5216]}, {"type": "para", "indent": 4, "text": ["Alternating Reachability With Permeable Shared Edges:"], "extent": [5216, 5275]}, {"type": "para", "indent": 4, "text": ["A nested separation of the plane into outsides and insides similar to\n    Alternating Reachability, with the additional constraint that a closed\n    edge loop creates a nested outside region only when it consists entirely\n    of unshared edges.  In this context, an edge is considered shared when\n    its reverse is also an edge.  This approach is useful for inside regions\n    containing polygonal meshes."], "extent": [5275, 5687]}], "container": true, "attrs": {"id": "sidedetermination"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Inside"], "extent": [5687, 5702], "body": [{"type": "para", "indent": 4, "text": ["Generate the inner offset geometry (on the inside of closed loops)."], "extent": [5725, 5798]}], "container": true, "attrs": {"id": "outputinside"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Outside"], "extent": [5798, 5814], "body": [{"type": "para", "indent": 4, "text": ["Generate the outer offset geometry."], "extent": [5838, 5879]}], "container": true, "attrs": {"id": "outputoutside"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Input Geometry"], "extent": [5879, 5900], "body": [{"type": "para", "indent": 4, "text": ["Include the original curves in the output. The default is off."], "extent": [5920, 5988]}], "container": true, "attrs": {"id": "keepinput"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Split Offset Curves To Omit End Caps"], "extent": [5988, 6026], "body": [{"type": "para", "indent": 4, "text": ["By default, the generated offset curves wrap around dangling edges.\n    Turning this option on will split such offset curves into multiple\n    primitives to remove these end caps."], "extent": [6048, 6233]}], "container": true, "attrs": {"id": "omitendcaps"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Local Attributes"], "extent": [6233, 6258], "body": [{"type": "para", "indent": 0, "text": ["Local attributes can be used to generate non-uniform offset geometry, by\nscaling the offset for each edge."], "extent": [6258, 6367]}, {"type": "para", "indent": 0, "text": ["It is possible to get overlapping offset curves across different division\nlevels when generating levels of non-uniform offset curves."], "extent": [6367, 6502]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Inside Scale"], "extent": [6502, 6516], "body": [{"type": "para", "indent": 4, "text": ["Scale the inside offset for each edge by the value of this attribute.  A\n    vertex, point, or primitive attribute can be used.  Non-positive values are\n    ignored and treated as having a value of 1.  If no ", {"type": "ui", "text": ["Outside Scale"]}, " is\n    specified, then this attribute is also used for the outside offset.  The\n    value will be averaged across any adjacent collinear edges."], "extent": [6543, 6918]}], "container": true, "attrs": {"id": "localinsidescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Outside Scale"], "extent": [6918, 6933], "body": [{"type": "para", "indent": 4, "text": ["Scale the outside offset for each edge by the value of this attribute.  A\n    vertex, point, or primitive attribute can be used.  Non-positive values are\n    ignored and treated as having a value of 1.  If no ", {"type": "ui", "text": ["Inside Scale"]}, " is\n    specified, then this attribute is also used for the inside offset.  The\n    value will be averaged across any adjacent collinear edges."], "extent": [6961, 7336]}], "container": true, "attrs": {"id": "localoutsidescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Create Output Groups"], "extent": [7336, 7358], "body": [{"type": "para", "indent": 4, "text": ["Create groups for inside and outside geometry."], "extent": [7373, 7425]}], "container": true, "attrs": {"id": "newg"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Inside Group"], "extent": [7425, 7439], "body": [{"type": "para", "indent": 4, "text": ["Put the generated inner geometry (on the inside of closed loops) in this group."], "extent": [7461, 7546]}], "container": true, "attrs": {"id": "insidegroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Outside Group"], "extent": [7546, 7561], "body": [{"type": "para", "indent": 4, "text": ["Put the generated outer geometry in this group."], "extent": [7584, 7637]}], "container": true, "attrs": {"id": "outsidegroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edge Distance Attribute"], "extent": [7637, 7662], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Output"]}, " is ", {"type": "ui", "text": ["Offset Surfaces"]}, ", create this vertex attribute with the distance of each vertex from the original polyline that generated it."], "extent": [7691, 7844]}], "container": true, "attrs": {"id": "edgedistattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edge Speed Attribute"], "extent": [7844, 7866], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Output"]}, " is ", {"type": "ui", "text": ["Offset Surfaces"]}, ", create this primitive attribute with the propagation speed of the original polyline that generated it.  This will be 1 when no local ", {"type": "ui", "text": ["Inside Scale"]}, " or ", {"type": "ui", "text": ["Outside Scale"]}, " attributes are used."], "extent": [7896, 8133]}], "container": true, "attrs": {"id": "edgespeedattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Coincidence Tolerance"], "extent": [8133, 8156], "body": [{"type": "para", "indent": 4, "text": ["Treat points within this distance in the 2D projection as coincident."], "extent": [8181, 8256]}], "container": true, "attrs": {"id": "coincidencetol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Parallelism Tolerance"], "extent": [8256, 8279], "body": [{"type": "para", "indent": 4, "text": ["Treat lines within this angle of each other (in radians) as parallel."], "extent": [8304, 8379]}], "container": true, "attrs": {"id": "parallelismtol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Skeleton Failure"], "extent": [8379, 8397], "body": [{"type": "para", "indent": 4, "text": ["This control provides workflow options, by changing how this node behaves\n    when the computation of the straight skeleton fails."], "extent": [8422, 8558]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Fail with Error"], "extent": [8558, 8579], "body": [{"type": "para", "indent": 8, "text": ["Report the failure as an error.  This is the least forgiving option."], "extent": [8579, 8657]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Warn and Output Empty Geometry"], "extent": [8657, 8693], "body": [{"type": "para", "indent": 8, "text": ["Report the failure as a warning and output empty geometry."], "extent": [8693, 8761]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "skeletonfailure"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Straight Skeleton"], "extent": [8761, 8786], "body": [{"type": "para", "indent": 4, "text": ["Cache the computed 2D graph to improve performance."], "extent": [8810, 8867]}], "container": true, "attrs": {"id": "cacheskeleton"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Recompute Point Normals"], "extent": [8867, 8892], "body": [{"type": "para", "indent": 4, "text": ["Recompute point normals (if they exist)."], "extent": [8913, 8959]}], "container": true, "attrs": {"id": "updatenmls"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [8959, 8968], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/polyextrude", "type": "link", "text": "", "fullpath": "/nodes/sop/polyextrude"}], "extent": [8968, 8994]}], "container": true}], "text": "Related"}], "title": ["Poly Expand 2D"], "summary": ["Creates offset polygonal geometry for planar polygonal graphs."]}