{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "solver", "icon": "SOP/solver", "tags": "tech, anim", "replaces": "/nodes/sop/foreach", "since": "12.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Solver"], "extent": [124, 135]}, {"type": "summary", "indent": 0, "text": ["Allows running a SOP network iteratively over some input geometry, with the output of the network from the previous frame serving as the input for the network at the current frame."], "extent": [135, 324]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [324, 339], "body": [{"type": "para", "indent": 0, "text": ["Normally in geometry networks each frame is self-contained: it works out what the geometry should look like based on the nodes in the geometry network, possibly using variables like ", {"type": "code", "text": ["$F"]}, " (the current frame) to modify their behavior, using the animated position of points at the current frame, and so on."], "extent": [339, 645]}, {"type": "para", "indent": 0, "text": ["This node lets you create effects where a surface network ", {"type": "em", "text": ["modifies"]}, " the previous frame\u2019s geometry, allowing you to create iterative feedback, automata, and simulation-like effects."], "extent": [645, 828]}, {"type": "para", "indent": 0, "text": ["For example, if you create a ", {"scheme": "Node", "value": "/nodes/sop/grid", "type": "link", "text": ["Grid"], "fullpath": "/nodes/sop/grid"}, " and connect a ", {"scheme": "Node", "value": "/nodes/sop/pointjitter", "type": "link", "text": ["Point Jitter"], "fullpath": "/nodes/sop/pointjitter"}, " to it, and set the ", {"type": "ui", "text": ["Seed"]}, " on the point jitter to ", {"type": "code", "text": ["$F"]}, "\u2026"], "extent": [828, 988]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["In a normal geometry network, the points will jitter to random locations at each frame, creating a look where each frame seems completely independent, with points ", {"type": "q", "text": ["teleporting"]}, " between random positions."], "extent": [988, 1194]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you put the jitter in a Solver node network, the jitter is applied to each point\u2019s position ", {"type": "em", "text": ["from the previous frame"]}, ", creating a ", {"type": "q", "text": ["random walk"]}, ", with points wandering around."], "extent": [1194, 1375]}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["How to"], "extent": [1375, 1388], "body": [{"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["In a geometry network, use the ", {"keys": ["Tab"], "type": "keys", "text": null}, " menu to create a ", {"scheme": "Node", "value": "/nodes/sop/solver", "type": "link", "text": ["Solver surface node"], "fullpath": "/nodes/sop/solver"}, "."], "extent": [1388, 1487]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Connect the geometry you want the solver to modify to the ", {"type": "em", "text": ["first"]}, " input of the solver node."], "extent": [1487, 1582]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Double-click the solver node to dive inside."], "extent": [1582, 1630], "body": [{"type": "para", "indent": 4, "text": ["The network editor jumps to a geometry network containing several nodes representing the inputs to the solver, and a node labeled ", {"type": "code", "text": ["Prev_Frame"]}, "."], "extent": [1630, 1784]}, {"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["Input_1"]}, " node in the solver network contains the ", {"type": "em", "text": ["original"]}, " geometry you connected to the first input. This is sometimes useful, for example for nodes that take a rest position. The solver\u2019s second, third, and fourth inputs allow you pass extra bits of geometry down to the solver\u2019s SOP network if needed."], "extent": [1784, 2100]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Start building surface nodes from the output of the ", {"type": "code", "text": ["Prev_Frame"]}, " node. This network will be cooked every frame, with the output of the ", {"type": "code", "text": ["Prev_Frame"]}, " node containing the geometry from the previous frame. Set the ", {"scheme": null, "value": "/nodes/sop/", "type": "link", "text": ["display flag"], "fullpath": "/nodes/sop/index"}, " on the node containing the ", {"type": "q", "text": ["output"]}, " geometry of the "], "extent": [2100, 2393], "body": [{"type": "para", "indent": 4, "text": ["For example, if you connected a ", {"scheme": "Node", "value": "/nodes/sop/xform", "type": "link", "text": ["Transform node"], "fullpath": "/nodes/sop/xform"}, " to the output of the ", {"type": "code", "text": ["Last_Frame"]}, " and set the transform node\u2019s ", {"type": "ui", "text": ["Translate"]}, " parameter to ", {"type": "code", "text": ["0, 1, 0"]}, ", the geometry you connected to the solver\u2019s first input would rise one unit every frame."], "extent": [2393, 2651]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["To get from the solver\u2019s geometry network back up to the original geometry network, press ", {"keys": ["U"], "type": "keys", "text": null}, " or click the original network in the path bar at the top of the network editor."], "extent": [2651, 2830]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Click ", {"scheme": "Icon", "value": "PLAYBAR/play_forward", "type": "link", "text": "", "fullpath": "/nodes/sop/PLAYBAR/play_forward"}, " Play in the play bar at the bottom of the main window to see the effects of the solver."], "extent": [2830, 2955]}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [2955, 2961], "body": [{"type": "para", "indent": 4, "text": ["If you press play inside the ", {"type": "em", "text": ["solver\u2019s"]}, " network, you will not see the feedback effect. The playback will simply show what the network would look like if it ran on the original input geometry at the current frame."], "extent": [2961, 3179]}], "container": true}], "container": true, "role": "item_group"}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [3179, 3184], "body": [{"type": "para", "indent": 4, "text": ["You may want to ", {"scheme": null, "value": "/basics/panes", "type": "link", "text": ["create and pin a new network editor tab"], "fullpath": "/basics/panes"}, " with the solver\u2019s network so you can refer to it more quickly."], "extent": [3184, 3324]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["How it works"], "extent": [3324, 3343], "body": [{"type": "para", "indent": 0, "text": ["You can use the Solver node to create iterative feedback effects without reading this section, however for advanced users or if you're having a problem, this section may be useful."], "extent": [3343, 3526]}, {"type": "para", "indent": 0, "text": ["The Solver node contains a simple DOP network with a ", {"scheme": "Node", "value": "/nodes/dop/sopsolver", "type": "link", "text": ["SOP Solver DOP"], "fullpath": "/nodes/dop/sopsolver"}, ". When you double-click the Solver surface node, a bit of magic jumps not into the actual contents of the node (the DOP network), but down one more level into the contents of the SOP Solver DOP (the network for specifying the solver step SOPs)."], "extent": [3526, 3860]}, {"type": "para", "indent": 0, "text": ["If you want to modify the DOP network for some reason, you can jump to it by clicking it in the path bar at the top of the network editor."], "extent": [3860, 4000]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [4000, 4005], "body": [{"type": "para", "indent": 4, "text": ["If you play back the animation while viewing the contents of the Solver SOP, you will be saving un-feedback frames to the cache, which will look like they aren\u2019t doing anything when replayed. You can fix this by resetting the simulations."], "extent": [4005, 4249]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [4249, 4261], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reset Simulation"], "extent": [4261, 4281], "body": [{"type": "para", "indent": 4, "text": ["Resets the simulation."], "extent": [4281, 4309]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Initial State"], "extent": [4309, 4324], "body": [{"type": "para", "indent": 4, "text": ["Normally the first input is the initial state.  However, this toggle, lets you explicitly specify another SOP to be the initial state, freeing up that input."], "extent": [4324, 4487]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start Frame"], "extent": [4487, 4500], "body": [{"type": "para", "indent": 4, "text": ["Which frame to start solving on.  The geometry is empty prior\n    to this frame."], "extent": [4500, 4586]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sub Steps"], "extent": [4586, 4597], "body": [{"type": "para", "indent": 4, "text": ["How many substeps to break each frame into."], "extent": [4597, 4646]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Simulation"], "extent": [4646, 4664], "body": [{"type": "para", "indent": 4, "text": ["Pure SOP simulations do not require a cache, but it is useful for scrubbing."], "extent": [4664, 4746]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Allow Caching To Disk"], "extent": [4746, 4769], "body": [{"type": "para", "indent": 4, "text": ["If the maximum size of the cache in memory is reached, the\n    DOP Network can either delete old cache entries to make room\n    for new entries, or old entries can be saved to disk. If\n    this option is turned on, the old cache entries are saved to disk\n    and will be reloaded from disk if needed. This mode will be\n    slower than simply throwing away the old cache entries, but\n    it ensures that the entire simulation history is always\n    available regardless of the in-memory cache size."], "extent": [4769, 5271]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Memory (MB)"], "extent": [5271, 5290], "body": [{"type": "para", "indent": 4, "text": ["Specifies how much memory in megabytes can be consumed by the cache for\n    this simulation. Once this limit is exceeded, old cache entries are\n    either deleted or saved to disk to make more room, depending on the\n    state of the ", {"type": "ui", "text": ["Allow Caching To Disk"]}, " parameter above."], "extent": [5290, 5571]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [5571, 5580], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/timeshift", "type": "link", "text": "", "fullpath": "/nodes/sop/timeshift"}], "extent": [5580, 5604]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/foreach", "type": "link", "text": "", "fullpath": "/nodes/sop/foreach"}], "extent": [5604, 5626]}], "container": true}], "text": "Related"}], "title": ["Solver"], "summary": ["Allows running a SOP network iteratively over some input geometry, with the output of the network from the previous frame serving as the input for the network at the current frame."]}