{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "vdbadvectsdf", "icon": "COMMON/openvdb", "since": "12.5", "verb_since": "16.5", "tags": "model", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["VDB Advect"], "extent": [118, 133]}, {"type": "summary", "indent": 0, "text": ["Moves VDBs in the input geometry along a VDB velocity field."], "extent": [133, 202]}, {"type": "para", "indent": 0, "text": ["See ", {"scheme": null, "value": "/model/volumes", "type": "link", "text": ["volumes"], "fullpath": "/model/volumes"}, " for an explanation of standard volumes and OpenVDB volumes."], "extent": [16, 105]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [226, 241], "body": [{"type": "para", "indent": 0, "text": ["The VDB Advect operation will move both narrow band signed distance fields and other fields according to a velocity field defined in a vector VDB."], "extent": [241, 390]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Animating advection"], "extent": [390, 416], "body": [{"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["This node is not a feedback loop"]}, "."], "extent": [416, 454]}, {"type": "para", "indent": 0, "text": ["It moves the fields it finds in the input geometry.\nIt ", {"type": "em", "text": ["cannot"]}, " modify the fields over time.\n(That is, if you hook this node up to do advection, and press play, the fields will not animate.)"], "extent": [454, 646]}, {"type": "para", "indent": 0, "text": ["To set up a feedback loop, where the advection at each frame affects the advected field from the previous frame, do one of the following:"], "extent": [646, 785]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Do the advection inside a ", {"scheme": "Node", "value": "/nodes/sop/solver", "type": "link", "text": ["SOP Solver"], "fullpath": "/nodes/sop/solver"}, "."], "extent": [785, 844]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Set the ", {"type": "ui", "text": ["Timestep"]}, " to $T\n  This will cause the node to recalculate, ", {"type": "em", "text": ["at every frame"]}, ", the path of every particle through ", {"type": "em", "text": ["every previous frame"]}, " to get the current one.\n  This is obviously not very practical."], "extent": [844, 1057]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1057, 1069], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [1069, 1077], "body": [{"type": "para", "indent": 4, "text": ["A subset of VDBs in the first input to move using the velocity field."], "extent": [1077, 1152]}, {"type": "para", "indent": 4, "text": ["These must be narrow band signed distance fields."], "extent": [1152, 1207]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity"], "extent": [1207, 1217], "body": [{"type": "para", "indent": 4, "text": ["The name of a VDB primitive in the second input to use as the velocity field."], "extent": [1217, 1300]}, {"type": "para", "indent": 4, "text": ["This must be a vector-valued VDB primitive.  You can use the VDB Vector Merge SOP to turn a ", {"type": "code", "text": ["vel.[xyz]"]}, " triple into a single primitive."], "extent": [1300, 1441]}, {"type": "para", "indent": 4, "text": ["See ", {"scheme": null, "value": "/model/volumes#group", "type": "link", "text": ["specifying volumes"], "fullpath": "/model/volumes#group", "fragment": "#group"}, "."], "extent": [1441, 1493]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Respect Grid Class"], "extent": [1493, 1513], "body": [{"type": "para", "indent": 4, "text": ["When this option is disabled, all VDBs will use a general numerical\n    advection scheme, otherwise level set VDBs will be advected using\n    a spatial finite-difference scheme."], "extent": [1513, 1696]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Timestep"], "extent": [1696, 1706], "body": [{"type": "para", "indent": 4, "text": ["Number of seconds of movement to apply to the input points.\n    The default is ", {"type": "code", "text": ["1/$FPS"]}, " (one frame\u2019s worth of time).\n    You can use negative values to move the points backwards through the velocity field."], "extent": [1706, 1917]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["General Advection"], "extent": [1917, 1936], "body": [{"type": "para", "indent": 4, "text": ["These control how non-SDF VDBs are transported by the velocity field."], "extent": [1936, 2011]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Substeps"], "extent": [2011, 2025], "body": [{"type": "para", "indent": 8, "text": ["The VDBs have to be pre-dilated for how far they may be moved,\n        so with large velocities the memory footprint can become large.\n        Increasing substeps allows each dilating to be more reasonable."], "extent": [2025, 2240]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Advection Scheme"], "extent": [2240, 2262], "body": [{"type": "para", "indent": 8, "text": ["Method to use for tracing through the velocity to find the initial\n        location of each value.   The methods are of increasing accuracy.\n        The MacCormack and BFECC methods are error-correcting methods\n        that try to avoid the smoothing caused by linear interpolation."], "extent": [2262, 2553]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Limiter Scheme"], "extent": [2553, 2573], "body": [{"type": "para", "indent": 8, "text": ["Controls behavior of error correction when the error corrector\n        results in a value outside of the original possibilities.  Without\n        and error corrector ringing and instabilities can occur."], "extent": [2573, 2794]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Level Set Advection"], "extent": [2794, 2815], "body": [{"type": "para", "indent": 4, "text": ["These control how SDF VDBs are moved through the velocity field."], "extent": [2815, 2885]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Spatial Scheme"], "extent": [2885, 2905], "body": [{"type": "para", "indent": 8, "text": ["How accurately the gradients of the signed distance field are computed.\n        The later choices are more accurate but take more time."], "extent": [2905, 3050]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Temporal Scheme"], "extent": [3050, 3071], "body": [{"type": "para", "indent": 8, "text": ["How accurately time is evolved within the timestep.  Later choices are\n        more accurate but take more time."], "extent": [3071, 3193]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Renormalization"], "extent": [3193, 3210], "body": [{"type": "para", "indent": 8, "text": ["After moving the signed distance field, it will often no longer be a proper signed distance field.  A number of renormalizaton passes can be performed to convert it back into a proper field."], "extent": [3210, 3418]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Steps"], "extent": [3418, 3433], "body": [{"type": "para", "indent": 16, "text": ["The number of times to renormalize between every substep."], "extent": [3433, 3516]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Spatial Scheme"], "extent": [3516, 3540], "body": [{"type": "para", "indent": 16, "text": ["How accurately the gradients of the signed distance field are computed. The later choices are more accurate but take more time."], "extent": [3540, 3693]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Temporal Scheme"], "extent": [3693, 3718], "body": [{"type": "para", "indent": 16, "text": ["How accurately time is evolved within the renormalizaton stage.  Later choices are more accurate but take more time."], "extent": [3718, 3852]}], "container": true}], "container": true}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3852, 3861], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vdb", "type": "link", "text": "", "fullpath": "/nodes/sop/vdb"}], "extent": [3861, 3882]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vdbfromparticles", "type": "link", "text": "", "fullpath": "/nodes/sop/vdbfromparticles"}], "extent": [3882, 3916]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vdbadvectpoints", "type": "link", "text": "", "fullpath": "/nodes/sop/vdbadvectpoints"}], "extent": [3916, 3949]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vdbmorphsdf", "type": "link", "text": "", "fullpath": "/nodes/sop/vdbmorphsdf"}], "extent": [3949, 3979]}], "container": true}], "text": "Related"}], "title": ["VDB Advect"], "summary": ["Moves VDBs in the input geometry along a VDB velocity field."], "included": ["/nodes/sop/volume_types"]}