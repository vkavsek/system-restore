{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "vellumconstraints", "icon": "DOP/vellumconstraints", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Vellum Constraints"], "extent": [107, 130]}, {"type": "summary", "indent": 0, "text": ["Configure constraints on geometry for the Vellum solvers."], "extent": [130, 197]}, {"type": "para", "indent": 0, "text": ["The Vellum Constraints SOP creates constraints from the incoming\ngeometry suitable for the Vellum solver."], "extent": [197, 304]}, {"type": "para", "indent": 0, "text": ["All Vellum material types, such as cloth, hair, or softbody, are described\nas a set of explicit constraints between points. A Vellum configuration\nis made of two geometries.  The display and collision geometry is the\nfirst input and first output. The constraint geometry is the second input\nand second output. The two should have one-to-one point correspondence,\nso are often processed as a pair by most Vellum nodes."], "extent": [304, 723]}, {"type": "para", "indent": 0, "text": ["Vellum Constraints can generate almost all constraint types since\nmost constraints are defined by a common set of parameters.  But to\nmake it easier to setup, many tab-menu macros are present to configure\ncommon constraint types."], "extent": [723, 954]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Resolution-independent tets"], "extent": [954, 988], "body": [{"type": "para", "indent": 0, "text": ["Tetrahedral ", {"type": "ui", "text": ["Constraint Types"]}, " (stretch, volume, and fiber) are now independent from changes in mesh density, mass, scale and other parameters. After the definition of the constraint type, choose a ", {"type": "ui", "text": ["Model"]}, " for the simulation, e.g. ", {"type": "ui", "text": ["Linear ARAP"]}, ". All simulations within the chosen model will now produce very similar results with different settings. The main point is that you don\u2019t have to update the constraints parameters anymore."], "extent": [988, 1429]}, {"type": "para", "indent": 0, "text": ["To initialize the tetrahedral structure, it\u2019s mandatory to add an upstream ", {"scheme": "Node", "value": "/nodes/sop/tetconform", "type": "link", "text": ["Tet Conform SOP"], "fullpath": "/nodes/sop/tetconform"}, " node. The node\u2019s ", {"type": "ui", "text": ["Max Tet Scale"]}, " defines the resolution of the tetrahedral mesh."], "extent": [1429, 1626]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1626, 1638], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Constraint Type"], "extent": [1638, 1656], "body": [{"type": "para", "indent": 4, "text": ["The type of constraint to generate.   This affects the visibility of\n    many of the other parameters.   Usually this is set by using the\n    appropriate tab-menu macro."], "extent": [1681, 1856]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [1856, 1866], "body": [{"type": "para", "indent": 12, "text": ["No constraints are generated."], "extent": [1866, 1909]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Distance Along Edges"], "extent": [1909, 1935], "body": [{"type": "para", "indent": 12, "text": ["Turns each edge in the display geometry into a distance constraint maintaining that edge length."], "extent": [1935, 2045]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Across Triangles"], "extent": [2045, 2072], "body": [{"type": "para", "indent": 12, "text": ["Each pair of triangles (or implied triangles if input is quads or higher) creates a constraint maintaining the initial dihedral angle between the triangles."], "extent": [2072, 2242]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Cloth"], "extent": [2242, 2253], "body": [{"type": "para", "indent": 8, "text": ["Creates constraints that consist of both distance on edge and bend across triangle constraints."], "extent": [2253, 2358]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Hair"], "extent": [2358, 2368], "body": [{"type": "para", "indent": 8, "text": ["Creates constraints that consist of distance on edge and bend between edges.  This bend also includes the twist of the edges, allowing torsion effects."], "extent": [2368, 2529]}], "container": true}, {"type": "dt", "indent": 4, "text": ["String"], "extent": [2529, 2541], "body": [{"type": "para", "indent": 8, "text": ["Creates constraints that are a lighter weight hair constraint.  They are a distance along the edge and the angle between edges. However, they don\u2019t have any twist constraints, so the edges can spin freely."], "extent": [2541, 2756]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Pin to Target"], "extent": [2756, 2775], "body": [{"type": "para", "indent": 8, "text": ["Pins the specified points to the corresponding point in the target geometry.  The target geometry for a Vellum solver is usually the first input, so it matches the animation, but can be overridden."], "extent": [2775, 2982]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Attach to Geometry"], "extent": [2982, 3006], "body": [{"type": "para", "indent": 8, "text": ["Attaches the specified points to the geometry in the third input. They will store their closest point at the attach frame and create a distance constraint tying them to it."], "extent": [3006, 3188]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stitch Points"], "extent": [3188, 3207], "body": [{"type": "para", "indent": 8, "text": ["Stitches points within the same geometry together using distance\n        constraints. The points do not need to actually be connected by\n        geometry.  This is useful for keeping jackets closed or preventing\n        pockets from flapping."], "extent": [3207, 3459]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Pressure"], "extent": [3459, 3473], "body": [{"type": "para", "indent": 8, "text": ["Stores the original volume and builds a many-point constraint to maintain it, for each piece determined by the ", {"type": "ui", "text": ["Define Pieces"]}, " parameter. The enforcement is global, so squishing one place will expand another, like a balloon.  A ", {"type": "code", "text": ["pressurescale"]}, " point attribute can be used to scale the effect of the pressure constraint on a per-point basis.  This attribute can be used for interesting inflation effects, but should be used with care as it can also lead to unbalanced forces if the ", {"type": "code", "text": ["pressurescale"]}, " is near zero on only one side of an un-pinned balloon, for example."], "extent": [3473, 4053]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Tetrahedral Volume"], "extent": [4053, 4077], "body": [{"type": "para", "indent": 8, "text": ["Turns each tetrahedron into a constraint to maintain the volume of the tetrahedra.  "], "extent": [4077, 4183]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [4183, 4197], "body": [{"type": "para", "indent": 12, "text": ["This does not include any shear or stretch constraints. Additional distance constraints need to be added to make a proper softbody."], "extent": [4197, 4342]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 4, "text": ["Weld Points"], "extent": [4342, 4359], "body": [{"type": "para", "indent": 8, "text": ["While not a constraint per-se, this edits the ", {"type": "code", "text": ["weld"]}, " attribute to cause the points to be logically fused into a single point for the solve. However, they will remain independent points otherwise. In addition, this can build bend constraints where edges have become logically fused, ensuring the result acts like a single flat piece.  The ", {"scheme": "Node", "value": "/nodes/sop/vellumpostprocess", "type": "link", "text": ["Vellum Post Process SOP"], "fullpath": "/nodes/sop/vellumpostprocess"}, " can rewire the welded vertices after simulation so that the geometry appears connected for rendering."], "extent": [4359, 4861]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Glue"], "extent": [4861, 4871], "body": [{"type": "para", "indent": 8, "text": ["Each point will search for a nearby point that is not a member of its own piece.   It will construct a distance constraint holding it to that point.  This is useful for building systems that automatically glue together by proximity, especially when combined with breaking."], "extent": [4871, 5153]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Struts"], "extent": [5153, 5165], "body": [{"type": "para", "indent": 8, "text": ["Each point will search for a distant point that is of its own piece, but which it has a straight line-of-sight to.  It will build a distance constraint to that point.  This constructs a large number of toothpick like internal struts that give an object stiffness and volume without the expense of a fully FEM solve."], "extent": [5165, 5490]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Tetrahedral Fiber"], "extent": [5490, 5513], "body": [{"type": "para", "indent": 8, "text": ["Turns each tetrahedron into a constraint that attempts to flatten along the direction specified by the ", {"type": "code", "text": ["materialW"]}, " attribute on its points, or ", {"type": "code", "text": ["{0, 0, 1}"]}, " if that attribute doesn\u2019t exist.  These constraints can be created with low stiffness that is animated up during the simulation with ", {"scheme": "Node", "value": "/nodes/dop/vellumconstraintproperty", "type": "link", "text": ["Vellum Constraint Property"], "fullpath": "/nodes/dop/vellumconstraintproperty"}, " to simulate volumetric contraction effects."], "extent": [5513, 5917]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Triangle Stretch"], "extent": [5917, 5939], "body": [{"type": "para", "indent": 8, "text": ["Turns each triangle into a constraint that keeps the triangle As-Rigid-As-Possible (ARAP) by removing any stretching or skewing, according to the specified stiffness."], "extent": [5939, 6115]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Tetrahedral Stretch"], "extent": [6115, 6140], "body": [{"type": "para", "indent": 8, "text": ["Turns each tetrahedron into a constraint that keeps the tetrahedron As-Rigid-As-Possible (ARAP) by removing any stretching or skewing, according to the specified stiffness.  If ", {"type": "ui", "text": ["Preserve Volume"]}, " is enabled, the constraint additionally attempts to preserve volume with a very high internal stiffness but the specified ", {"type": "ui", "text": ["Damping Ratio"]}, ", similar to the way the ", {"type": "ui", "text": ["Tetrahedral Volume"]}, " constraint functions."], "extent": [6140, 6555]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Shape Match"], "extent": [6555, 6572], "body": [{"type": "para", "indent": 8, "text": ["Creates a constraint that pulls its points back to the original (rest) shape, for each piece determined by the ", {"type": "ui", "text": ["Define Pieces"]}, " parameter. This constraint can be used to add rigidity either on top of existing constraints such as cloth, or by itself to create mostly rigid objects that can interact with other Vellum geometry."], "extent": [6572, 6912]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [6912, 6925], "body": [{"type": "para", "indent": 12, "text": ["Shape Match constraints generally work best with ", {"type": "ui", "text": ["Mass"]}, " set to\n            ", {"type": "ui", "text": ["Calculate Uniform"]}, ", and with consistently sized geometry. To generate this type of geometry, you can use a ", {"scheme": "Node", "value": "/nodes/sop/remesh", "type": "link", "text": ["Remesh SOP"], "fullpath": "/nodes/sop/remesh"}, ".  "], "extent": [6925, 7165]}], "container": true}, {"type": "tip", "indent": 8, "role": "item", "extent": [7165, 7178], "body": [{"type": "para", "indent": 12, "text": ["An effective workflow with this constraint type is to use the ", {"scheme": "Node", "value": "/nodes/sop/vellumxformpieces", "type": "link", "text": ["Vellum Transform Pieces SOP"], "fullpath": "/nodes/sop/vellumxformpieces"}, " on the simulation output to transform the original render geometry with the simulation result.  This workflow can also avoid any small deformations if the constraint fails to remain rigid at collision points or pins."], "extent": [7178, 7527]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "container": true, "attrs": {"id": "constrainttype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stretch Type"], "extent": [7527, 7541], "body": [{"type": "para", "indent": 3, "text": ["Selects which type of Stretch constraints are used when the ", {"type": "ui", "text": ["Constraint Type"]}, "\n   is set to ", {"type": "ui", "text": ["Cloth"]}, ". The linear ", {"type": "ui", "text": ["Triangle Stretch"]}, " constraints converge to\n   their proper stiffness faster than ", {"type": "ui", "text": ["Distance Along Edges"]}, " at higher cloth resolutions,\n   but do not support anisotropy via the ", {"type": "ui", "text": ["Enable Warp/Weft"]}, " parameter."], "extent": [7562, 7891]}], "container": true, "attrs": {"id": "stretchtype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Preserve Volume"], "extent": [7891, 7908], "body": [{"type": "para", "indent": 3, "text": ["When the ", {"type": "ui", "text": ["Constraint Type"]}, " is set to ", {"type": "ui", "text": ["Tetrahedral Stretch"]}, ", also apply\n   a constraint that preserves volume with a very high internal stiffness and\n   the specified ", {"type": "ui", "text": ["Damping Ratio"]}, ", similar to the way the ", {"type": "ui", "text": ["Tetrahedral\n   Volume"]}, " constraint functions.  Note that for more control, or if\n   experiencing instabilities due to the very high stiffness, you can turn\n   this option off and add a subsequent ", {"type": "ui", "text": ["Vellum Constraint"]}, " SOP set to\n   ", {"type": "ui", "text": ["Tetrahedral Volume"]}, " for a similar, but more controllable, volume-\n   preserving effect, at a slight loss of solve performance."], "extent": [7929, 8509]}], "container": true, "attrs": {"id": "preservevol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Model"], "extent": [8509, 8516], "body": [{"type": "para", "indent": 4, "text": ["The energy model used for ", {"type": "ui", "text": ["Triangle Stretch"]}, ", ", {"type": "ui", "text": ["Tetrahedral Stretch"]}, ", and\n    ", {"type": "ui", "text": ["Tetrahedral Fiber"]}, " constraints."], "extent": [8533, 8654]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Non-Linear ARAP"], "extent": [8654, 8675], "body": [{"type": "para", "indent": 12, "text": ["An As-Rigid-As-Possible model that gives good behavior for low stiffness, high stretching configurations."], "extent": [8675, 8794]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Linear ARAP"], "extent": [8794, 8811], "body": [{"type": "para", "indent": 12, "text": ["An As-Rigid-As-Possible model that generally performs better for high stiffness, low stretching configurations like hard solids or cloth."], "extent": [8811, 8962]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Scale-Invariant ARAP"], "extent": [8962, 8988], "body": [{"type": "para", "indent": 12, "text": ["An As-Rigid-As-Possible model that considers the area or volume of the triangle or tetrahedron when solving, making the stiffness values behave similarly across multiple scales.  This option is usually the best choice for most materials, including organic ones such as skin and muscle."], "extent": [8988, 9287]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "linear"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Geometry"], "extent": [9287, 9302], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group Type"], "extent": [9302, 9315], "body": [{"type": "para", "indent": 4, "text": ["Controls the type used for the source points for the constraint."], "extent": [9335, 9405]}], "container": true, "attrs": {"id": "grouptype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [9405, 9412], "body": [{"type": "para", "indent": 4, "text": ["The group for the source points of the constraint.  These are\n    the points or primitives that are turned into the constraint or\n    are used as the starting half of the constraint."], "extent": [9428, 9617]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Triangulation"], "extent": [9617, 9632], "body": [{"type": "para", "indent": 4, "text": ["Distance and bend constraints are usually built on a triangle mesh.\n    Rather than forcing the input to be triangulated, it can be implicitly\n    triangulated."], "extent": [9656, 9822]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [9822, 9832], "body": [{"type": "para", "indent": 8, "text": ["Do not triangulate the input implicitly."], "extent": [9832, 9882]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Regular"], "extent": [9882, 9895], "body": [{"type": "para", "indent": 8, "text": ["Consistently split into triangles."], "extent": [9895, 9939]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Alternating"], "extent": [9939, 9956], "body": [{"type": "para", "indent": 8, "text": ["Attempt to reverse the triangle splitting so a series of quads\n        have a less regular structure."], "extent": [9956, 10067]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "triangulation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mass"], "extent": [10067, 10073], "body": [{"type": "para", "indent": 4, "text": [{"type": "code", "text": ["mass"]}, " value for the points.  The mass affects how they interact with\n    POP forces and other pieces of Vellum geometry, and how strong the constraints are."], "extent": [10088, 10251]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Unchanged"], "extent": [10251, 10266], "body": [{"type": "para", "indent": 8, "text": ["Do not set the ", {"type": "code", "text": ["mass"]}, " attribute."], "extent": [10266, 10308]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Set Uniform"], "extent": [10308, 10325], "body": [{"type": "para", "indent": 8, "text": ["Set the ", {"type": "code", "text": ["mass"]}, " attribute to the specified value."], "extent": [10325, 10383]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Calculate Uniform"], "extent": [10383, 10406], "body": [{"type": "para", "indent": 8, "text": ["Calculate a uniform value for the ", {"type": "code", "text": ["mass"]}, " attribute for the points on a per-piece basis,\n        as determined by the ", {"type": "ui", "text": ["Define Pieces"]}, " setting.  For tetrahedral geometry, the overall volume\n        for each piece is calculated then multiplied by the ", {"type": "ui", "text": ["Density"]}, " parameter to find the mass of each piece.\n        This mass is then distributed equally across each point in that piece.  For polygonal geometry, the overall\n        area of each piece is used, and for polylines the line length is used."], "extent": [10406, 10914]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Calculate Varying"], "extent": [10914, 10937], "body": [{"type": "para", "indent": 8, "text": ["Calculate a varying value for the ", {"type": "code", "text": ["mass"]}, " attribute for the points.  For tetrahedral geometry, each point\n        accumulates 1/4 of the volume of each incident tetrahedron to find its overall volume, which is then\n        multiplied by the ", {"type": "ui", "text": ["Density"]}, " parameter to find the mass for each point.  For polygonal geometry, each point\n        accumulates its share of the area of each incident polygon, and for polylines its share of each incident edge\n        length.  This approach generally gives the most physically accurate results, especially as the resolution of\n        the geometry changes."], "extent": [10937, 11542]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mass"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Density"], "extent": [11542, 11551], "body": [{"type": "para", "indent": 4, "text": ["The volume used in calculating mass is scaled by this value when ", {"type": "ui", "text": ["Mass"]}, " is set to ", {"type": "ui", "text": ["Calculate Uniform"]}, "\n    or ", {"type": "ui", "text": ["Calculate Varying"]}, ".  This value can be further set to ", {"type": "ui", "text": ["Scale By Attribute"]}, " to scale by the specified\n    point attribute in the varying case."], "extent": [11569, 11834]}], "container": true, "attrs": {"id": "density"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Density Attribute"], "extent": [11834, 11853], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "ui", "text": ["Density"]}, " parameter will be scaled by this point attribute."], "extent": [11880, 11951]}], "container": true, "attrs": {"id": "densityattribute"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Thickness"], "extent": [11951, 11962], "body": [{"type": "para", "indent": 4, "text": ["Thickness of the points, stored in ", {"type": "code", "text": ["pscale"]}, ".  Used also for the\n    triangle thickness and curve thickness."], "extent": [11982, 12095]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Unchanged"], "extent": [12095, 12110], "body": [{"type": "para", "indent": 8, "text": ["Do not set the ", {"type": "code", "text": ["pscale"]}, " attribute."], "extent": [12110, 12154]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Set Uniform"], "extent": [12154, 12171], "body": [{"type": "para", "indent": 8, "text": ["Set the ", {"type": "code", "text": ["pscale"]}, " attribute to the specified value."], "extent": [12171, 12231]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Calculate Uniform"], "extent": [12231, 12254], "body": [{"type": "para", "indent": 8, "text": ["Calculate a uniform value for the ", {"type": "code", "text": ["pscale"]}, " attribute for the points on a per-piece basis,\n        as determined by the ", {"type": "ui", "text": ["Define Pieces"]}, " setting.  The thickness value is based on the average\n        length of the edges in each piece, scaled by the ", {"type": "ui", "text": ["Edge Length Scale"]}, " parameter.  This setting\n        generally avoids excess self-collisions while maintaining uniform thickness."], "extent": [12254, 12643]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Calculate Varying"], "extent": [12643, 12666], "body": [{"type": "para", "indent": 8, "text": ["Calculate a varying value for the ", {"type": "code", "text": ["pscale"]}, " attribute for the points.  The thickness value is based on the average\n        length of the edges connected to each point, scaled by the ", {"type": "ui", "text": ["Edge Length Scale"]}, " parameter.  This setting\n        is better for geometry of varying resolution, but generally gives non-uniform thickness values."], "extent": [12666, 13007]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "thickness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edge Length Scale"], "extent": [13007, 13026], "body": [{"type": "para", "indent": 4, "text": ["Each edge length will be scaled by this value before being used in the ", {"type": "ui", "text": ["Thickness"]}, " calculation."], "extent": [13051, 13154]}], "container": true, "attrs": {"id": "thicknessscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualize Thickness"], "extent": [13154, 13175], "body": [{"type": "para", "indent": 4, "text": ["Visualize the thickness of each point with a sphere."], "extent": [13198, 13256]}], "container": true, "attrs": {"id": "vizthickness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Define Pieces"], "extent": [13256, 13271], "body": [{"type": "para", "indent": 4, "text": ["Pressure constraints split the object into disjoint pieces to compute and\n    enforce the volume. Mass and Thickness calculations, and Glue and Strut constraints\n    also need a way to define separate pieces."], "extent": [13291, 13505]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["From Attribute"], "extent": [13505, 13525], "body": [{"type": "para", "indent": 8, "text": ["This integer or string attribute\u2019s unique values are used to define each piece."], "extent": [13525, 13614]}], "container": true}, {"type": "dt", "indent": 4, "text": ["From Connectivity"], "extent": [13614, 13637], "body": [{"type": "para", "indent": 8, "text": ["Connectivity of the input geometry is used to define the pieces."], "extent": [13637, 13712]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "piecemode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Piece Attrib"], "extent": [13712, 13726], "body": [{"type": "para", "indent": 4, "text": ["Distinct values of this integer or string attribute will be used to define\n    different pieces.  This can either be a point or a primitive attribute."], "extent": [13748, 13904]}], "container": true, "attrs": {"id": "pieceattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Layer"], "extent": [13904, 13911], "body": [{"type": "para", "indent": 4, "text": ["The points will be given this as their ", {"type": "code", "text": ["layer"]}, " attribute, useful\n    in cloth simulations to define a stacking order for Layer Shock."], "extent": [13927, 14066]}], "container": true, "attrs": {"id": "layer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compute Missing Orientation"], "extent": [14066, 14095], "body": [{"type": "para", "indent": 4, "text": ["For deforming hair geometry as input, the Vellum Solver requires an\n    ", {"type": "code", "text": ["orient"]}, " attribute that provides a stable rotation basis over time.  This\n    attribute can be created with the ", {"scheme": "Node", "value": "/nodes/sop/guidedeform", "type": "link", "text": ["Guide Deform SOP"], "fullpath": "/nodes/sop/guidedeform"}, "\n    using rest and animated skin, or if this parameter is enabled and ", {"type": "code", "text": ["orient"]}, " is\n    missing, Vellum Constraints will calculate it by extracting a\n    per-hair transform relative to the specified ", {"type": "ui", "text": ["Rest Orientation Frame"]}, "."], "extent": [14119, 14573]}], "container": true, "attrs": {"id": "computeorient"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Orientation Frame"], "extent": [14573, 14597], "body": [{"type": "para", "indent": 4, "text": ["The reference frame used when computing hair orientations if\n    ", {"type": "ui", "text": ["Compute Missing Orientation"]}, " is enabled.  This should usually be set\n    to the start frame of the simulation."], "extent": [14619, 14803]}], "container": true, "attrs": {"id": "orientframe"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Show Guide Geometry"], "extent": [14803, 14824], "body": [{"type": "para", "indent": 4, "text": ["The newly generated constraints are displayed as guide geometry,\n    which is useful to ensure points are connected in the order expected.\n    However, the guide display can become quite complex when many constraints\n    are created, especially when trying to select Vellum geometry in the\n    viewport in downstream nodes. This parameter allows hiding the guide\n    geometry if necessary."], "extent": [14844, 15240]}], "container": true, "attrs": {"id": "showguide"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Target Geometry"], "extent": [15240, 15262], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Target Group Type"], "extent": [15262, 15282], "body": [{"type": "para", "indent": 4, "text": ["The type of group for the constraint targets."], "extent": [15308, 15359]}], "container": true, "attrs": {"id": "targetgrouptype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Group"], "extent": [15359, 15373], "body": [{"type": "para", "indent": 4, "text": ["The target group.  This group specifies the second half of\n    ", {"type": "ui", "text": ["Attach to Geometry"]}, " and ", {"type": "ui", "text": ["Stitch"]}, " constraints."], "extent": [15395, 15514]}], "container": true, "attrs": {"id": "targetgroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Path"], "extent": [15514, 15527], "body": [{"type": "para", "indent": 4, "text": ["For Attach to Geometry constraints, the SOP attached to the third\n    input will be read at solve time to get the current animation data.\n    Specifying a path here will override that. This is useful if a different\n    animation is desired at solve time than capture time."], "extent": [15548, 15826]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [15826, 15836], "body": [{"type": "para", "indent": 8, "text": ["This is the path to override the animation with, and does not affect the actual capturing. Capturing is always done with the third input."], "extent": [15836, 15983]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "targetpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attach Frame"], "extent": [15983, 15997], "body": [{"type": "para", "indent": 4, "text": ["Controls which frame of the third input is used for attaching the\n    geometry."], "extent": [16019, 16104]}], "container": true, "attrs": {"id": "attachframe"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Drag"], "extent": [16104, 16115], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Normal Drag"], "extent": [16115, 16129], "body": [{"type": "para", "indent": 4, "text": ["Creates the ", {"type": "code", "text": ["dragnormal"]}, " attribute and sets it to this value.  This\n    scales the drag of the point when wind forces are applied to it\n    in the normal direction of its surface, or perpendicular to the\n    curve."], "extent": [16150, 16370]}, {"type": "para", "indent": 4, "text": ["Differing normal and tangent drag is essential for flapping flags."], "extent": [16370, 16442]}], "container": true, "attrs": {"id": "dragnormal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tangent Drag"], "extent": [16442, 16456], "body": [{"type": "para", "indent": 4, "text": ["Creates the ", {"type": "code", "text": ["dragtangent"]}, " attribute and sets it to this value.\n    This scales the drag of the point when wind forces are applied to it\n    in the tangent direction of its surface, or tangent to the curve."], "extent": [16478, 16689]}], "container": true, "attrs": {"id": "dragtangent"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Pin to Animation"], "extent": [16689, 16712], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Pin Points"], "extent": [16712, 16725], "body": [{"type": "para", "indent": 4, "text": ["Points to pin to the target animation.  Usually the target animation is\n    the first input of the Vellum solver, but it can be overridden on\n    the ", {"scheme": "Node", "value": "/nodes/sop/vellumsolver", "type": "link", "text": ["Vellum Solver"], "fullpath": "/nodes/sop/vellumsolver"}, " SOP or with the ", {"scheme": "Node", "value": "/nodes/dop/vellumsource", "type": "link", "text": ["Vellum Source"], "fullpath": "/nodes/dop/vellumsource"}, "\n    DOP."], "extent": [16744, 17000]}], "container": true, "attrs": {"id": "pingroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pin Type"], "extent": [17000, 17010], "body": [{"type": "para", "indent": 4, "text": ["How to pin the point position to the target animation."], "extent": [17028, 17088]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Permanent"], "extent": [17088, 17103], "body": [{"type": "para", "indent": 8, "text": ["The ", {"type": "code", "text": ["mass"]}, " attribute is set to zero, making the point a hard constraint.  However, as no original value of ", {"type": "code", "text": ["mass"]}, " is stored, it isn\u2019t possible to release this constraint later."], "extent": [17103, 17289]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stopped"], "extent": [17289, 17302], "body": [{"type": "para", "indent": 8, "text": ["The ", {"type": "code", "text": ["stopped"]}, " attribute is set to ", {"type": "code", "text": ["1"]}, " to make the point a hard constraint.  ", {"type": "code", "text": ["mass"]}, " is unaffected so a POP operation can restore the dynamics of the point later by resetting ", {"type": "code", "text": ["stopped"]}, " to ", {"type": "code", "text": ["0"]}, "."], "extent": [17302, 17502]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Soft"], "extent": [17502, 17512], "body": [{"type": "para", "indent": 8, "text": ["A zero length distance constraint is made between the point and its target location.  The Stretch ", {"type": "ui", "text": ["Stiffness"]}, " and ", {"type": "ui", "text": ["Damping Ratio"]}, " values are used for this constraint."], "extent": [17512, 17693]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pintype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Orientation Pin Type"], "extent": [17693, 17715], "body": [{"type": "para", "indent": 4, "text": ["In addition to holding the location of a point, for hair the orientation\n    often may also be constrained."], "extent": [17737, 17850]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [17850, 17860], "body": [{"type": "para", "indent": 12, "text": ["This constrains the orientation of the out-going line segments of the hair.  So orientation-pinning the tip of a hair will not affect the angle of the incoming hair."], "extent": [17860, 18039]}], "container": true}], "container": true, "role": "item_group"}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [18039, 18049], "body": [{"type": "para", "indent": 8, "text": ["Do not constrain the orientation to the target animation."], "extent": [18049, 18116]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Same as Position"], "extent": [18116, 18138], "body": [{"type": "para", "indent": 8, "text": ["Use the position constraint rules.  In case of Stopped, the ", {"type": "code", "text": ["stopped"]}, "\n        attribute is set to 3 to reflect both types of update are suppressed."], "extent": [18138, 18295]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Soft"], "extent": [18295, 18305], "body": [{"type": "para", "indent": 8, "text": ["Add a bend/twist constraint to maintain the orientation of the pinned point to that of the target animation.  The Bend ", {"type": "ui", "text": ["Stiffness"]}, " and ", {"type": "ui", "text": ["Damping Ratio"]}, " values are used for this constraint."], "extent": [18305, 18507]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pinrotation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Match Animation"], "extent": [18507, 18524], "body": [{"type": "para", "indent": 4, "text": ["Controls if the target is updated from the animation during the solver or if only the initial\n    value is used."], "extent": [18549, 18668]}], "container": true, "attrs": {"id": "matchanimation"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Closest Point"], "extent": [18668, 18688], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Constrain to Closest Point"], "extent": [18688, 18717], "body": [{"type": "para", "indent": 4, "text": ["When finding a matching point to a source point, do not go through\n    the target points in order, but pick the point that is closest first."], "extent": [18740, 18887]}], "container": true, "attrs": {"id": "useclosestpt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Closest Location on Primitive"], "extent": [18887, 18922], "body": [{"type": "para", "indent": 4, "text": ["For ", {"type": "ui", "text": ["Attach to Geometry"]}, " and ", {"type": "ui", "text": ["Stitch Points"]}, " constraints, do not just choose the closest point,\n    but the closest position on a primitive.  The primitive number and\n    barycentric coordinates are then stored.  For ", {"type": "ui", "text": ["Stitch Points"]}, " constraints, only polylines, triangles, and\n    quads are supported as the ", {"type": "ui", "text": ["Target Geometry"]}, " for constraint generation when this option is enabled."], "extent": [18947, 19342]}], "container": true, "attrs": {"id": "useclosestprim"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Distance"], "extent": [19342, 19356], "body": [{"type": "para", "indent": 4, "text": ["Maximum distance to consider eligible for stitching points."], "extent": [19374, 19440]}], "container": true, "attrs": {"id": "maxdist"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sliding Rate"], "extent": [19440, 19454], "body": [{"type": "para", "indent": 4, "text": ["For ", {"type": "ui", "text": ["Attach to Geometry"]}, " and ", {"type": "ui", "text": ["Stitch Points"]}, " constraints, the attachment point of the constraint\n    will slide across the target surface at this rate, where 1 matches the constrained point\u2019s velocity.\n    This option only works to slide across primitives, so ", {"type": "ui", "text": ["Use Closest Location on Primitive"]}, " must\n    be enabled and the ", {"type": "ui", "text": ["Target Group Type"]}, " must be set to ", {"type": "ui", "text": ["Primitives"]}, ".  The method used for finding\n    the next closest sliding target can be set with the ", {"scheme": "Node", "value": "/nodes/dop/vellumsolver", "type": "link", "text": ["Vellum Solver\u2019s"], "fullpath": "/nodes/dop/vellumsolver"}, "\n    ", {"type": "ui", "text": ["Sliding Method"]}, " parameter."], "extent": [19476, 20024]}], "container": true, "attrs": {"id": "slidingrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sliding Attribute"], "extent": [20024, 20043], "body": [{"type": "para", "indent": 4, "text": ["A point attribute that scales the ", {"type": "ui", "text": ["Sliding Rate"]}, " when set to ", {"type": "ui", "text": ["Scale by Attribute"]}, ".  This attribute will\n    be applied according to the attribute ", {"type": "ui", "text": ["Promotion Method"]}, ", and will be stored on the constraint to be\n    applied during the simulation.  In this way the attachment point can slide across a painted surface, where the\n    painted attribute value controls the ", {"type": "ui", "text": ["Sliding Rate"]}, "."], "extent": [20067, 20462]}], "container": true, "attrs": {"id": "slidingattrib"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Glue Search"], "extent": [20462, 20480], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Cluster Attrib"], "extent": [20480, 20497], "body": [{"type": "para", "indent": 4, "text": ["While glue constraints are made between points of different pieces,\n    they will only be made between points of the same cluster.   If\n    the cluster value is -1, no gluing will be done."], "extent": [20526, 20720]}], "container": true, "attrs": {"id": "glue_clusterattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Search Dist"], "extent": [20720, 20737], "body": [{"type": "para", "indent": 4, "text": ["Minimum distance to look for eligible glue points."], "extent": [20762, 20819]}], "container": true, "attrs": {"id": "glue_minradius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Search Dist"], "extent": [20819, 20836], "body": [{"type": "para", "indent": 4, "text": ["Maximum distance to look for eligible glue points."], "extent": [20858, 20915]}], "container": true, "attrs": {"id": "glue_radius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Search Points"], "extent": [20915, 20934], "body": [{"type": "para", "indent": 4, "text": ["Maximum number of points to consider for eligible glue points."], "extent": [20955, 21023]}], "container": true, "attrs": {"id": "glue_numpt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Search Preference"], "extent": [21023, 21042], "body": [{"type": "para", "indent": 4, "text": ["The order in which points should be considered for eligible glue points."], "extent": [21068, 21146]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [21146, 21156], "body": [{"type": "para", "indent": 12, "text": ["You will likely need to increase the ", {"type": "ui", "text": ["Max Search Points"]}, " parameter\n            when setting this parameter to ", {"type": "ui", "text": ["Farthest"]}, ", as the internal search function\n            always returns nearest points first.  There must be sufficient points in the\n            search query to reach the farthest points as specified by the ", {"type": "ui", "text": ["Max Search Dist"]}, "\n            parameter."], "extent": [21156, 21533]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "glue_searchpref"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraints Per Point"], "extent": [21533, 21556], "body": [{"type": "para", "indent": 4, "text": ["Number of glue constraints to create for each point."], "extent": [21588, 21647]}], "container": true, "attrs": {"id": "glue_constraintsperpt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Detach Object Chance"], "extent": [21647, 21669], "body": [{"type": "para", "indent": 4, "text": ["Each piece has this chance to be marked ineligible for gluing\n    and receive and generate no glue constraints.  This allows\n    for stray hairs."], "extent": [21698, 21850]}], "container": true, "attrs": {"id": "glue_detach_chance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Detach Point Chance"], "extent": [21850, 21871], "body": [{"type": "para", "indent": 4, "text": ["Each pair of points has this chance to be being marked ineligible for gluing."], "extent": [21899, 21982]}], "container": true, "attrs": {"id": "glue_point_chance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Seed"], "extent": [21982, 21988], "body": [{"type": "para", "indent": 4, "text": ["Random seed used to generate the detach chances."], "extent": [22008, 22063]}], "container": true, "attrs": {"id": "glue_seed"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Strut Search"], "extent": [22063, 22082], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Max Strut Length"], "extent": [22082, 22101], "body": [{"type": "para", "indent": 4, "text": ["Maximum distance to create struts.   Must be large enough to cover the\n    diameter of the object, but avoiding extremely long struts can help\n    avoid artifacts."], "extent": [22124, 22294]}], "container": true, "attrs": {"id": "strut_maxlen"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Direction Attribute"], "extent": [22294, 22315], "body": [{"type": "para", "indent": 4, "text": ["Struts are created by sending a ray along the direction attribute in\n    search of the piece.  The default direction is to use the normal\n    of the surface."], "extent": [22341, 22504]}], "container": true, "attrs": {"id": "strut_dirattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Invert Normals"], "extent": [22504, 22520], "body": [{"type": "para", "indent": 4, "text": ["Invert the sense of the objects normals for sending rays, useful\n    if the incoming geometry has reversed normals."], "extent": [22549, 22670]}], "container": true, "attrs": {"id": "strut_invertnormal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Test Normals"], "extent": [22670, 22684], "body": [{"type": "para", "indent": 4, "text": ["Verify the goal of the strut has a normal suggesting it was properly\n    hit from the inside."], "extent": [22712, 22812]}], "container": true, "attrs": {"id": "strut_testnormals"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Direction Jitter"], "extent": [22812, 22830], "body": [{"type": "para", "indent": 4, "text": ["Jitter the direction the strut is sent in to break symmetry in\n    the struts."], "extent": [22853, 22937]}], "container": true, "attrs": {"id": "strut_jitter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraints Per Point"], "extent": [22937, 22960], "body": [{"type": "para", "indent": 4, "text": ["Maximum number of struts to add for each point."], "extent": [22993, 23047]}], "container": true, "attrs": {"id": "strut_constraintsperpt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Detach Point Chance"], "extent": [23047, 23068], "body": [{"type": "para", "indent": 4, "text": ["Chance of a point being marked ineligible for struts."], "extent": [23097, 23157]}], "container": true, "attrs": {"id": "strut_point_chance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Seed"], "extent": [23157, 23163], "body": [{"type": "para", "indent": 4, "text": ["Random seed to control the jitter and detach chances."], "extent": [23184, 23244]}], "container": true, "attrs": {"id": "strut_seed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ray Offset"], "extent": [23244, 23256], "body": [{"type": "para", "indent": 4, "text": ["The initial ray for the strut needs an offset to avoid hitting\n    the surface it was sent from."], "extent": [23279, 23382]}], "container": true, "attrs": {"id": "strut_rayoff"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Stretch"], "extent": [23382, 23396], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Stiffness"], "extent": [23396, 23408], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of the constraint, which controls how strongly the constraint\n    pulls particles back towards its initial rest state.  To dial in initial values,\n    change by factors of 10."], "extent": [23435, 23631]}], "container": true, "attrs": {"id": "stretchstiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness Attribute"], "extent": [23631, 23652], "body": [{"type": "para", "indent": 4, "text": ["Point attribute to scale the stiffness by."], "extent": [23685, 23733]}, {"type": "para", "indent": 4, "text": ["As effective changes in stiffness requires painting over orders of magnitude, this has\n    a logarithmic effect."], "extent": [23733, 23852]}], "container": true, "attrs": {"id": "stretchstiffnessattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [23852, 23859], "body": [{"type": "para", "indent": 4, "text": ["Single slider control over the stiffness."], "extent": [23891, 23938]}, {"type": "para", "indent": 4, "text": ["As effective changes in stiffness requires painting over orders of magnitude, this has\n    a logarithmic effect."], "extent": [23938, 24056]}], "container": true, "attrs": {"id": "stretchstiffnessscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Ratio"], "extent": [24056, 24071], "body": [{"type": "para", "indent": 4, "text": ["Stiff constraints tend to vibrate or jitter unacceptably.   Damping reduces this by bleeding energy when evaluating the constraint.  Too much damping can prevent the constraint from being satisfied, however.   Values less than 1 must be used."], "extent": [24101, 24350]}], "container": true, "attrs": {"id": "stretchdampingratio"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Attribute"], "extent": [24350, 24369], "body": [{"type": "para", "indent": 4, "text": ["Attribute to adjust damping, multiplied into the damping ratio."], "extent": [24400, 24470]}], "container": true, "attrs": {"id": "stretchdampingattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [24470, 24477], "body": [{"type": "para", "indent": 4, "text": ["Single slider to control damping, multiplied into the damping ratio."], "extent": [24507, 24582]}], "container": true, "attrs": {"id": "stretchdampingscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Length Scale"], "extent": [24582, 24601], "body": [{"type": "para", "indent": 4, "text": ["The rest length of the distance constraints will be the original distance\n    between the points.   This scale can be used to increase or decrease\n    this.   Setting to ", {"type": "code", "text": ["0"]}, " will try to collapse the points together."], "extent": [24628, 24850]}], "container": true, "attrs": {"id": "stretchrestscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compression Stiffness"], "extent": [24850, 24873], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of the constraint when being compressed below its initial rest\n    distance.  A very stiff low resolution cloth can become unbendable due to its\n    topology, rather than due to the bend constraints.  A network of triangles\n    has very few ways that it can bend if it is fully stiff.  By setting a\n    lower compression stiffness, the cloth is allowed to collapse and regain\n    its fluidity.  Usually this has to be raised with higher resolution cloth."], "extent": [24901, 25375]}], "container": true, "attrs": {"id": "compressstiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tangent Stiffness"], "extent": [25375, 25394], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of the constraint in the direction tangent to the target surface\n    for Attach to Geometry constraints.  Tangent stiffness can be useful to help hold up\n    pants or a belt that are attached to a body at the waist, for example."], "extent": [25421, 25669]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [25669, 25679], "body": [{"type": "para", "indent": 12, "text": ["Setting this parameter to a non-zero value creates an additional\n            constraint from the Vellum point to the line that intersects the closest\n            point on the target surface.  This constraint uses the same\n            Breaking, Plasticity, and Scaling settings as the primary Stretch\n            constraint."], "extent": [25679, 26016]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "tangentstiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness Dropoff"], "extent": [26016, 26035], "body": [{"type": "para", "indent": 4, "text": ["The distance from the rest length at which the stiffness of the constraint\n    decreases to zero, or increases from zero to full stiffness, depending on\n    the direction of the dropoff.  A ", {"type": "ui", "text": ["Decreasing"]}, " dropoff means that the\n    stiffness starts at full strength and decreases to zero at the Dropoff\n    distance from the rest length.  An ", {"type": "ui", "text": ["Increasing"]}, " dropoff means\n    the stiffness starts at zero and increases to full stiffness at the\n    specified distance from rest length. If ", {"type": "ui", "text": ["Min Stiffness"]}, " is enabled, its\n    value is used as the minimum stiffness in these calculations, rather than zero."], "extent": [26069, 26679]}, {"type": "para", "indent": 4, "text": ["Decreasing dropoff can be useful for creating glue constraints that lose\n    stiffness as they are stretched, decreasing to zero at the specified\n    distance.  Using the same distance in the breaking ", {"type": "ui", "text": ["Threshold"]}, " with a\n    ", {"type": "ui", "text": ["Break Type"]}, " of ", {"type": "ui", "text": ["Stretch Distance"]}, " will cause the constraints to be\n    removed at the same time they reduce to zero stiffness."], "extent": [26679, 27042]}], "container": true, "attrs": {"id": "stretchstiffnessdropoff"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Stiffness"], "extent": [27042, 27057], "body": [{"type": "para", "indent": 4, "text": ["If this checkbox is turned on, this value will be the minimum stiffness used when calculating the ", {"type": "ui", "text": ["Stiffness Dropoff"]}, "."], "extent": [27094, 27220]}], "container": true, "attrs": {"id": "stretchstiffnessdropoffmin"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Warp/Weft"], "extent": [27220, 27238], "body": [{"type": "para", "indent": 4, "text": ["Enables an adjustment to the stiffness based on orientation, allowing\n    a cloth network to stretch more on one axis than another."], "extent": [27266, 27404]}], "container": true, "attrs": {"id": "stretchanisotropy"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Anisotropy"], "extent": [27404, 27423], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Warp Scale"], "extent": [27423, 27436], "body": [{"type": "para", "indent": 4, "text": ["Scale factor for cloth lined up with the material u axis.   This is a logarithmic multiplier."], "extent": [27463, 27563]}], "container": true, "attrs": {"id": "stretchwarpscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Weft Scale"], "extent": [27563, 27575], "body": [{"type": "para", "indent": 4, "text": ["Scale factor for cloth lined up with the material v axis.   This is a logarithmic multiplier."], "extent": [27602, 27701]}], "container": true, "attrs": {"id": "stretchweftscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shear Scale"], "extent": [27701, 27714], "body": [{"type": "para", "indent": 4, "text": ["Scale factor for cloth lined up with the diagonal material uv axis.   This is a logarithmic multiplier."], "extent": [27742, 27851]}], "container": true, "attrs": {"id": "stretchshearscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Material UV"], "extent": [27851, 27864], "body": [{"type": "para", "indent": 4, "text": ["Point attribute to use to specify the coordinate frame for warp and weft computations."], "extent": [27885, 27977]}], "container": true, "attrs": {"id": "materialuv"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Blend"], "extent": [27977, 27993], "body": [{"type": "para", "indent": 4, "text": ["Constraints that attach to geometry or pin to the target can optionally\n    blend in the target\u2019s velocity.  This requires the target to have\n    a ", {"type": "code", "text": ["v"]}, " point attribute to provide the local velocity.  The blending\n    is done per 24th of a second, so a blend factor of 0.5 will mix in\n    50% of the target velocity in a standard frame."], "extent": [28019, 28360]}, {"type": "para", "indent": 4, "text": ["Blending in velocity will highly damp the simulation, but can be useful\n    to allow the cloth to anticipate motion, avoiding whiplashing from\n    sudden movements.   Zero stiffness attachment constraints can be used\n    to apply only velocity blending without any additional forces."], "extent": [28360, 28649]}], "container": true, "attrs": {"id": "stretchvelblend"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Plasticity"], "extent": [28649, 28668], "body": [{"type": "para", "indent": 4, "text": ["Plasticity allows an object to flow to a new rest position.  Under\n    sufficient stress, the rest coordinates are blended to the current dynamic\n    coordinates, so the object will retain its new shape."], "extent": [28696, 28906]}], "container": true, "attrs": {"id": "stretchplasticity"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Plasticity"], "extent": [28906, 28925], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Threshold"], "extent": [28925, 28937], "body": [{"type": "para", "indent": 4, "text": ["Below this threshold the material will return to its original shape.\n    When deformed past the threshold, it will begin to creep into\n    its new configuration."], "extent": [28971, 29139]}], "container": true, "attrs": {"id": "stretchplasticthreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Threshold Attribute"], "extent": [29139, 29160], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the stretch threshold by."], "extent": [29200, 29250]}], "container": true, "attrs": {"id": "stretchplasticthresholdattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [29250, 29257], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for the threshold."], "extent": [29296, 29341]}], "container": true, "attrs": {"id": "stretchplasticthresholdscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ratio of Current Rest Length"], "extent": [29341, 29371], "body": [{"type": "para", "indent": 4, "text": ["The threshold can either be an absolute distance, or be a percentage distance.   A value of 0.1 as a ratio would mean stretching of 110% of compression of 90% will trigger plastic flow."], "extent": [29410, 29602]}], "container": true, "attrs": {"id": "stretchplasticthresholdratio"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rate"], "extent": [29602, 29608], "body": [{"type": "para", "indent": 4, "text": ["The speed at which the material adopts its new rest lengths when\n    it begins to flow."], "extent": [29637, 29730]}], "container": true, "attrs": {"id": "stretchplasticrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rate Attribute"], "extent": [29730, 29746], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the plastic rate by."], "extent": [29781, 29826]}], "container": true, "attrs": {"id": "stretchplasticrateattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [29826, 29833], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for the plastic rate."], "extent": [29867, 29914]}], "container": true, "attrs": {"id": "stretchplasticratescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hardening"], "extent": [29914, 29925], "body": [{"type": "para", "indent": 4, "text": ["Some plastic materials become stiffer after they've undergone deformation. These will have a hardening greater than 1.  Some become softer so will have hardening less than 1. This is a logarithmic multiplier on stiffness."], "extent": [29959, 30186]}], "container": true, "attrs": {"id": "stretchplastichardening"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hardening Attribute"], "extent": [30186, 30207], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the plastic hardening by."], "extent": [30247, 30297]}], "container": true, "attrs": {"id": "stretchplastichardeningattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [30297, 30304], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for plastic hardening."], "extent": [30343, 30392]}], "container": true, "attrs": {"id": "stretchplastichardeningscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Group"], "extent": [30392, 30406], "body": [{"type": "para", "indent": 4, "text": ["The generated stretch constraints are all added to this primitive group.  This is useful to edit them later with a ", {"scheme": "Node", "value": "/nodes/dop/vellumconstraintproperty", "type": "link", "text": ["Vellum Constraint Property"], "fullpath": "/nodes/dop/vellumconstraintproperty"}, " DOP."], "extent": [30427, 30616]}], "container": true, "attrs": {"id": "stretchgrp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Unique within Output Group"], "extent": [30616, 30649], "body": [{"type": "para", "indent": 4, "text": ["Ensures that a particular point can only be constrained once by the constraints in the ", {"type": "ui", "text": ["Output Group"]}, ".  When dynamically creating constraints it can be common to re-create constraints between the same points every frame.  Keeping the points unique within the output group prevents a constant accumulation of constraints."], "extent": [30677, 31005]}], "container": true, "attrs": {"id": "keepuniquestretch"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bend"], "extent": [31005, 31016], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Add Bend across Welds"], "extent": [31016, 31040], "body": [{"type": "para", "indent": 4, "text": ["When welding points together, two outside edges may become an inside edge.\n    If they do not gain any bend constraints the seam will be weak and\n    noticeably fold or kink.  This option generates bend constraints where\n    this is detected."], "extent": [31059, 31308]}], "container": true, "attrs": {"id": "bendweld"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Copy Neighboring Stiffness"], "extent": [31308, 31336], "body": [{"type": "para", "indent": 4, "text": ["The value of the generated bend constraints can be copied from the bend\n    of surrounding triangles, ensuring a consistent piece of cloth is\n    built without having to channel link parameters."], "extent": [31364, 31565]}], "container": true, "attrs": {"id": "bendcopystiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness"], "extent": [31565, 31576], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of bend constraints.  To dial in initial values,\n    change by factors of 10."], "extent": [31600, 31697]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [31697, 31707], "body": [{"type": "para", "indent": 8, "text": ["Bend constraints are based on angle differences, so higher resolution cloths will require higher stiffness to exhibit similar radii of curvature."], "extent": [31707, 31862]}], "container": true}, {"type": "note", "indent": 4, "role": "item", "extent": [31862, 31872], "body": [{"type": "para", "indent": 8, "text": ["Very high bend stiffness on high resolution models will require a very large number of iterations to converge."], "extent": [31872, 31992]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "bendstiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness Attribute"], "extent": [31992, 32013], "body": [{"type": "para", "indent": 4, "text": ["Point attribute to scale the stiffness by."], "extent": [32043, 32091]}, {"type": "para", "indent": 4, "text": ["As effective changes in stiffness requires painting over orders of magnitude, this has\n    a logarithmic effect."], "extent": [32091, 32210]}], "container": true, "attrs": {"id": "bendstiffnessattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [32210, 32217], "body": [{"type": "para", "indent": 4, "text": ["Single slider control over the stiffness."], "extent": [32246, 32293]}, {"type": "para", "indent": 4, "text": ["As effective changes in stiffness requires painting over orders of magnitude, this has\n    a logarithmic effect."], "extent": [32293, 32412]}], "container": true, "attrs": {"id": "bendstiffnessscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Ratio"], "extent": [32412, 32427], "body": [{"type": "para", "indent": 4, "text": ["Stiff constraints tend to vibrate or jitter unacceptably.   Damping reduces this by bleeding energy when evaluating the constraint.  Too much damping can prevent the constraint from being satisfied, however.   Values less than 1 should be used."], "extent": [32454, 32704]}], "container": true, "attrs": {"id": "benddampingratio"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Attribute"], "extent": [32704, 32723], "body": [{"type": "para", "indent": 4, "text": ["Attribute to adjust damping, multiplied into the damping ratio."], "extent": [32751, 32820]}], "container": true, "attrs": {"id": "benddampingattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [32820, 32827], "body": [{"type": "para", "indent": 4, "text": ["Single slider to control damping, multiplied into the damping ratio."], "extent": [32854, 32928]}], "container": true, "attrs": {"id": "benddampingscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Angle Scale"], "extent": [32928, 32946], "body": [{"type": "para", "indent": 4, "text": ["The rest angle of the bend constraints will be the original dihedral\n    angle between the triangles.   This scale can be used to increase or\n    decrease this.   Setting to ", {"type": "code", "text": ["0"]}, " will treat the original configuration as a\n    flat sheet."], "extent": [32970, 33212]}], "container": true, "attrs": {"id": "bendrestscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness Dropoff"], "extent": [33212, 33231], "body": [{"type": "para", "indent": 4, "text": ["The number of degrees away from the rest angle at which the stiffness of\n    the constraint decreases to zero, or increases from zero to full stiffness, depending on\n    the direction of the dropoff.  A ", {"type": "ui", "text": ["Decreasing"]}, " dropoff means that the\n    stiffness starts at full strength and decreases to zero at the Dropoff\n    degrees from the rest angle.  An ", {"type": "ui", "text": ["Increasing"]}, " dropoff means the stiffness\n    starts at zero and increases to full stiffness at the specified degrees away\n    from rest angle. If ", {"type": "ui", "text": ["Min Stiffness"]}, " is enabled, its value is used as the\n    minimum stiffness in these calculations, rather than zero."], "extent": [33262, 33886]}, {"type": "para", "indent": 4, "text": ["A small amount of ", {"type": "ui", "text": ["Increasing"]}, " dropoff can be useful with cloth to make it buckle\n    from a flat state very easily, adding additional wrinkling without changing the overall\n    bend stiffness and look of the cloth too significantly. Decreasing dropoff can be useful\n    for making stretchy glue constraints that weaken right before breaking without snapping back."], "extent": [33886, 34258]}], "container": true, "attrs": {"id": "bendstiffnessdropoff"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Stiffness"], "extent": [34258, 34273], "body": [{"type": "para", "indent": 4, "text": ["If enabled, the minimum stiffness value when calculating ", {"type": "ui", "text": ["Stiffness Dropoff"]}, "."], "extent": [34307, 34392]}], "container": true, "attrs": {"id": "bendstiffnessdropoffmin"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Branch Angle"], "extent": [34392, 34410], "body": [{"type": "para", "indent": 4, "text": ["When adding torsion-free string bend constraints, they work best when\n    the rest angle is close to straight.  Setting the max branch angle allows\n    something like a net of ropes to only have the bend constraints along\n    the straight ropes, not on the perpendicular sections."], "extent": [34435, 34722]}], "container": true, "attrs": {"id": "maxbranchangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Plasticity"], "extent": [34722, 34741], "body": [{"type": "para", "indent": 4, "text": ["Plasticity allows an object to flow to a new rest position.  Under\n    sufficient stress, the rest coordinates are blended to the current dynamic\n    coordinates, so the object will retain its new shape."], "extent": [34766, 34975]}], "container": true, "attrs": {"id": "bendplasticity"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Plasticity"], "extent": [34975, 34994], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Threshold"], "extent": [34994, 35006], "body": [{"type": "para", "indent": 4, "text": ["Below this threshold the material will return to its original shape.\n    When deformed past the threshold, it will begin to creep into\n    its new configuration."], "extent": [35037, 35204]}, {"type": "para", "indent": 4, "text": ["This is an absolute angle measurement.  Because rest angles are often\n    flat, the idea of a ratio that exists for stretch constraints does not\n    apply to bend constraints."], "extent": [35204, 35385]}], "container": true, "attrs": {"id": "bendplasticthreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Threshold Attribute"], "extent": [35385, 35406], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the bend threshold by."], "extent": [35443, 35490]}], "container": true, "attrs": {"id": "bendplasticthresholdattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [35490, 35497], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for the threshold."], "extent": [35533, 35577]}], "container": true, "attrs": {"id": "bendplasticthresholdscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rate"], "extent": [35577, 35583], "body": [{"type": "para", "indent": 4, "text": ["The speed at which the material adopts its new rest angles when\n    it begins to flow."], "extent": [35609, 35701]}], "container": true, "attrs": {"id": "bendplasticrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rate Attribute"], "extent": [35701, 35717], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the plastic rate by."], "extent": [35749, 35794]}], "container": true, "attrs": {"id": "bendplasticrateattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [35794, 35801], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for the plastic rate."], "extent": [35832, 35879]}], "container": true, "attrs": {"id": "bendplasticratescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hardening"], "extent": [35879, 35890], "body": [{"type": "para", "indent": 4, "text": ["Some plastic materials become stiffer after they've undergone deformation. These will have a hardening greater than 1.  Some become softer so will have hardening less than 1."], "extent": [35921, 36101]}], "container": true, "attrs": {"id": "bendplastichardening"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Hardening Attribute"], "extent": [36101, 36122], "body": [{"type": "para", "indent": 4, "text": ["Attribute to scale the plastic hardening by."], "extent": [36159, 36209]}], "container": true, "attrs": {"id": "bendplastichardeningattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [36209, 36216], "body": [{"type": "para", "indent": 4, "text": ["Single scale slider for plastic hardening."], "extent": [36252, 36300]}], "container": true, "attrs": {"id": "bendplastichardeningscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Group"], "extent": [36300, 36314], "body": [{"type": "para", "indent": 4, "text": ["The generated stretch constraints are all added to this primitive group.  This is useful to edit them later with a ", {"scheme": "Node", "value": "/nodes/dop/vellumconstraintproperty", "type": "link", "text": ["Vellum Constraint Property"], "fullpath": "/nodes/dop/vellumconstraintproperty"}, " DOP."], "extent": [36332, 36520]}], "container": true, "attrs": {"id": "bendgrp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Unique within Output Group"], "extent": [36520, 36553], "body": [{"type": "para", "indent": 4, "text": ["Ensures that a particular point can only be constrained once by the constraints in the ", {"type": "ui", "text": ["Output Group"]}, ".  When dynamically creating constraints it can be common to re-create constraints between the same points every frame.  Keeping the points unique within the output group prevents a constant accumulation of constraints."], "extent": [36578, 36906]}], "container": true, "attrs": {"id": "keepuniquebend"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Breaking"], "extent": [36906, 36921], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Breaking"], "extent": [36921, 36939], "body": [{"type": "para", "indent": 4, "text": ["Constraint primitives can be removed by the solver when sufficient deformation or stress is applied, effectively breaking those constraints.   You can also manually break constraints by deleting them during the solve to gain full control of the timing."], "extent": [36960, 37218]}, {"type": "para", "indent": 4, "text": ["Running the simulation first with visualization enabled can be useful to find what are good values for the thresholds."], "extent": [37218, 37343]}], "container": true, "attrs": {"id": "dobreaking"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Threshold"], "extent": [37343, 37354], "body": [{"type": "para", "indent": 4, "text": ["The amount of stress or displacement on a constraint to trigger a break."], "extent": [37379, 37458]}], "container": true, "attrs": {"id": "breakthreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Threshold Attribute"], "extent": [37458, 37479], "body": [{"type": "para", "indent": 4, "text": ["Point attribute to scale the threshold by."], "extent": [37506, 37555]}], "container": true, "attrs": {"id": "breakscaleattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [37555, 37562], "body": [{"type": "para", "indent": 4, "text": ["Single slider to scale the threshold."], "extent": [37583, 37627]}], "container": true, "attrs": {"id": "breakscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Type"], "extent": [37627, 37633], "body": [{"type": "para", "indent": 4, "text": ["This controls how the solver decides to break weld and hair constraints."], "extent": [37656, 37734]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [37734, 37744], "body": [{"type": "para", "indent": 8, "text": ["No automated tests are performed."], "extent": [37744, 37787]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Stress"], "extent": [37787, 37807], "body": [{"type": "para", "indent": 8, "text": ["The stretch stress must exceed the threshold."], "extent": [37807, 37862]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Stress"], "extent": [37862, 37879], "body": [{"type": "para", "indent": 8, "text": ["The bend stress must exceed the threshold."], "extent": [37879, 37931]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Distance"], "extent": [37931, 37953], "body": [{"type": "para", "indent": 8, "text": ["The total distance from the goal location and the current location must exceed the threshold."], "extent": [37953, 38056]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Ratio"], "extent": [38056, 38075], "body": [{"type": "para", "indent": 8, "text": ["The ratio between the current distance and the rest distance must exceed the threshold."], "extent": [38075, 38172]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Angle"], "extent": [38172, 38188], "body": [{"type": "para", "indent": 8, "text": ["The difference between the current angle and the rest angle must exceed the threshold.  This value is specified in degrees."], "extent": [38188, 38322]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "breaktypeall"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Type"], "extent": [38322, 38328], "body": [{"type": "para", "indent": 4, "text": ["This controls how the solver decides to break distance constraints."], "extent": [38355, 38428]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [38428, 38438], "body": [{"type": "para", "indent": 8, "text": ["No automated tests are performed."], "extent": [38438, 38481]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Stress"], "extent": [38481, 38501], "body": [{"type": "para", "indent": 8, "text": ["The stretch stress must exceed the threshold."], "extent": [38501, 38556]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Distance"], "extent": [38556, 38578], "body": [{"type": "para", "indent": 8, "text": ["The total distance from the goal location and the current location must exceed the threshold."], "extent": [38578, 38681]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Ratio"], "extent": [38681, 38700], "body": [{"type": "para", "indent": 8, "text": ["The ratio between the current distance and the rest distance must exceed the threshold."], "extent": [38700, 38798]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "breaktypestretch"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Attributes"], "extent": [38798, 38815], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Promotion Method"], "extent": [38815, 38834], "body": [{"type": "para", "indent": 4, "text": ["The scale-by-attribute functions have to apply the possible different scale attribute values on the points involved in the constraint to a single constraint.  This controls how they are blended together."], "extent": [38858, 39067]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Maximum"], "extent": [39067, 39080], "body": [{"type": "para", "indent": 8, "text": ["The maximum scale factor is used."], "extent": [39080, 39123]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Minimum"], "extent": [39123, 39136], "body": [{"type": "para", "indent": 8, "text": ["The minimum scale factor is used."], "extent": [39136, 39179]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Average"], "extent": [39179, 39192], "body": [{"type": "para", "indent": 8, "text": ["The average of the points scale factors is used."], "extent": [39192, 39250]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Multiply"], "extent": [39250, 39264], "body": [{"type": "para", "indent": 8, "text": ["The scale factors are all multiplied together."], "extent": [39264, 39320]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Use Source"], "extent": [39320, 39336], "body": [{"type": "para", "indent": 8, "text": ["The source points scale factor is used, such as in a stitch constraint."], "extent": [39336, 39417]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Use Target"], "extent": [39417, 39433], "body": [{"type": "para", "indent": 8, "text": ["The target points scale factor is used, such as in a stitch constraint."], "extent": [39433, 39514]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "attribpromote"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tag"], "extent": [39514, 39519], "body": [{"type": "para", "indent": 4, "text": ["A string stored in the ", {"type": "code", "text": ["constraint_tag"]}, " primitive attribute for all constraints created by this node. This tag can be used in the ", {"type": "ui", "text": ["Constraint Group"]}, " parameter on the ", {"scheme": "Node", "value": "/nodes/sop/vellumconstraintproperty", "type": "link", "text": ["Vellum Constraint Property SOP"], "fullpath": "/nodes/sop/vellumconstraintproperty"}, " to easily to alter specific constraints."], "extent": [39533, 39814]}], "container": true, "attrs": {"id": "tag"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Static Topology"], "extent": [39814, 39831], "body": [{"type": "para", "indent": 4, "text": ["Specify that the constraints created by this node will remain static, i.e. will not slide or be broken, removed, or welded.  This specifcation allows the solver to make optimizations when graph coloring; therefore it is most effective when a simulation has dynamic constraints that require frequent graph re-coloring.  A common example is static, dense tetrahedral meshes that are connected together with sliding ", {"type": "ui", "text": ["Stitch"]}, " constraints, as in a muscle simulation.  The sliding constraints require the solver to re-color the constraint graph frequently, which is expensive for dense tetrahedra.  By specifying the ", {"type": "ui", "text": ["Tetrahedral Stretch"]}, " constraints as ", {"type": "ui", "text": ["Static Topology"]}, ", the solver can skip re-coloring them.  Note that enabling this option will add a ", {"type": "code", "text": ["color"]}, " attribute to all constraint primitives."], "extent": [39856, 40663]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [40663, 40673], "body": [{"type": "para", "indent": 8, "text": ["Enabling ", {"type": "ui", "text": ["Static Topology"]}, " simply adds the output constraint primitives to a specially named ", {"type": "code", "text": ["__static__"]}, " primitive group.  Advanced users can add the constraint primitives to this group manually with a ", {"scheme": "Node", "value": "/nodes/sop/groupcreate", "type": "link", "text": ["Group Create"], "fullpath": "/nodes/sop/groupcreate"}, " SOP, rather than enabling the ", {"type": "ui", "text": ["Static Topology"]}, " parameter on multiple nodes."], "extent": [40673, 41002]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "statictopology"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [41002, 41011], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumsolver", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumsolver"}], "extent": [41011, 41041]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumpostprocess", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumpostprocess"}], "extent": [41041, 41076]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumdrape", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumdrape"}], "extent": [41076, 41105]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumconstraints_grain", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumconstraints_grain"}], "extent": [41105, 41146]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumio", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumio"}], "extent": [41146, 41174]}], "container": true}], "text": "Related"}], "title": ["Vellum Constraints"], "summary": ["Configure constraints on geometry for the Vellum solvers."]}