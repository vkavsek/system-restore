{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "volumevop", "icon": "SOP/volumevop", "tags": "volumes, merge", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Volume VOP"], "extent": [92, 107]}, {"type": "summary", "indent": 0, "text": ["Runs CVEX on a set of volume primitives."], "extent": [107, 156]}, {"type": "para", "indent": 0, "text": ["The Volume VOP operation runs CVEX over a set of volume\nprimitives.  The CVEX shader can be defined as a .vfl file, a Shop, or\nby building a CVEX VOP network inside this node.  The last is the most\nstraightforward approach."], "extent": [156, 381]}, {"type": "para", "indent": 0, "text": ["Binding to the CVEX script controls what values are passed to which\nparameters of the script.  The default AutoBind will look at the name\nattribute of the volumes to determine which parameter they should\noverride.  If that parameter is marked as exported in the CVEX script,\nthe volume will be written to.  Otherwise, the volume is just read to\nget the parameter\u2019s values.  If a name attribute is not present, the\nfirst volume is bound to the ", {"type": "q", "text": ["density"]}, " parameter which is provided in\nthe default output and global parameters."], "extent": [381, 908]}, {"type": "para", "indent": 0, "text": ["The CVEX script is applied once for each exported volume primitive.\nLocally defined ", {"type": "code", "text": ["ix"]}, ", ", {"type": "code", "text": ["iy"]}, ", ", {"type": "code", "text": ["iz"]}, ", ", {"type": "code", "text": ["resx"]}, ", ", {"type": "code", "text": ["resy"]}, ", ", {"type": "code", "text": ["resz"]}, ", ", {"type": "code", "text": ["orig"]}, ", and ", {"type": "code", "text": ["P"]}, " bindings are\ncreated that refer to the index, resolution, center, and current voxel\nposition of the currently exported primitive."], "extent": [908, 1181]}, {"type": "para", "indent": 0, "text": ["The parameters list starts with parameters created by the CVEX\nscript\u2019s parameters.  If the parameter is meant only to be bound to a\nvolume, it can be hidden by setting the invisible flag on the VOP\nparameter."], "extent": [1181, 1392]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Adding user-defined colors to volumes"], "extent": [1392, 1436], "body": [{"type": "para", "indent": 0, "text": ["You can only have one volume per attribute, which means you need three volumes to represent r, g, and b in the render. Then you can process each volume individually, all together as a single Volume VOP network, or use the ", {"scheme": "Node", "value": "/nodes/sop/volumemix", "type": "link", "text": ["Volume Mix SOP"], "fullpath": "/nodes/sop/volumemix"}, " in user mode and modify ", {"type": "code", "text": ["$V"]}, " which is the voxel value at the current sample voxel point."], "extent": [1436, 1785]}, {"type": "para", "indent": 0, "text": ["Pay close attention to what is happening in the Volume VOP. You index in to the various volumes via a ", {"scheme": "Node", "value": "/nodes/vop/bind", "type": "link", "text": ["Bind VOP"], "fullpath": "/nodes/vop/bind"}, " set up to the exact same name as the name attribute present with the associated volume primitive. To export it back out, you need the same named parameter in a Bind Export VOP."], "extent": [1785, 2090]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2090, 2102], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Vex Setup"], "extent": [2102, 2119], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Vex Source"], "extent": [2119, 2140], "body": [{"type": "para", "indent": 16, "text": ["Where to get the CVEX script from.  Myself will refer to the VOP network built inside this node.  SHOP will use the ", {"type": "ui", "text": ["Shop Path"]}, " and ", {"type": "ui", "text": ["Script"]}, " will load the .vex file specified in the script."], "extent": [2140, 2351]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Shop Path"], "extent": [2351, 2370], "body": [{"type": "para", "indent": 16, "text": ["The CVEX Shop to apply."], "extent": [2370, 2411]}, {"type": "para", "indent": 16, "text": ["This can also point to any node that contains a CVEX VOP Network."], "extent": [2411, 2506]}, {"type": "note_group", "body": [{"type": "note", "indent": 16, "role": "item", "extent": [2506, 2528], "body": [{"type": "para", "indent": 24, "text": ["Referenced nodes parameters will be used."], "extent": [2528, 2595]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Script"], "extent": [2595, 2611], "body": [{"type": "para", "indent": 12, "text": ["The CVEX script to apply."], "extent": [2611, 2650]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Re-load VEX Functions"], "extent": [2650, 2681], "body": [{"type": "para", "indent": 12, "text": ["When in script mode, this reloads any .vex files to\n            account for updates made outside of Houdini."], "extent": [2681, 2803]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Compiler"], "extent": [2803, 2821], "body": [{"type": "para", "indent": 12, "text": ["The command line used by VOPs to compile the inside of\n            this node."], "extent": [2821, 2912]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Force Compile"], "extent": [2912, 2935], "body": [{"type": "para", "indent": 12, "text": ["Trigger a recompile of the VOP network."], "extent": [2935, 2988]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Evaluation Node Path"], "extent": [2988, 3018], "body": [{"type": "para", "indent": 12, "text": ["VEX functions like ", {"type": "code", "text": ["ch()"]}, " usually evaluate with respect to this node.\n            Providing a path here can override where the path search starts\n            from.  This is useful for embedding in a digital asset where you\n            would like the top level digital asset to be the search root."], "extent": [3018, 3328]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Export Parameters"], "extent": [3328, 3355], "body": [{"type": "para", "indent": 12, "text": ["This pattern can be used to override\n            the export option on the VEX shader to avoid writing to \n            certain volumes.  The pattern matches the VEX parameter, not\n            the bound volume.  The volume will still be bound for reading."], "extent": [3355, 3622]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Enable Multithreading"], "extent": [3622, 3653], "body": [{"type": "para", "indent": 12, "text": ["There should be no threading issues with VEX.  In the unlikely\n            event that there are, this will allow you to determine which\n            node is guilty, and work around it without turning off threading\n            on a global scale."], "extent": [3653, 3910]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Prune VDB Blocks"], "extent": [3910, 3936], "body": [{"type": "para", "indent": 12, "text": ["Reduce the memory footprint of output VDBs that have sufficiently\n            large regions of voxels with the same value."], "extent": [3936, 4072]}, {"type": "para", "indent": 12, "text": ["In general, you should leave this option on. Expert users may want\n            to turn this off based on very specific situations. For example, if\n            you know that pruning empty voxels is a waste of time since a later\n            operation will reactivate many of them."], "extent": [4072, 4364]}, {"type": "note_group", "body": [{"type": "note", "indent": 12, "role": "item", "extent": [4364, 4382], "body": [{"type": "para", "indent": 20, "text": ["Pruning affects only the memory usage of a grid. It does not\n                    remove voxels, apart from inactive voxels whose value is\n                    equal to the background."], "extent": [4382, 4586]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Volume Bindings"], "extent": [4586, 4608], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Only Output Created Geometry"], "extent": [4608, 4647], "body": [{"type": "para", "indent": 12, "text": ["Don\u2019t output any of the incoming volumes.  Instead, the output\n            will consist of only geometry created by the VOPs.  This\n            is useful if generating points from volumes.  Note you will\n            still have to do a dummy write to any volume you wish\n            to iterate over."], "extent": [4647, 4959]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Signed-Flood Fill Output SDF VDBs"], "extent": [4959, 5002], "body": [{"type": "para", "indent": 12, "text": ["When narrow-band SDFs are processed the sense of the interior cells\n            can be lost.  This results in the interior being falsely output with\n            the default background value.  This option will do the sweep to\n            reset these tiles to the correct sense.  It only affects VDBs which\n            are of grid class SDF."], "extent": [5002, 5355]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Autobind by Name"], "extent": [5355, 5381], "body": [{"type": "para", "indent": 12, "text": ["Will use the name primitive attribute to determine which\n            volume binds with which parameter.  If the name attribute\n            isn\u2019t present, the first volume is bound to density."], "extent": [5381, 5586]}, {"type": "para", "indent": 12, "text": ["A name like ", {"type": "q", "text": ["foo"]}, " will be bound to the float parameter\n            ", {"type": "q", "text": ["foo"]}, ".  A name of ", {"type": "q", "text": ["foo.x"]}, " will be bound to the x\n            component of the vector (three float) parameter ", {"type": "q", "text": ["foo"]}, ".  A\n            name like ", {"type": "q", "text": ["foo.zx"]}, " will be bound to the x,z component of\n            the matrix (three by three) parameter ", {"type": "q", "text": ["foo"]}, "."], "extent": [5586, 5919]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Bind Each to Density"], "extent": [5919, 5949], "body": [{"type": "para", "indent": 12, "text": ["The VOP network will be applied to each volume in turn, with the\n            volume bound to density."], "extent": [5949, 6064]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Primitive, Primitive Name, VEX Parameter"], "extent": [6064, 6114], "body": [{"type": "para", "indent": 12, "text": ["Manually specifies the bindings of each primitive.  This\n            is equivalent to those primitives having a name attribute\n            with the given name.  If Primitive Name is not empty,\n            the primitive with the matching name will be bound to the\n            given vex parameter."], "extent": [6114, 6423]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["VEX Precision"], "extent": [2846, 2862], "body": [{"type": "para", "indent": 4, "text": ["VEX can evaluate at 32-bit or 64-bit precision.  64-bit provides\n    higher accuracy, especially for transforms."], "extent": [2886, 3008]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3008, 3018], "body": [{"type": "para", "indent": 8, "text": ["Incoming attributes will preserve their original precision, so using 64-bit VEX on 32-bit positions will convert them to 64-bit, apply the operation, then convert back to 32-bit when writing out."], "extent": [3018, 3227]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 4, "text": ["The auto mode will switch between 32-bit and 64-bit depending on the preferred precision of the incoming geometry. When run in 64-bit precision, any created attributes will be 64-bit. When run in 32-bit any created attributes will be 32-bit. Use ", {"scheme": "Node", "value": "/nodes/sop/attribcast", "type": "link", "text": "", "fullpath": "/nodes/sop/attribcast"}, " to change the preferred precision."], "extent": [3227, 3535]}], "container": true, "attrs": {"id": "vex_precision"}, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [6469, 6478], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/volumemix", "type": "link", "text": "", "fullpath": "/nodes/sop/volumemix"}], "extent": [6478, 6505]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/isooffset", "type": "link", "text": "", "fullpath": "/nodes/sop/isooffset"}], "extent": [6505, 6532]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/iso", "type": "link", "text": "", "fullpath": "/nodes/sop/iso"}], "extent": [6532, 6554]}], "container": true}], "text": "Related"}], "title": ["Volume VOP"], "summary": ["Runs CVEX on a set of volume primitives."], "included": ["/nodes/sop/attribvop"]}