{"type": "root", "attrs": {"type": "node", "context": "sop", "icon": "SHELF/whitewater", "internal": "whitewatersource::2.0", "version": "2.0", "since": "17.0", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Whitewater Source"], "extent": [111, 133]}, {"type": "summary", "indent": 0, "text": [" Generates volumes to be used as sources in a whitewater simulation. "], "extent": [133, 211]}, {"type": "para", "indent": 0, "text": ["The Whitewater Source SOP generates an emission field that is used by the\n", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver"}, " for birthing particles. Values in\nthe emission field correspond to probabilities that whitewater will appear at\nthat point. One can approximate the amount and location of newly-created\nwhitewater in a frame by visualizing the generated ", {"type": "code", "text": ["emit"]}, " VDB: density of the\nfog is directly related to the birth rate. This node is also able to source\nwhitewater particles using the same method as the\n", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver"}, "; these particles are colored based\non their emission criteria, enabling assessment of particle counts, as well as\ntuning of emission controls with concrete visual feedback."], "extent": [211, 940]}, {"type": "para", "indent": 0, "text": ["In contrast to the previous particle-based sourcing, the new system is\nscale-independent with respect to the underlying liquid simulation.\nConsequently, it is much easier to control the physical amount of whitewater,\nwithout having to consider particle counts. Additionally, the new system is\ndesigned to facilitate full-pipeline prototyping for fluid simulations. That\nis, the artist is free to work with low resolution settings to find a\nsatisfactory overall look for both the liquid and whitewater simulations; the\nparticle count can then be increased for the higher-fidelity final pass on both\nsolvers, without needing to worry about significant changes in the amount of\nwhitewater."], "extent": [940, 1628]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1628, 1634], "body": [{"type": "para", "indent": 4, "text": ["This operator expects ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, " volumes in its input."], "extent": [1634, 1703]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [1703, 1711], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Liquid Simulation"], "extent": [1711, 1734], "body": [{"type": "para", "indent": 8, "text": ["Surface and velocity volumes or VDBs from a liquid simulation."], "extent": [1734, 1806]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Extra Source Points"], "extent": [1806, 1831], "body": [{"type": "para", "indent": 8, "text": ["Extra points to splat into the emission volume. The emission amount\n        for each extra source point (indicated by the value of its ", {"type": "ui", "text": ["Emission\n        Attribute"]}, ") is distributed trilinearly to its nearest voxels."], "extent": [1831, 2057]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Emission Mask"], "extent": [2057, 2076], "body": [{"type": "para", "indent": 8, "text": ["Mask to limit the emission regions."], "extent": [2076, 2121]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [2121, 2130], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Volumes"], "extent": [2130, 2143], "body": [{"type": "para", "indent": 8, "text": ["Geometry containing the emission volume (", {"type": "code", "text": ["emit"]}, "). If ", {"type": "ui", "text": ["Output Volumes"]}, "\n        is enabled, the geometry also contains liquid\u2019s ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, "\n        fields. If ", {"type": "ui", "text": ["Source Particles"]}, " is enabled, the birthed whitewater\n        particles are also included."], "extent": [2143, 2412]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2412, 2424], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Emission"], "extent": [2424, 2440], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Limit by Depth"], "extent": [2440, 2457], "body": [{"type": "para", "indent": 4, "text": ["When enabled, whitewater will only be emitted within the specified range of\n    depths."], "extent": [2479, 2572]}], "container": true, "attrs": {"id": "limitbydepth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Half-Width"], "extent": [2572, 2592], "body": [{"type": "para", "indent": 4, "text": ["An attempt will be made to activate the signed distance VDB to ensure that\n    accurate depth readings to the specified limiting values can be made. The\n    ", {"type": "ui", "text": ["Maximum Half-Width"]}, " parameter can be used to limit the number of voxels\n    that get activated, preventing exhaustion of computing resources. "], "extent": [2614, 2926]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [2926, 2936], "body": [{"type": "para", "indent": 8, "text": ["This should be turned on when using Narrow Band, and off for dense SDFs such as oceans."], "extent": [2936, 3033]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "maxhalfwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Speed Range"], "extent": [3033, 3046], "body": [{"type": "para", "indent": 4, "text": ["All regions of the liquid that have a speed greater than the minimum are\n    eligible to emit whitewater. Regions moving at or above the maximum speed\n    are considered fully emitting."], "extent": [3066, 3257]}], "container": true, "attrs": {"id": "speedrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Speed"], "extent": [3257, 3270], "body": [{"type": "para", "indent": 4, "text": ["By default, the speed is mapped linearly to the (0, 1) range. This behavior\n    can be changed by specifying a custom mapping."], "extent": [3290, 3422]}], "container": true, "attrs": {"id": "remapspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Emission"], "extent": [3422, 3438], "body": [{"type": "para", "indent": 4, "text": ["The final emission probability can be optionally remapped with the\n    ", {"type": "ui", "text": ["Emission Ramp"]}, "."], "extent": [3461, 3556]}], "container": true, "attrs": {"id": "remapemission"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Curvature"], "extent": [3556, 3572], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Curvature"], "extent": [3572, 3594], "body": [{"type": "para", "indent": 4, "text": ["Augment emission rates with the curvature of the surface SDF, which can be\n    an effective criterion for detecting the leading edges of breaking waves."], "extent": [3619, 3777]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3777, 3787], "body": [{"type": "para", "indent": 8, "text": ["High resolution fluid simulations tend to contain fine details that may\n        result in spurious curvature-based sourcing. To eliminate this, consider\n        smoothing out surface field using controls under ", {"type": "ui", "text": ["Surface Filtering"]}, "."], "extent": [3787, 4029]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "enablecurvature"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Velocity Angle"], "extent": [4029, 4049], "body": [{"type": "para", "indent": 4, "text": ["The angle between the velocity of the particle and the surface normal must\n    be lower than this value for whitewater emission. This limit helps ensure\n    that whitewater is only created on the leading edges of waves."], "extent": [4070, 4295]}], "container": true, "attrs": {"id": "maxvelangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Curvature Range"], "extent": [4295, 4312], "body": [{"type": "para", "indent": 4, "text": ["Range of curvatures that gets mapped to the (0, 1) emission range."], "extent": [4336, 4408]}], "container": true, "attrs": {"id": "curvaturerange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Curvature"], "extent": [4408, 4425], "body": [{"type": "para", "indent": 4, "text": ["By default, the curvature is mapped linearly to the (0, 1) range. This\n    behaviour can be changed by specifying a custom mapping."], "extent": [4449, 4586]}], "container": true, "attrs": {"id": "remapcurvature"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Acceleration"], "extent": [4586, 4605], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Acceleration"], "extent": [4605, 4630], "body": [{"type": "para", "indent": 4, "text": ["Augment emission rates with the magnitude of acceleration. Acceleration is\n    effective at detecting areas where particles are rejoining existing parts\n    of the fluid, resulting in trapped air that causes whitewater. Note that\n    this uses Eulerian acceleration, which is the time-rate of change of fluid\n    velocity at fixed locations in space."], "extent": [4658, 5014]}], "container": true, "attrs": {"id": "enableacceleration"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Acceleration Range"], "extent": [5014, 5034], "body": [{"type": "para", "indent": 4, "text": ["Range of accelerations that gets mapped to the (0, 1) emission range."], "extent": [5061, 5136]}], "container": true, "attrs": {"id": "accelerationrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Acceleration"], "extent": [5136, 5156], "body": [{"type": "para", "indent": 4, "text": ["By default, the acceleration is mapped linearly to the (0, 1) range. This\n    behavior can be changed by specifying a custom mapping."], "extent": [5183, 5322]}], "container": true, "attrs": {"id": "remapacceleration"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Vorticity"], "extent": [5322, 5338], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Vorticity"], "extent": [5338, 5360], "body": [{"type": "para", "indent": 4, "text": ["Augment emission rates based on the vorticity (or magnitude of rotation)\n    within the velocity volume. This criterion can be effective in identifying\n    churning areas of the fluid, which generally occur deeper below the\n    surface."], "extent": [5385, 5627]}], "container": true, "attrs": {"id": "enablevorticity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vorticity Range"], "extent": [5627, 5644], "body": [{"type": "para", "indent": 4, "text": ["Range of vorticities that gets mapped to the (0, 1) emission range."], "extent": [5668, 5741]}], "container": true, "attrs": {"id": "vorticityrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Vorticity"], "extent": [5741, 5758], "body": [{"type": "para", "indent": 4, "text": ["By default, the vorticity is mapped linearly to the (0, 1) range. This\n    behavior can be changed by specifying a custom mapping."], "extent": [5782, 5918]}], "container": true, "attrs": {"id": "remapvorticity"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Extra Sources"], "extent": [5918, 5938], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Add Extra Sources"], "extent": [5938, 5958], "body": [{"type": "para", "indent": 4, "text": ["Use points of the second input as additional sources."], "extent": [5980, 6039]}], "container": true, "attrs": {"id": "extrasources"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [6039, 6046], "body": [{"type": "para", "indent": 4, "text": ["Only points of the second input that are part of this group will be used\n    for extra emission."], "extent": [6061, 6163]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Attribute"], "extent": [6163, 6183], "body": [{"type": "para", "indent": 4, "text": ["Name of the attribute that stores emission amount for each source point. If\n    the specified attribute does not exist, no extra emission will be added."], "extent": [6203, 6361]}], "container": true, "attrs": {"id": "emitattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Particle Scale"], "extent": [6361, 6377], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["pscale"]}, " attribute will be scaled by this value. Increase this value to\n    give a larger footprint to the extra emission points."], "extent": [6400, 6539]}], "container": true, "attrs": {"id": "particlescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Merge Method"], "extent": [6539, 6553], "body": [{"type": "para", "indent": 4, "text": ["This parameter controls how extra sourcing is combined with the emission\n    volume."], "extent": [6574, 6664]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["Add"]}], "extent": [6664, 6675], "body": [{"type": "para", "indent": 8, "text": ["Extra emission is added to the original volume."], "extent": [6675, 6731]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["Maximum"]}], "extent": [6731, 6746], "body": [{"type": "para", "indent": 8, "text": ["Final emission is the maximum of the original volume and extra\n        emission."], "extent": [6746, 6835]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["Override"]}], "extent": [6835, 6851], "body": [{"type": "para", "indent": 8, "text": ["Emission in the areas influenced by extra sources is replaced by their\n        value."], "extent": [6851, 6946]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mergemethod"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Volumes"], "extent": [6946, 6960], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Output Volumes"], "extent": [6960, 6977], "body": [{"type": "para", "indent": 4, "text": ["When this option is enabled, the node also outputs the liquid\u2019s signed\n    distance (", {"type": "code", "text": ["surface"]}, ") and velocity (", {"type": "code", "text": ["vel"]}, ") fields."], "extent": [7000, 7130]}], "container": true, "attrs": {"id": "outputvolumes"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Voxel Size"], "extent": [7130, 7142], "body": [{"type": "para", "indent": 4, "text": ["Voxel size for the emission volume."], "extent": [7161, 7202]}], "container": true, "attrs": {"id": "voxelsize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Size"], "extent": [7202, 7217], "body": [{"type": "para", "indent": 4, "text": ["Physical size of the emission region; this option can be used to restrict\n    emission to a certain subregion of the fluid simulation."], "extent": [7240, 7380]}], "container": true, "attrs": {"id": "boundemission"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Center"], "extent": [7380, 7397], "body": [{"type": "para", "indent": 4, "text": ["Center of the restricted emission region."], "extent": [7412, 7459]}], "container": true, "attrs": {"id": "emitt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mask Name"], "extent": [7459, 7470], "body": [{"type": "para", "indent": 4, "text": ["Name (or name pattern) of primitive to use as an emission mask."], "extent": [7488, 7557]}], "container": true, "attrs": {"id": "maskname"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Surface Filtering"], "extent": [7557, 7583], "body": [{"type": "para", "indent": 0, "text": ["The filtering operations in this section can be used to smooth out the surface\nfield before it\u2019s used for generating the emission field. This can be helpful\nfor eliminating noise from curvature-based emission."], "extent": [7583, 7795]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [7795, 7801], "body": [{"type": "para", "indent": 4, "text": ["Dilation is performed first, followed by smoothing and, finally, erosion."], "extent": [7801, 7880]}], "container": true}, {"type": "note", "indent": 0, "role": "item", "extent": [7880, 7886], "body": [{"type": "para", "indent": 4, "text": ["If ", {"type": "ui", "text": ["Output Volumes"]}, " is enabled, the filtered surface will be exported by\n    this node. Be wary of letting the\n    ", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver"}, " use it, however, as aggressive\n    smoothing may give rise to liquid regions that suddenly disappear."], "extent": [7886, 8156]}], "container": true}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Dilate"], "extent": [8156, 8164], "body": [{"type": "para", "indent": 4, "text": ["The number of voxels to expand the surface by."], "extent": [8186, 8238]}], "container": true, "attrs": {"id": "dilatevoxels"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Smooth"], "extent": [8238, 8246], "body": [{"type": "para", "indent": 4, "text": ["Smooth the surface using the specified filter for the given number of\n    iterations."], "extent": [8265, 8356]}], "container": true, "attrs": {"id": "operation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erode"], "extent": [8356, 8363], "body": [{"type": "para", "indent": 4, "text": ["The number of voxels to shrink the surface by."], "extent": [8384, 8436]}], "container": true, "attrs": {"id": "erodevoxels"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [8436, 8456], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Visualize Emission Volume"], "extent": [8456, 8484], "body": [{"type": "para", "indent": 4, "text": ["When this parameter is turned off, the generated ", {"type": "code", "text": ["emit"]}, " volume will be\n    marked invisible and will not be rendered in the viewport."], "extent": [8504, 8643]}], "container": true, "attrs": {"id": "visemitvol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Particles"], "extent": [8643, 8661], "body": [{"type": "para", "indent": 4, "text": ["When this option is enabled, whitewater particles will be created using the\n    Whitewater Solver\u2019s method. This can be used to get a concrete idea of\n    emission amount for the generated ", {"type": "code", "text": ["emit"]}, " volume."], "extent": [8686, 8895]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [8895, 8905], "body": [{"type": "para", "indent": 8, "text": ["The actual number of particles birthed by the solver may actually be\n        substantially fewer than this approximation if ", {"type": "ui", "text": ["Limit Emission"]}, " is\n        turned on."], "extent": [8905, 9079]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "createparticles"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Whitewater Scale"], "extent": [9079, 9097], "body": [{"type": "para", "indent": 4, "text": ["Whitewater scale controls the number of particles that are created to fill\n    a given volume; value of this parameter should match ", {"type": "ui", "text": ["Whitewater Scale"]}, "\n    of the solver."], "extent": [9114, 9291]}], "container": true, "attrs": {"id": "wwscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Amount"], "extent": [9291, 9308], "body": [{"type": "para", "indent": 4, "text": ["A modifier on the emission amount; value of this parameter should match\n    ", {"type": "ui", "text": ["Emission Amount"]}, " of the solver."], "extent": [9332, 9448]}], "container": true, "attrs": {"id": "emissionamount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Curvature Color"], "extent": [9448, 9465], "body": [{"type": "para", "indent": 4, "text": ["Color of particles that are birthed as a result of curvature emission."], "extent": [9489, 9565]}], "container": true, "attrs": {"id": "curvaturecolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Acceleration Color"], "extent": [9565, 9585], "body": [{"type": "para", "indent": 4, "text": ["Color of particles that are birthed as a result of acceleration emission."], "extent": [9612, 9691]}], "container": true, "attrs": {"id": "accelerationcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vorticity Color"], "extent": [9691, 9708], "body": [{"type": "para", "indent": 4, "text": ["Color of particles that are birthed as a result of vorticity emission."], "extent": [9732, 9808]}], "container": true, "attrs": {"id": "vorticitycolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extra Color"], "extent": [9808, 9821], "body": [{"type": "para", "indent": 4, "text": ["Color of particles that are birthed as a result of extra sourcing."], "extent": [9841, 9913]}], "container": true, "attrs": {"id": "extracolor"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [9913, 9922], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver"}], "extent": [9922, 9975]}], "container": true}], "text": "Related"}], "title": ["Whitewater Source"], "summary": [" Generates volumes to be used as sources in a whitewater simulation. "]}