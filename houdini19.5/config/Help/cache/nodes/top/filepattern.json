{"type": "root", "attrs": {"type": "node", "context": "top", "internal": "filepattern", "icon": "TOP/filepattern", "since": "17.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["File Pattern"], "extent": [0, 17]}, {"type": "summary", "indent": 0, "text": ["Creates work items based on files that match a certain pattern."], "extent": [117, 188]}, {"type": "para", "indent": 0, "text": ["This node generates a work item for each file or directory name that matches a ", {"scheme": null, "value": "#pattern", "type": "link", "text": ["pattern"], "fullpath": "/nodes/top/filepattern#pattern", "fragment": "#pattern"}, " in a directory or all sub-directories. This node also has two modes for generating work items, and which mode it uses is determined by the ", {"scheme": null, "value": "#split", "type": "link", "text": ["Split Files into Separate Items"], "fullpath": "/nodes/top/filepattern#split", "fragment": "#split"}, " parameter."], "extent": [188, 478]}, {"type": "para", "indent": 0, "text": ["Whenever this node is asked to generate items, like when it cooks or when you ask nodes to pre-generate static items, the node checks if the pattern matches different files from the last cook and if the modification times have changed on any files. If the answer is yes, then the node updates the changed items and marks them dirty. So when the directory contents change, usually only the changed items need to be recooked."], "extent": [478, 903]}, {"level": 1, "id": "top_attributes", "container": true, "type": "top_attributes_section", "indent": 0, "role": "section", "extent": [903, 919], "body": [{"type": "para", "indent": 0, "text": ["When the ", {"type": "ui", "text": ["Split Files into Separate Items"]}, " parameter is on, the node sets the following attributes on each work item:"], "extent": [919, 1041]}, {"type": "top_attributes_item_group", "body": [{"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["directory"]}], "role": "item", "extent": [1041, 1056], "body": [{"type": "para", "indent": 4, "text": ["The directory containing the file associated with the work item, without the filename or extension."], "extent": [1075, 1180]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["extension"]}], "role": "item", "extent": [1180, 1195], "body": [{"type": "para", "indent": 4, "text": ["The extension of the file associated with the work item."], "extent": [1214, 1276]}, {"type": "para", "indent": 4, "text": ["This attribute is ", {"type": "em", "text": ["not"]}, " set when ", {"scheme": null, "value": "#filetypes", "type": "link", "text": ["File Types"], "fullpath": "/nodes/top/filepattern#filetypes", "fragment": "#filetypes"}, " is set to ", {"type": "ui", "text": ["Directories Only"]}, " or when the matched path is a directory."], "extent": [1276, 1410]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["filename"]}], "role": "item", "extent": [1410, 1424], "body": [{"type": "para", "indent": 4, "text": ["The name of the file. "], "extent": [1443, 1471]}, {"type": "para", "indent": 4, "text": ["This attribute is ", {"type": "em", "text": ["not"]}, " set when ", {"scheme": null, "value": "#filetypes", "type": "link", "text": ["File Types"], "fullpath": "/nodes/top/filepattern#filetypes", "fragment": "#filetypes"}, " is set to ", {"type": "ui", "text": ["Directories Only"]}, " or when the matched path is a directory."], "extent": [1471, 1605]}], "container": true, "attrs": {"type": "string"}}], "container": true, "role": "item_group"}], "text": "Top_attributes"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1605, 1617], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" Operation "], "extent": [1617, 1636], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Generate When"], "extent": [16, 31], "body": [{"type": "para", "indent": 4, "text": ["Determines when this node will generate work items. You should generally leave this set to ", {"type": "q", "text": ["Automatic"]}, " unless you know the node requires a specific generation mode, or that the work items need to be generated dynamically."], "extent": [64, 291]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["All Upstream Items are Generated"], "extent": [291, 329], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items once all of the input nodes have generated their work items."], "extent": [329, 437]}], "container": true}, {"type": "dt", "indent": 4, "text": ["All Upstream Items are Cooked"], "extent": [437, 472], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items once all of the input nodes have cooked their work items."], "extent": [472, 577]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Each Upstream Item is Cooked"], "extent": [577, 611], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items each time a work item in an input node is cooked."], "extent": [611, 708]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Automatic"], "extent": [708, 723], "body": [{"type": "para", "indent": 11, "text": ["The generation mode is selected based on the generation mode of the input nodes. If any of the input nodes are generating work items when their inputs cook, this node will be set to ", {"type": "ui", "text": ["Each Upstream Item is Cooked"]}, ". Otherwise, it will be set to ", {"type": "ui", "text": ["All Upstream Items are Generated"]}, "."], "extent": [723, 1018]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_workitemgeneration"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["File Types"], "extent": [1692, 1708], "body": [{"type": "para", "indent": 8, "text": ["File types to pattern match."], "extent": [1732, 1770]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Files Only"], "extent": [1770, 1790], "body": [{"type": "para", "indent": 12, "text": ["Match only files."], "extent": [1790, 1821]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Directories Only"], "extent": [1821, 1847], "body": [{"type": "para", "indent": 12, "text": ["Match only directories."], "extent": [1847, 1884]}], "container": true}, {"type": "dt", "indent": 8, "text": ["All"], "extent": [1884, 1897], "body": [{"type": "para", "indent": 12, "text": ["Match both files and directories."], "extent": [1897, 1944]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "filetypes"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Pattern"], "extent": [1944, 1957], "body": [{"type": "para", "indent": 8, "text": ["Specifies the path to start searching in as well as the pattern to match. For example, ", {"type": "code", "text": ["$PDG_DIR/geo/*.bgeo"]}, " would look in the ", {"type": "code", "text": ["geo"]}, " directory inside the project working directory and find all files ending in ", {"type": "code", "text": [".bgeo"]}, "."], "extent": [1979, 2206]}, {"type": "para", "indent": 8, "text": [{"type": "ui", "text": ["Pattern"]}, " allows wild cards such as ", {"type": "code", "text": ["?"]}, " (match any character), ", {"type": "code", "text": ["*"]}, " (match any string of characters), and ", {"type": "code", "text": ["[abc]"]}, " (match any one of the characters inside the square brackets). For example, ", {"type": "code", "text": ["*.png"]}, " matches any file that ends with ", {"type": "code", "text": [".png"]}, "."], "extent": [2206, 2453]}, {"type": "para", "indent": 8, "text": [{"type": "ui", "text": ["Pattern"]}, " is always expanded on the machine where the network cooks, not on a remote host on the render farm. The expanded filenames should still be under the working directory in the shared network file system. This node will automatically convert local matched file paths to paths that are relative to the working directory."], "extent": [2453, 2791]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [2791, 2805], "body": [{"type": "para", "indent": 11, "text": [{"type": "code", "text": ["$F"]}, " does ", {"type": "em", "text": ["not"]}, " work like you would expect. The pattern expression is evaluated in the context of a work item, which has a particular frame value. Please use the ", {"scheme": "Node", "value": "/nodes/top/filerange", "type": "link", "text": ["File Range"], "fullpath": "/nodes/top/filerange"}, " TOP node instead."], "extent": [2805, 3029]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "pattern"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Recursive"], "extent": [3029, 3044], "body": [{"type": "para", "indent": 8, "text": ["When on, the node looks for matching filenames in sub-directories of the path specified by the ", {"type": "ui", "text": ["Pattern"]}, " parameter."], "extent": [3068, 3195]}], "container": true, "attrs": {"id": "recursive"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["No Match Behavior"], "extent": [3195, 3218], "body": [{"type": "para", "indent": 8, "text": ["Determines what to do when the file pattern fails to match any files."], "extent": [3248, 3327]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Ignore"], "extent": [3327, 3343], "body": [{"type": "para", "indent": 12, "text": ["Does not generate work items for missing files."], "extent": [3343, 3404]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Set Node Error"], "extent": [3404, 3428], "body": [{"type": "para", "indent": 12, "text": ["Sets an error on the node."], "extent": [3428, 3468]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Create Work Items"], "extent": [3468, 3495], "body": [{"type": "para", "indent": 12, "text": ["Creates a work item and sets an attribute indicating that it is missing."], "extent": [3495, 3581]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "nomatchbehavior"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["File Exists Attribute"], "extent": [3581, 3608], "body": [{"type": "para", "indent": 8, "text": ["Specifies the name of the attribute to create on each work item which will indicate whether or not the file was found."], "extent": [3634, 3762]}], "container": true, "attrs": {"id": "nomatchattr"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Work Items "], "extent": [3762, 3781], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Include Extensions in Filename Attribute"], "extent": [3781, 3828], "body": [{"type": "para", "indent": 8, "text": ["When this toggle is enabled the full filename including the extension is saved to an attribute on the work item. If the toggle is disabled only the base file name, without the an extension, is stored to the attribute."], "extent": [3860, 4087]}], "container": true, "attrs": {"id": "includeextensions"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Split Files into Separate Items"], "extent": [4087, 4124], "body": [{"type": "para", "indent": 8, "text": ["When on, the node creates separate work items for each matched name and stores the filename data in the attributes. This parameter is ", {"type": "em", "text": ["on"]}, " by default. When off, the node creates ", {"type": "em", "text": ["one"]}, " work item with the matching file paths set as the item\u2019s output results. Turning off this parameter can be useful when the node you're wiring this node into operates on results data. "], "extent": [4144, 4521]}], "container": true, "attrs": {"id": "split"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Inherit Upstream Work Item Index"], "extent": [4521, 4559], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Split Files into Separate Items"]}, " and this parameter are enabled, generated work items will inherit the upstream work item\u2019s index. When this parameter is disabled and ", {"type": "ui", "text": ["Split Files into Separate Items"]}, " is enabled, the work item\u2019s index is based on its file\u2019s position within the list of discovered files."], "extent": [4594, 4917]}], "container": true, "attrs": {"id": "inheritupstreamindex"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Outputs "], "extent": [4917, 4933], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Output Attribute"], "extent": [4933, 4956], "body": [{"type": "para", "indent": 8, "text": ["By default, files that match the ", {"type": "ui", "text": ["Pattern"]}, " are stored as work item outputs. When this parameter is enabled, the files are instead stored to a file attribute with the specified name."], "extent": [4983, 5176]}], "container": true, "attrs": {"id": "outputattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Output File Tag"], "extent": [5176, 5197], "body": [{"type": "para", "indent": 8, "text": ["When on, assigns this ", {"scheme": null, "value": "/tops/filetags", "type": "link", "text": ["file tag"], "fullpath": "/tops/filetags"}, " to the output file paths. When off, the node guesses appropriate file tags based on filename extensions."], "extent": [5225, 5387]}], "container": true, "attrs": {"id": "resultdatatag"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Copy File(s) to Working Directory"], "extent": [5387, 5426], "body": [{"type": "para", "indent": 8, "text": ["Indicates that the globbed files should be copied from their source location to the scheduler\u2019s working directory when this work item cooks. "], "extent": [5450, 5601]}, {"type": "para", "indent": 8, "text": ["Enabling this toggle sets the ", {"scheme": "Py", "value": "pdg.attribFlag#Transfer", "type": "link", "text": "", "fullpath": "/nodes/top/pdg.attribFlag#Transfer", "fragment": "#Transfer"}, " attribute flag on the work item\u2019s output file list. "], "extent": [5601, 5723]}], "container": true, "attrs": {"id": "copyfiles"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [5723, 5732], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/filecopy", "type": "link", "text": "", "fullpath": "/nodes/top/filecopy"}], "extent": [5732, 5754]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/fileremove", "type": "link", "text": "", "fullpath": "/nodes/top/fileremove"}], "extent": [5754, 5778]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/filerename", "type": "link", "text": "", "fullpath": "/nodes/top/filerename"}], "extent": [5778, 5802]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/filerange", "type": "link", "text": "", "fullpath": "/nodes/top/filerange"}], "extent": [5802, 5825]}], "container": true}], "text": "Related"}], "title": ["File Pattern"], "summary": ["Creates work items based on files that match a certain pattern."], "included": ["/nodes/top/processor_common"]}