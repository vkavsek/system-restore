{"type": "root", "attrs": {"type": "node", "context": "top", "internal": "perforce", "icon": "TOP/perforce", "since": "17.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Perforce"], "extent": [105, 118]}, {"type": "summary", "indent": 0, "text": ["Execute Perforce commands through PDG"], "extent": [118, 164]}, {"type": "para", "indent": 0, "text": ["This node acts as a wrapper around Perforce functionality. It provides an\ninterface for executing ", {"tag": "i", "attrs": {}, "type": "xml", "text": ["p4"]}, " commands."], "extent": [164, 283]}, {"level": 1, "id": "installation", "container": true, "type": "installation_section", "indent": 0, "role": "section", "extent": [283, 297], "body": [{"type": "para", "indent": 0, "text": ["In order to use this node, you must ensure that Perforce is installed on any\nsystems where jobs for this node are going to run."], "extent": [297, 427]}, {"type": "para", "indent": 0, "text": ["In addition, the Perforce node must be able to find the ", {"tag": "i", "attrs": {}, "type": "xml", "text": ["p4"]}, " executable.\nWhen the job runs, it will first look for an environment variable called\n", {"tag": "b", "attrs": {}, "type": "xml", "text": ["PDG_PERFORCE"]}, ". If this variable is defined, the job will use its value as\nthe path to Perforce\u2019s executable. If the ", {"tag": "b", "attrs": {}, "type": "xml", "text": ["PDG_PERFORCE"]}, " environment\nvariable is not defined, the node will assume that ", {"tag": "i", "attrs": {}, "type": "xml", "text": ["p4"]}, " is available via\nthe system\u2019s path."], "extent": [427, 830]}], "text": "Installation"}, {"level": 1, "id": "top_attributes", "container": true, "type": "top_attributes_section", "indent": 0, "role": "section", "extent": [830, 846], "body": [{"type": "top_attributes_item_group", "body": [{"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["opduring"]}], "role": "item", "extent": [846, 860], "body": [{"type": "para", "indent": 4, "text": ["Indicates when the operation will be performed:"], "extent": [876, 929]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "strong", "text": ["Generate"]}, " = 0"], "extent": [929, 950]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "strong", "text": ["Cook (In-Process)"]}, " = 1"], "extent": [950, 980]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "strong", "text": ["Cook (Out-of-Process)"]}, " = 2"], "extent": [980, 1015]}], "container": true}], "container": true, "attrs": {"type": "int"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["perforceop"]}], "role": "item", "extent": [1015, 1030], "body": [{"type": "para", "indent": 4, "text": ["Indicates the Perforce operation to perform (update, sync, edit, submit,\n    add, change, or version)"], "extent": [1049, 1156]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["overridebin"]}], "role": "item", "extent": [1156, 1172], "body": [{"type": "para", "indent": 4, "text": ["Specifies whether the user has overriden the default behaviour for\n    determining the location of the P4 executable. When this is set to 1, the\n    work script will use the custom binary path specified by the user."], "extent": [1192, 1413]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["perforcebin"]}], "role": "item", "extent": [1413, 1429], "body": [{"type": "para", "indent": 4, "text": ["This is set to the custom P4 executable path specified by the user. This is\n    used as the path to the P4 executable when ", {"type": "code", "text": ["overridebin"]}, " is set to 1"], "extent": [1448, 1602]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["sourcefiles"]}], "role": "item", "extent": [1602, 1618], "body": [{"type": "para", "indent": 4, "text": ["Indicates the user\u2019s selected menu item from the ", {"type": "strong", "text": ["Source Files"]}, " parameter."], "extent": [1638, 1718]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["filepattern"]}], "role": "item", "extent": [1718, 1734], "body": [{"type": "para", "indent": 4, "text": ["The file pattern to use in the Perforce operation.    "], "extent": [1753, 1813]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["filetag"]}], "role": "item", "extent": [1813, 1825], "body": [{"type": "para", "indent": 4, "text": ["The file tag of the input results included in the Perforce operation."], "extent": [1848, 1923]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["changelistnum"]}], "role": "item", "extent": [1923, 1941], "body": [{"type": "para", "indent": 4, "text": ["For the ", {"type": "code", "text": ["edit"]}, ", ", {"type": "code", "text": ["submit"]}, ", and ", {"type": "code", "text": ["add"]}, " operations: specifies the changelist\n    number for the operation"], "extent": [1961, 2068]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["changelistchoice"]}], "role": "item", "extent": [2068, 2089], "body": [{"type": "para", "indent": 4, "text": ["Specifies whether the default changelist or a numbered changelist is being\n    used."], "extent": [2108, 2198]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["changelistdescription"]}], "role": "item", "extent": [2198, 2224], "body": [{"type": "para", "indent": 4, "text": ["For the ", {"type": "code", "text": ["submit"]}, " and ", {"type": "code", "text": ["change"]}, " operations: specifies the changelist\n    description"], "extent": [2243, 2331]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["p4configfile"]}], "role": "item", "extent": [2331, 2348], "body": [{"type": "para", "indent": 4, "text": ["Specifies the location of the P4 config file"], "extent": [2367, 2417]}], "container": true, "attrs": {"type": "string"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["forcesync"]}], "role": "item", "extent": [2417, 2431], "body": [{"type": "para", "indent": 4, "text": ["For the ", {"type": "code", "text": ["sync"]}, " operation: indicates whether a force sync should be performed"], "extent": [2451, 2533]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["emptychangelist"]}], "role": "item", "extent": [2533, 2553], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Change"]}, " operation only: specifies whether the new change list should be\n    empty or include all pending files "], "extent": [2573, 2691]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["updateall"]}], "role": "item", "extent": [2691, 2705], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Update"]}, " and ", {"type": "strong", "text": ["Sync"]}, " operation only: indicates whether the entire workspace\n    should be updated"], "extent": [2725, 2827]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["changelist"]}], "role": "item", "extent": [2827, 2842], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Change"]}, " operation only: when a change list is successfully created by the\n    change operation, its number will be specified via this attribute."], "extent": [2862, 3013]}], "container": true, "attrs": {"type": "integer"}}, {"ext": null, "type": "top_attributes_item", "indent": 0, "text": [{"type": "code", "text": ["input_files"]}], "role": "item", "extent": [3013, 3029], "body": [{"type": "para", "indent": 4, "text": ["The list of file paths or the file pattern to be used in the ", {"type": "strong", "text": ["p4"]}, " command."], "extent": [3048, 3128]}], "container": true, "attrs": {"type": "string"}}], "container": true, "role": "item_group"}], "text": "Top_attributes"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [3128, 3140], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Node"], "extent": [3140, 3152], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Generate When"], "extent": [16, 31], "body": [{"type": "para", "indent": 4, "text": ["Determines when this node will generate work items. You should generally leave this set to ", {"type": "q", "text": ["Automatic"]}, " unless you know the node requires a specific generation mode, or that the work items need to be generated dynamically."], "extent": [64, 291]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["All Upstream Items are Generated"], "extent": [291, 329], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items once all of the input nodes have generated their work items."], "extent": [329, 437]}], "container": true}, {"type": "dt", "indent": 4, "text": ["All Upstream Items are Cooked"], "extent": [437, 472], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items once all of the input nodes have cooked their work items."], "extent": [472, 577]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Each Upstream Item is Cooked"], "extent": [577, 611], "body": [{"type": "para", "indent": 11, "text": ["This node will generate work items each time a work item in an input node is cooked."], "extent": [611, 708]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Automatic"], "extent": [708, 723], "body": [{"type": "para", "indent": 11, "text": ["The generation mode is selected based on the generation mode of the input nodes. If any of the input nodes are generating work items when their inputs cook, this node will be set to ", {"type": "ui", "text": ["Each Upstream Item is Cooked"]}, ". Otherwise, it will be set to ", {"type": "ui", "text": ["All Upstream Items are Generated"]}, "."], "extent": [723, 1018]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_workitemgeneration"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Perform Op During"], "extent": [3204, 3223], "body": [{"type": "para", "indent": 4, "text": ["This parameter dictates when to perform the Perforce operation. The Perforce\n    command can be executed in the work item generation phase, or during the\n    cook phase (either in-process or out-of-process)."], "extent": [3246, 3459]}], "container": true, "attrs": {"id": "pdg_cooktype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Perforce Operation"], "extent": [3459, 3479], "body": [{"type": "para", "indent": 4, "text": ["This menu is used to select the Perforce command that will be executed."], "extent": [3500, 3577]}], "container": true, "attrs": {"id": "perforceop"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Service Name"], "extent": [2465, 2479], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Cook Type"]}, " is set to the ", {"type": "ui", "text": ["Service"]}, ", this parameter is used to specify the name of the service. For more information on using services, see the ", {"scheme": null, "value": "/tops/services", "type": "link", "text": ["PDG Service Manager"], "fullpath": "/tops/services"}, " documentation."], "extent": [2505, 2715]}], "container": true, "attrs": {"id": "pdg_servicename"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["File Source"], "extent": [3621, 3641], "body": [{"type": "para", "indent": 0, "text": ["This folder provides options for choosing which files will be included in the\nPerforce command."], "extent": [3641, 3739]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["All Files in Workspace"], "extent": [3739, 3763], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Update"]}, " and ", {"type": "strong", "text": ["Sync"]}, " commands only: the entire workspace will be updated or\n    synced when this option is enabled."], "extent": [3783, 3903]}], "container": true, "attrs": {"id": "updateall"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Empty Changelist"], "extent": [3903, 3921], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Change"]}, " command only: when this option is enabled, any currently pending\n    files will ", {"type": "strong", "text": ["not"]}, " be included in the newly created changelist."], "extent": [3947, 4092]}], "container": true, "attrs": {"id": "emptychangelist"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Files"], "extent": [4092, 4106], "body": [{"type": "para", "indent": 4, "text": ["Selects the source of the files that will be included in the Perforce\n    operation. The included files can either be provided by the upstream work\n    item\u2019s results or by a Perforce file pattern."], "extent": [4128, 4331]}], "container": true, "attrs": {"id": "sourcefiles"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["File Tag"], "extent": [4331, 4341], "body": [{"type": "para", "indent": 4, "text": ["A file tag to filter input files by. Only input results with this tag will\n    be included in the work item\u2019s operation."], "extent": [4359, 4485]}], "container": true, "attrs": {"id": "filetag"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["File Pattern"], "extent": [4485, 4499], "body": [{"type": "para", "indent": 4, "text": ["Perforce file pattern to use in the operation."], "extent": [4521, 4573]}], "container": true, "attrs": {"id": "filepattern"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Operation"], "extent": [4573, 4591], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Force Sync"], "extent": [4591, 4604], "body": [{"type": "para", "indent": 4, "text": ["If performing the sync command, this will enable or disable a force sync."], "extent": [4624, 4703]}], "container": true, "attrs": {"id": "forcesync"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Changelist"], "extent": [4703, 4715], "body": [{"type": "para", "indent": 4, "text": ["If the Perforce command involves a changelist, this provides the choice of\n    using the default changelist or a numbered changelist."], "extent": [4742, 4881]}], "container": true, "attrs": {"id": "changelistchoice"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Changelist Number"], "extent": [4881, 4900], "body": [{"type": "para", "indent": 4, "text": ["If the Perforce command involves a changelist and the changelist option is\n    set to 'Numbered', this allows for the changelist number to be specified."], "extent": [4924, 5082]}], "container": true, "attrs": {"id": "changelistnum"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Description"], "extent": [5082, 5095], "body": [{"type": "para", "indent": 4, "text": ["This parameter is used to create the description for any Perforce commands\n    that require a changelist description."], "extent": [5127, 5250]}], "container": true, "attrs": {"id": "changelistdescription"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Common"], "extent": [5250, 5265], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["P4 Config File"], "extent": [5265, 5282], "body": [{"type": "para", "indent": 4, "text": ["Specifies the location of a P4 Config file. This will cause the\n    ", {"tag": "b", "attrs": {}, "type": "xml", "text": ["P4CONFIG"]}, " environment variable to be set in the job\u2019s environment."], "extent": [5305, 5451]}], "container": true, "attrs": {"id": "p4configfile"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Override Perforce Path"], "extent": [5451, 5475], "body": [{"type": "para", "indent": 4, "text": ["This allows the path to the ", {"tag": "i", "attrs": {}, "type": "xml", "text": ["p4"]}, " executable to be completely\n    overwritten with a custom path."], "extent": [5497, 5604]}], "container": true, "attrs": {"id": "perforcebin"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Schedulers"], "extent": [5604, 5621], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["TOP Scheduler Override"], "extent": [5496, 5520], "body": [{"type": "para", "indent": 4, "text": ["This parameter overrides the TOP scheduler for this node."], "extent": [5543, 5606]}], "container": true, "attrs": {"id": "topscheduler"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Schedule When"], "extent": [9609, 9624], "body": [{"type": "para", "indent": 4, "text": ["When enabled, this parameter can be used to specify an expression that determines which work items from the node should be scheduled. If the expression returns zero for a given work item, that work item will immediately be marked as cooked instead of being queued with a scheduler. If the expression returns a non-zero value, the work item is scheduled normally."], "extent": [9651, 10021]}], "container": true, "attrs": {"id": "pdg_schedulewhen"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Work Item Label"], "extent": [8474, 8491], "body": [{"type": "para", "indent": 4, "text": ["Determines how the node should label its work items. This parameter allows you to assign non-unique label strings to your work items which are then used to identify the work items in the attribute panel, task bar, and scheduler job names."], "extent": [8519, 8763]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Use Default Label"], "extent": [8763, 8787], "body": [{"type": "para", "indent": 8, "text": ["The work items in this node will use the default label from the TOP network, or have no label if the default is unset."], "extent": [8787, 8915]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Inherit From Upstream Item"], "extent": [8915, 8948], "body": [{"type": "para", "indent": 8, "text": ["The work items inherit their labels from their parent work items.        "], "extent": [8948, 9031]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Custom Expression"], "extent": [9031, 9055], "body": [{"type": "para", "indent": 8, "text": ["The work item label is set to the ", {"type": "ui", "text": ["Label Expression"]}, " custom expression which is evaluated for each item."], "extent": [9055, 9171]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Node Defines Label"], "extent": [9171, 9196], "body": [{"type": "para", "indent": 8, "text": ["The work item label is defined in the node\u2019s internal logic."], "extent": [9196, 9266]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_workitemlabel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Label Expression"], "extent": [9266, 9284], "body": [{"type": "para", "indent": 4, "text": ["When on, this parameter specifies a custom label for work items created by this node. The parameter can be an expression that includes references to work item attributes or built-in properties. For example, ", {"type": "code", "text": ["$OS: @pdg_frame"]}, " will set the label of each work item based on its frame value."], "extent": [9316, 9609]}], "container": true, "attrs": {"id": "pdg_workitemlabelexpr"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Work Item Priority"], "extent": [6495, 6515], "body": [{"type": "para", "indent": 4, "text": ["This parameter determines how the current scheduler prioritizes the work items in this node."], "extent": [6546, 6644]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Inherit From Upstream Item"], "extent": [6644, 6677], "body": [{"type": "para", "indent": 11, "text": ["The work items inherit their priority from their parent items. If a work item has no parent, its priority is set to 0."], "extent": [6677, 6808]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Custom Expression"], "extent": [6808, 6832], "body": [{"type": "para", "indent": 11, "text": ["The work item priority is set to the value of ", {"type": "ui", "text": ["Priority Expression"]}, "."], "extent": [6832, 6915]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Node Defines Priority"], "extent": [6915, 6943], "body": [{"type": "para", "indent": 7, "text": ["The work item priority is set based on the node\u2019s own internal priority calculations."], "extent": [6943, 7048]}, {"type": "para", "indent": 7, "text": ["This option is only available on the ", {"scheme": "Icon", "value": "MISC/python.svg", "type": "link", "text": "", "fullpath": "/nodes/top/MISC/python.svg"}, " ", {"scheme": "Node", "value": "/nodes/top/pythonprocessor", "type": "link", "text": ["Python Processor TOP"], "fullpath": "/nodes/top/pythonprocessor"}, ", ", {"scheme": "Icon", "value": "TOP/ropfetch.svg", "type": "link", "text": "", "fullpath": "/nodes/top/TOP/ropfetch.svg"}, " ", {"scheme": "Node", "value": "/nodes/top/ropfetch", "type": "link", "text": ["ROP Fetch TOP"], "fullpath": "/nodes/top/ropfetch"}, ", and ROP Output TOP nodes. These nodes define their own prioritization schemes that are implemented in their node logic."], "extent": [7048, 7344]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_workitempriority"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Priority Expression"], "extent": [7344, 7365], "body": [{"type": "para", "indent": 4, "text": ["This parameter specifies an expression for work item priority. The expression is evaluated for each work item in the node."], "extent": [7400, 7528]}, {"type": "para", "indent": 4, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Work Item Priority"]}, " is set to ", {"type": "ui", "text": ["Custom Expression"]}, "."], "extent": [7528, 7627]}], "container": true, "attrs": {"id": "pdg_workitempriorityexpr"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["Perforce"], "summary": ["Execute Perforce commands through PDG"], "included": ["/nodes/top/processor_common"]}