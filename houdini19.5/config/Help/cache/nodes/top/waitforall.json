{"type": "root", "attrs": {"type": "node", "context": "top", "internal": "waitforall", "icon": "TOP/gatherall", "since": "17.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Wait for All"], "extent": [92, 109]}, {"type": "summary", "indent": 0, "text": ["Waits for all upstream work items to complete."], "extent": [109, 165]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [165, 180], "body": [{"type": "para", "indent": 0, "text": ["This node puts all input work items into a single partition with an ", {"type": "code", "text": ["index"]}, " of 0.\nThis creates dependencies on all input work items, so this node waits for all upstream work to finish.\nYou will often use this at the end of the network (before cleanup and notification nodes),\nand also in the network where you need everything in a branch to finish before moving on to the next step."], "extent": [180, 566]}]}, {"level": 2, "id": "parts", "container": true, "type": "h", "indent": 0, "text": ["Partition nodes"], "extent": [566, 596], "body": [{"type": "para", "indent": 0, "text": ["Wait for All is a type of ", {"scheme": null, "value": "/tops/intro#parts", "type": "link", "text": ["partitioner"], "fullpath": "/tops/intro#parts", "fragment": "#parts"}, ".\nDifferent partition nodes group together upstream work items in different ways.\nThe main effect of partitioning items is that the partition only proceeds after all work items in the partition finish.\nPartitioning also groups together the attributes of the individual work items into list attributes on the partition."], "extent": [596, 975]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [975, 987], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Merge Attributes"], "extent": [987, 1011], "body": [{"type": "para", "indent": 0, "text": ["These parameters control how attributes from input work items are merged onto the partitions produced by the node."], "extent": [1011, 1128]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Merge Operations"], "extent": [2100, 2118], "body": [{"type": "para", "indent": 4, "text": ["Defines the number of attribute merge operations to perform on the partitioner node. The operations are used to merge attributes from work items in the partition onto the partition itself. Operations are performed in descending order. Attributes are merged using the first operation with a pattern that matches the attribute."], "extent": [2157, 2488]}], "container": true, "attrs": {"id": "pdg_partitionmergeattributes"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Apply Operation"], "extent": [2488, 2505], "body": [{"type": "para", "indent": 4, "text": ["Specifies the operation to perform to merge incoming attributes onto the partition. Each operation only applies only to the subset of attributes matched using the corresponding ", {"type": "ui", "text": ["To Attributes"]}, " parameter."], "extent": [2543, 2754]}, {"type": "para", "indent": 4, "text": ["The following operations are available:"], "extent": [2754, 2799]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Ignore"], "extent": [2799, 2811], "body": [{"type": "para", "indent": 8, "text": ["Matching attributes are ignored and will not appear on the partition."], "extent": [2811, 2890]}], "container": true}, {"type": "dt", "indent": 4, "text": ["First Value"], "extent": [2890, 2907], "body": [{"type": "para", "indent": 8, "text": ["The value of each matching attribute on the first work item in the partition is kept, and values on subsequent work items are ignored"], "extent": [2907, 3050]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Last Value"], "extent": [3050, 3066], "body": [{"type": "para", "indent": 8, "text": ["The value of each matching attribute on the last work item in the partition is kept."], "extent": [3066, 3160]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Unique Values"], "extent": [3160, 3179], "body": [{"type": "para", "indent": 8, "text": ["The unique values for each matching attribute are merged into an array. Duplicate values are discarded."], "extent": [3179, 3292]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Append to Array"], "extent": [3292, 3313], "body": [{"type": "para", "indent": 8, "text": ["The values for each matching attribute are appended to an array for that attribute. All attribute values from all work items are kept."], "extent": [3313, 3457]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Minimum"], "extent": [3457, 3470], "body": [{"type": "para", "indent": 8, "text": ["The minimum value for each matching attribute is kept."], "extent": [3470, 3534]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Maximum"], "extent": [3534, 3547], "body": [{"type": "para", "indent": 8, "text": ["The maximum value for each matching attribute is kept."], "extent": [3547, 3611]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Sum"], "extent": [3611, 3620], "body": [{"type": "para", "indent": 8, "text": ["The sum of the values in each matching attribute is stored on the partition."], "extent": [3620, 3706]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Average"], "extent": [3706, 3719], "body": [{"type": "para", "indent": 8, "text": ["The average value of each matching attribute is stored on the partition."], "extent": [3719, 3801]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Mode"], "extent": [3801, 3811], "body": [{"type": "para", "indent": 8, "text": ["The most common value in each matching attribute is kept."], "extent": [3811, 3878]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Median"], "extent": [3878, 3890], "body": [{"type": "para", "indent": 8, "text": ["The middle value in each matching attribute is kept."], "extent": [3890, 3952]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitionmergeoperation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["To Attributes"], "extent": [3952, 3967], "body": [{"type": "para", "indent": 4, "text": ["Specifies which attributes the corresponding ", {"type": "ui", "text": ["Apply Operation"]}, " parameter should apply to. This field can use the ", {"scheme": null, "value": "/tops/attributes#pattern", "type": "link", "text": ["Attribute Pattern Syntax"], "fullpath": "/tops/attributes#pattern", "fragment": "#pattern"}, " to specify multiple attributes."], "extent": [4003, 4207]}], "container": true, "attrs": {"id": "pdg_partitionmergepattern"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Preserve Arrays"], "extent": [4207, 4224], "body": [{"type": "para", "indent": 4, "text": ["When on, the merge operation preserves the original array size of the incoming attributes. The merged array size is determined by the first value found across the input work items. When off, the partitioner flattens the incoming array attributes into a single sequence of values (a single scalar value) and performs the merge operation across all values."], "extent": [4261, 4621]}], "container": true, "attrs": {"id": "pdg_partitionmergepreserve"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [1358, 1373], "body": [{"type": "para", "indent": 0, "text": ["These are advanced parameters that provide finer control over the behavior of\nthe partitioner."], "extent": [1373, 1470]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Partition When"], "extent": [16, 32], "body": [{"type": "para", "indent": 4, "text": ["Determines when the partitioning step is performed on the input work items."], "extent": [60, 141]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Input Items are Generated"], "extent": [141, 172], "body": [{"type": "para", "indent": 8, "text": ["Upstream work items are partitioned once all of them have been generated"], "extent": [172, 254]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Input Items are Cooked"], "extent": [254, 282], "body": [{"type": "para", "indent": 8, "text": ["Upstream work items are partitioned once all of them are cooked. This may be required when the partitioning scheme is based on the results of the work items' execution."], "extent": [282, 460]}, {"type": "para", "indent": 8, "text": ["This makes this partitioner behave like a ", {"scheme": "Node", "value": "/nodes/top/waitforall", "type": "link", "text": ["Wait for All"], "fullpath": "/nodes/top/waitforall"}, " node except that it may create multiple partitions.A"], "extent": [460, 599]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitionwhen"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Partition Target(s)"], "extent": [599, 620], "body": [{"type": "para", "indent": 4, "text": ["Determines which node or nodes(s) should target. Work items in the target nodes are partitioned as soon as they're generated even if the target nodes are not a direct input to this node. The descendants of the target work items are added to the partitions when they become available."], "extent": [654, 943]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Direct Input Nodes"], "extent": [943, 967], "body": [{"type": "para", "indent": 8, "text": ["The partitioner uses work items from its direct input nodes. This is the default behavior"], "extent": [967, 1066]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Upstream Static Nodes"], "extent": [1066, 1093], "body": [{"type": "para", "indent": 8, "text": ["The partitioner will skip over dynamic input nodes and partition work items from the nearest upstream static nodes."], "extent": [1093, 1218]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Custom Target Node"], "extent": [1218, 1242], "body": [{"type": "para", "indent": 8, "text": ["The partitioner will use the node specified using the ", {"type": "ui", "text": ["Custom Target Node"]}, " parameter."], "extent": [1242, 1339]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitiontargettype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Custom Target Node"], "extent": [1339, 1359], "body": [{"type": "para", "indent": 4, "text": ["Specifies the target TOP node for the partition when ", {"type": "ui", "text": ["Partition Targets"]}, " is set to ", {"type": "ui", "text": ["Custom Target Node"]}, ". The partition scheme is applied to the work items in the target TOP node instead of this node\u2019s input work items. The target TOP node must be in the same graph and above this node."], "extent": [1389, 1684]}], "container": true, "attrs": {"id": "pdg_partitiontarget"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ignore Failed Work Items"], "extent": [1684, 1710], "body": [{"type": "para", "indent": 4, "text": ["When this toggle is enabled, the partitioner node will skip input work items that are failed and create partitions from the subset of upstream work items that succeeded. This option is only meaningful if ", {"type": "ui", "text": ["Partition When"]}, " is set to ", {"type": "ui", "text": ["Input Items are Cooked"]}, ", or when the partitioner node is wired into a dynamic node that has upstream failures."], "extent": [1748, 2100]}], "container": true, "attrs": {"id": "pdg_partitionignorefailures"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Split by Attribute"], "extent": [4621, 4641], "body": [{"type": "para", "indent": 4, "text": ["When on, the node splits input work items by the specified attribute(s) before partitioning them. The partitioning logic is evaluated on the list of work items for each distinct attribute value. Work items with different attribute values are always put into different partitions. Multiple attribute names can be specified as a space-separated list."], "extent": [4676, 5030]}], "container": true, "attrs": {"id": "pdg_partitionsplitattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Missing Attribute"], "extent": [5030, 5049], "body": [{"type": "para", "indent": 4, "text": ["Determines how the node handles work items that are missing the split attribute."], "extent": [5085, 5171]}, {"type": "para", "indent": 4, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Split by Attribute"]}, " is ", {"type": "em", "text": ["on"]}, "."], "extent": [5171, 5246]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Ignore Work Item"], "extent": [5246, 5268], "body": [{"type": "para", "indent": 8, "text": ["Work items that are missing the split attribute are ", {"type": "em", "text": ["not"]}, " put into any of the partitions."], "extent": [5268, 5367]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Add Work Item to All Partitions"], "extent": [5367, 5404], "body": [{"type": "para", "indent": 8, "text": ["Work items that are missing the split attribute are put into ", {"type": "em", "text": ["all"]}, " of the partitions."], "extent": [5404, 5499]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Use Default Value"], "extent": [5499, 5522], "body": [{"type": "para", "indent": 8, "text": ["Work items that are missing the split attribute will use the value set by the ", {"type": "ui", "text": ["Default Value"]}, " parameter."], "extent": [5522, 5638]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitionsplitmissing"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Default Value"], "extent": [5638, 5653], "body": [{"type": "para", "indent": 4, "text": ["Specifies the value to use for the split attribute for work items that are missing the attribute."], "extent": [5689, 5792]}, {"type": "para", "indent": 4, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Missing Attribute"]}, " is set to ", {"type": "ui", "text": ["Use Default Value"]}, "."], "extent": [5792, 5890]}], "container": true, "attrs": {"id": "pdg_partitionsplitdefault"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Allow Partial Matches"], "extent": [5890, 5913], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Split by Attribute"]}, " is set to a list of attribute names, this parameter determines how work items with only some of the attributes should be processed. If partial matches are enabled then work items will be added to split groups based on the attributes that do exist. Otherwise, work items with only a subset of the attributes will be excluded from the partitioning step."], "extent": [5949, 6334]}], "container": true, "attrs": {"id": "pdg_partitionsplitpartial"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Set Partition Frame To"], "extent": [8569, 8593], "body": [{"type": "para", "indent": 4, "text": ["Determines how the partitioner should set the frame value on partitions created by this node. If the partitioner already sets a custom frame value, for example like with a ", {"scheme": "Node", "value": "/nodes/top/pythonpartitioner", "type": "link", "text": ["Python Partitioner SOP"], "fullpath": "/nodes/top/pythonpartitioner"}, " or ", {"scheme": "Node", "value": "/nodes/top/partitionbyframe", "type": "link", "text": ["Partition by Frame SOP"], "fullpath": "/nodes/top/partitionbyframe"}, ", then this parameter has no effect."], "extent": [8622, 8941]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [8941, 8951], "body": [{"type": "para", "indent": 8, "text": ["No frame value is set on partitions."], "extent": [8951, 8997]}], "container": true}, {"type": "dt", "indent": 4, "text": ["First Work Item\u2019s Frame"], "extent": [8997, 9026], "body": [{"type": "para", "indent": 8, "text": ["The frame value from the ", {"type": "em", "text": ["first"]}, " work item based on the current ", {"type": "ui", "text": ["Sort Contents By"]}, " sort order is copied onto the partition."], "extent": [9026, 9161]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Last Work Item\u2019s Frame"], "extent": [9161, 9189], "body": [{"type": "para", "indent": 8, "text": ["The frame value from the ", {"type": "em", "text": ["last"]}, " work item based on the current ", {"type": "ui", "text": ["Sort Contents By"]}, " sort order is copied onto the partition."], "extent": [9189, 9323]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Largest Frame"], "extent": [9323, 9342], "body": [{"type": "para", "indent": 8, "text": ["The largest frame value from all work items in the partition is used for the partition\u2019s frame."], "extent": [9342, 9447]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Smallest Frame"], "extent": [9447, 9467], "body": [{"type": "para", "indent": 8, "text": ["The smallest frame value from all work items in the partition is used for the partition\u2019s frame."], "extent": [9467, 9572]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitionframe"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sort Contents By"], "extent": [6334, 6352], "body": [{"type": "para", "indent": 4, "text": ["Determines the order that work items are sorted in when accessing the partitions on this node. This also affects the sort order of output files on the partition."], "extent": [6380, 6547]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [6547, 6557], "body": [{"type": "para", "indent": 8, "text": ["No sorting is applied. The work items in the partition are handled in no particular order."], "extent": [6557, 6657]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Work Item Index"], "extent": [6657, 6678], "body": [{"type": "para", "indent": 8, "text": ["Work items in the partition are sorted based on their index."], "extent": [6678, 6748]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Input Node Order"], "extent": [6748, 6770], "body": [{"type": "para", "indent": 8, "text": ["Work items in the partition are sorted based on the order of input nodes wired into this node. If two work items are from the same input, they are then sorted by index."], "extent": [6770, 6948]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Attribute"], "extent": [6948, 6963], "body": [{"type": "para", "indent": 8, "text": ["Work items in the partition are sorted based on the attribute specified in the ", {"type": "ui", "text": ["Sort Attribute"]}, " field parameter."], "extent": [6963, 7087]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "pdg_partitionsort"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sort Direction"], "extent": [7087, 7103], "body": [{"type": "para", "indent": 4, "text": ["Determines whether the work items in this node\u2019s partitions are sorted in\n    ascending or descending order."], "extent": [7140, 7254]}], "container": true, "attrs": {"id": "pdg_partitionsortdirection"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sort Attribute"], "extent": [7254, 7270], "body": [{"type": "para", "indent": 4, "text": ["Specifies the name of the attribute to sort by."], "extent": [7304, 7357]}, {"type": "para", "indent": 4, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Sort Contents By"]}, " is set to ", {"type": "ui", "text": ["Attribute"]}, "."], "extent": [7357, 7446]}], "container": true, "attrs": {"id": "pdg_partitionsortattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Store Items to Attrib"], "extent": [8242, 8265], "body": [{"type": "para", "indent": 4, "text": ["When on, the list of IDs corresponding to the work items in the partition are written to the specified attribute. The work item IDs are stored as an integer array. This makes it easier to recover the list of partitioned work items downstream of the partitioner node."], "extent": [8297, 8569]}], "container": true, "attrs": {"id": "pdg_partitionidattrib"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [2163, 2172], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/partitionbyattribute", "type": "link", "text": "", "fullpath": "/nodes/top/partitionbyattribute"}], "extent": [2172, 2206]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/partitionbyindex", "type": "link", "text": "", "fullpath": "/nodes/top/partitionbyindex"}], "extent": [2206, 2236]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/top/partitionbyexpression", "type": "link", "text": "", "fullpath": "/nodes/top/partitionbyexpression"}], "extent": [2236, 2271]}], "container": true}], "text": "Related"}], "title": ["Wait for All"], "summary": ["Waits for all upstream work items to complete."], "included": ["/nodes/top/partitioner_common"]}