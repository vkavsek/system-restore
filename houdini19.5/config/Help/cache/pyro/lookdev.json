{"type": "root", "attrs": {}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Pyro workflow"], "extent": [0, 18]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [18, 34], "body": [{"type": "para", "indent": 0, "text": ["The speed and emergent shape of a pyro simulation are controlled by a combination of many parameters. This page contains tips and tricks for effectively working with pyro tools and achieving different simulation looks."], "extent": [34, 255]}, {"type": "para", "indent": 0, "text": ["Before you begin, the following help pages provide an in-depth explanation of pyro:"], "extent": [255, 340]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "intro", "type": "link", "text": ["Introduction to Pyro"], "fullpath": "/pyro/intro"}, " - Describes the various components of a simulation, and covers the relevant operators."], "extent": [340, 459]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "background", "type": "link", "text": ["Understanding how pyro works"], "fullpath": "/pyro/background"}, " - A high-level explanation of how pyro simulations are carried out."], "extent": [459, 572]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "sparsity", "type": "link", "text": ["Sparse vs dense simulations"], "fullpath": "/pyro/sparsity"}, " - Important information regarding sparse pyro simulations."], "extent": [572, 673]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "flames", "type": "link", "text": ["Flames"], "fullpath": "/pyro/flames"}, " - Explains the ", {"type": "code", "text": ["flame"]}, " field."], "extent": [673, 722]}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [722, 742], "body": [{"type": "para", "indent": 0, "text": ["Throughout the prototyping process, it is useful to examine the state of the simulation fields. The ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["Smoke object"], "fullpath": "/nodes/dop/smokeobject_sparse"}, " has a vast array of visualization options for these fields. The help for the ", {"scheme": "Node", "value": "/nodes/dop/scalarfieldvisualization", "type": "link", "text": ["Scalar Field Visualization"], "fullpath": "/nodes/dop/scalarfieldvisualization"}, " and\n", {"scheme": "Node", "value": "/nodes/dop/vectorfieldvisualization", "type": "link", "text": ["Vector Field Visualization"], "fullpath": "/nodes/dop/vectorfieldvisualization"}, " nodes provide more details about the various available options."], "extent": [742, 1158]}, {"type": "para", "indent": 0, "text": ["The most useful visualization mode is ", {"type": "ui", "text": ["Multi Field"]}, ", since it displays all of the volumes that would be seen when rendering. The help for ", {"scheme": "Node", "value": "/nodes/dop/multifieldvisualization", "type": "link", "text": ["Multi-Field Visualization"], "fullpath": "/nodes/dop/multifieldvisualization"}, " contains through information about the parameters. The most important settings for affecting the\nlook are outlined below."], "extent": [1158, 1482]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": [{"type": "ui", "text": ["Density Field"]}], "extent": [1482, 1501], "body": [{"type": "para", "indent": 4, "text": ["Used for smoke thickness. This should be set to ", {"type": "code", "text": ["density"]}, ". To make the smoke appear thicker, increase the ", {"type": "ui", "text": ["Density Scale"]}, "."], "extent": [1501, 1635]}], "container": true}, {"type": "dt", "indent": 0, "text": [{"type": "ui", "text": ["Diffuse Field"]}], "extent": [1635, 1654], "body": [{"type": "para", "indent": 4, "text": ["Used to tint the smoke. For example, the ", {"scheme": null, "value": "/shelf/spyro_fireball", "type": "link", "text": ["Sparse Fireball"], "fullpath": "/shelf/spyro_fireball"}, " shelf tool sets the ", {"type": "ui", "text": ["Diffuse Field"]}, " to ", {"type": "code", "text": ["density"]}, " and the ", {"type": "ui", "text": ["Diffuse Ramp"]}, " to a constant color. As a result, the visualized smoke appears dark grey."], "extent": [1654, 1890]}], "container": true}, {"type": "dt", "indent": 0, "text": [{"type": "ui", "text": ["Emission Field"]}], "extent": [1890, 1910], "body": [{"type": "para", "indent": 4, "text": ["Used to emit light. This should be set to ", {"type": "code", "text": ["flame"]}, " to ensure that the fiery parts of your simulation glow. ", {"type": "ui", "text": ["Emission Scale"]}, " controls the amount of emission. To get a sharper border for flames, enable ", {"type": "ui", "text": ["Emit Range"]}, " and set it to something narrow, such as ", {"type": "code", "text": ["0.1-0.2"]}, "."], "extent": [1910, 2182]}], "container": true}, {"type": "dt", "indent": 0, "text": [{"type": "ui", "text": ["Emission Color Field"]}], "extent": [2182, 2208], "body": [{"type": "para", "indent": 4, "text": ["Controls the color of the emitted light. This parameter should be set to ", {"type": "code", "text": ["temperature"]}, ". In ", {"type": "ui", "text": ["Physical Blackbody"]}, " mode, the temperature values will get mapped to an emission color and intensity using the blackbody radiation model."], "extent": [2208, 2444]}], "container": true}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["General workflow"], "extent": [2444, 2467], "body": [{"type": "para", "indent": 0, "text": ["Many parameters on the pyro solver have an effect on the simulation results. The ", {"scheme": "Node", "value": "/nodes/dop/pyrosolver_sparse", "type": "link", "text": ["solver\u2019s help page"], "fullpath": "/nodes/dop/pyrosolver_sparse"}, " contains a lot of useful information about its parameters. However, it\u2019s easy to get overwhelmed with the sheer number of settings. It is best to break up the look development process into a sequence of tasks, each one concentrating on additional details that are unlikely to undo the effect of previous settings."], "extent": [2467, 2912]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": [{"scheme": null, "value": "#sourcing", "type": "link", "text": ["Create the source geometry"], "fullpath": "/pyro/lookdev#sourcing", "fragment": "#sourcing"}], "extent": [2912, 2953]}, {"blevel": 2, "type": "ord", "indent": 0, "text": [{"scheme": null, "value": "#sim", "type": "link", "text": ["Set basic simulation parameters"], "fullpath": "/pyro/lookdev#sim", "fragment": "#sim"}], "extent": [2953, 2994]}, {"blevel": 2, "type": "ord", "indent": 0, "text": [{"scheme": null, "value": "#temp", "type": "link", "text": ["Set temperature and buoyancy parameters"], "fullpath": "/pyro/lookdev#temp", "fragment": "#temp"}], "extent": [2994, 3044]}, {"blevel": 2, "type": "ord", "indent": 0, "text": [{"scheme": null, "value": "#flame", "type": "link", "text": ["Set parameters related to the flame field"], "fullpath": "/pyro/lookdev#flame", "fragment": "#flame"}], "extent": [3044, 3097]}, {"blevel": 2, "type": "ord", "indent": 0, "text": [{"scheme": null, "value": "#shape", "type": "link", "text": ["Tune the shape operators"], "fullpath": "/pyro/lookdev#shape", "fragment": "#shape"}], "extent": [3097, 3134]}], "container": true}, {"type": "para", "indent": 0, "text": ["Each step of the above workflow focuses on a specific task, and subsequent steps have minimal effect on results achieved from previous stages. Therefore, the iteration process within each step is confined to a relatively small set of parameters, and iteration over the entire process is kept to a minimum."], "extent": [3134, 3441]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [3441, 3446], "body": [{"type": "para", "indent": 4, "text": ["Steps 2-5 can be done with ", {"type": "ui", "text": ["Minimal OpenCL"]}, ". This parameter is located on the ", {"type": "ui", "text": ["Setup"]}, " tab of the ", {"scheme": "Node", "value": "/nodes/sop/pyrosolver", "type": "link", "text": ["Pyro Solver SOP"], "fullpath": "/nodes/sop/pyrosolver"}, ", and provides interactive real-time simulation performance. For more information, see ", {"scheme": null, "value": "#minimal", "type": "link", "text": ["Minimal OpenCL Solve"], "fullpath": "/pyro/lookdev#minimal", "fragment": "#minimal"}, "."], "extent": [3446, 3709]}], "container": true}], "container": true, "role": "item_group"}, {"level": 3, "id": "sourcing", "container": true, "type": "h", "indent": 0, "text": ["Source geometry"], "extent": [3709, 3744], "body": [{"type": "para", "indent": 0, "text": ["Source geometry has a large impact on the shape and behavior of newly-injected smoke. In this step, you should focus on creating sources that will introduce interesting variations to the simulation, without worrying about details of the final result."], "extent": [3744, 3997]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["For static smoke and fire simulations, add noise to the sourced values."], "extent": [3997, 4071], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["You can use the ", {"scheme": "Node", "value": "/nodes/sop/attribnoise", "type": "link", "text": ["Attribute Noise SOP"], "fullpath": "/nodes/sop/attribnoise"}, " to add noise to the sourced point attributes. "], "extent": [4071, 4183]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["With smoke, the noise will prevent constant, uninteresting emission."], "extent": [4183, 4258]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Source noise for fire is important for capturing the look of the base. To get the cellular look for the fire base, use ", {"type": "ui", "text": ["Worley (cellular) F2-F1"]}, " for the ", {"type": "ui", "text": ["Noise Type"]}, "."], "extent": [4258, 4436]}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["For spreading fire, you should also ensure that the spreading behavior looks right before proceeding with the pyro simulation."], "extent": [4436, 4565], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["The ", {"scheme": "Node", "value": "/nodes/sop/pyrosourcespread", "type": "link", "text": ["Pyro Source Spread SOP"], "fullpath": "/nodes/sop/pyrosourcespread"}, " is specifically designed for simulation of fire spreading."], "extent": [4565, 4686]}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["For explosions, you can use the ", {"scheme": "Node", "value": "/nodes/sop/pyroburstsource", "type": "link", "text": ["Pyro Burst Source SOP"], "fullpath": "/nodes/sop/pyroburstsource"}, " to create the sourcing for the core of the explosion and shape how the explosion will look. You can also add trails using the ", {"scheme": "Node", "value": "/nodes/sop/pyrotrailpath", "type": "link", "text": ["Pyro Trail Path"], "fullpath": "/nodes/sop/pyrotrailpath"}, " and ", {"scheme": "Node", "value": "/nodes/sop/pyrotrailsource", "type": "link", "text": ["Pyro Trail Source"], "fullpath": "/nodes/sop/pyrotrailsource"}, " SOPs. For more information see ", {"scheme": null, "value": "explode", "type": "link", "text": ["Creating Explosions"], "fullpath": "/pyro/explode"}, "."], "extent": [4686, 5048]}], "container": true}, {"type": "para", "indent": 0, "text": ["You should also determine the ranges of sourced values in this step, especially for ", {"type": "code", "text": ["temperature"]}, " and ", {"type": "code", "text": ["flame"]}, " sources. To this end, you can use the ", {"scheme": "Node", "value": "/nodes/sop/attribpromote", "type": "link", "text": ["Attribute Promote SOP"], "fullpath": "/nodes/sop/attribpromote"}, " to calculate the maximum of the relevant point attributes (prior to rasterization). This information will be\nuseful later for setting parameters on the solver."], "extent": [5048, 5404]}]}, {"level": 3, "id": "sim", "container": true, "type": "h", "indent": 0, "text": ["Basic simulation parameters"], "extent": [5404, 5446], "body": [{"type": "para", "indent": 0, "text": ["Once sourcing is finalized, next step is to set the basic properties to ensure that the simulation works correctly. These settings can likely be set once and forgotten, assuming reasonable values are used."], "extent": [5446, 5654]}, {"level": 4, "type": "sep", "indent": 0, "text": [" Smoke Object "], "extent": [5654, 5677]}, {"type": "table", "thead": [], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Voxel Size"]}, " "], "role": "td", "extent": [5677, 5695], "container": true, "attrs": {"width": "25%"}}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Controls the simulation resolution, with ", {"type": "em", "text": ["lower"]}, " values giving higher resolution. This value should be set relative to the simulation scale. For example, the default value of ", {"type": "code", "text": ["0.1"]}, " makes sense for an explosion with a unit-sized base. On the other hand, if the base of the explosion is ", {"type": "code", "text": ["100"]}, " units in size, then the ", {"type": "ui", "text": ["Voxel Size"]}, " should be increased accordingly."], "extent": [5711, 6079]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 4, "role": "item", "extent": [6079, 6088], "body": [{"type": "para", "indent": 8, "text": ["You can rapidly experiment with different simulation settings with a larger voxel size before moving to higher resolution."], "extent": [6088, 6220]}], "container": true}], "container": true, "role": "item_group"}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Boundary Conditions"]}, " "], "role": "td", "extent": [6220, 6246], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["If you need to add a ground plane or a solid wall to the simulation, use the parameters in this section."], "extent": [6246, 6356]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 4, "role": "item", "extent": [6356, 6365], "body": [{"type": "para", "indent": 8, "text": [{"type": "ui", "text": ["Domain"]}, " visualization on the  ", {"type": "ui", "text": ["Guides \u25b8 Visualization"]}, " tab is useful for determining\n        where the simulation will take place."], "extent": [6365, 6510]}], "container": true}], "container": true, "role": "item_group"}]}], "divider": false}]}, {"level": 4, "type": "sep", "indent": 0, "text": [" Pyro Solver "], "extent": [6510, 6532]}, {"type": "table", "thead": [], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Max Timesteps"]}, " "], "role": "td", "extent": [6532, 6553], "container": true, "attrs": {"width": "25%"}}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["The maximum number of timesteps that the solver can take per frame. The default value of ", {"type": "code", "text": ["1"]}, " should be sufficient for smoke, but this value should be increased if the simulated fluid will have fast velocities."], "extent": [6569, 6784]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Padding"]}, " "], "role": "td", "extent": [6784, 6798], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Specifies the amount of free space that the solver will try to maintain around the simulated smoke. It is important that this buffer is large enough to accommodate motion within a timestep. However, setting this parameter too large will slow down the simulations."], "extent": [6798, 7067]}]}], "divider": false}]}]}, {"level": 3, "id": "temp", "container": true, "type": "h", "indent": 0, "text": ["Temperature and buoyancy parameters"], "extent": [7067, 7118], "body": [{"type": "para", "indent": 0, "text": ["Through buoyancy, the ", {"type": "code", "text": ["temperature"]}, " field has a large impact on the bulk motion of the smoke. To properly control this force, you need to specify the physical meaning behind the values in the field, by setting the ", {"type": "ui", "text": ["Ambient Temp (K)"]}, " and ", {"type": "ui", "text": ["Reference Temp (K)"]}, " parameters. From there, the buoyancy force can be further tweaked with ", {"type": "ui", "text": ["Buoyancy Scale"]}, ", without modifying the temperature range."], "extent": [7118, 7514]}, {"level": 4, "type": "sep", "indent": 0, "text": [" Smoke Object "], "extent": [7514, 7537]}, {"type": "table", "thead": [], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Ambient Temp (K)"]}, " "], "role": "td", "extent": [7537, 7561], "container": true, "attrs": {"width": "25%"}}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["See the parameter of the same name on the solver for more information. The values of these two parameters should be linked."], "extent": [7577, 7706]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Reference Temp (K)"]}, " "], "role": "td", "extent": [7706, 7731], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["See the parameter of the same name on the solver for more information. The values of these two parameters should be linked. You should adjust this parameter until emission colors look correct in the viewport."], "extent": [7731, 7945]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Temperature Scale"]}, " "], "role": "td", "extent": [7945, 7969], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Acts as a multiplier on the ", {"type": "code", "text": ["temperature"]}, " field for emission color purposes. ", {"type": "ui", "text": ["Ambient Temp (K)"]}, " and ", {"type": "ui", "text": ["Reference Temp (K)"]}, " should be linked to their respective parameters on the pyro solver, so that changing their values will also affect the simulation. The ", {"type": "ui", "text": ["Temperature Scale"]}, " parameter allows you to tweak emission colors without affecting the solver\u2019s settings."], "extent": [7969, 8343]}]}], "divider": false}]}, {"level": 4, "type": "sep", "indent": 0, "text": [" Pyro Solver "], "extent": [8343, 8365]}, {"type": "table", "thead": [], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Ambient Temp (K)"]}, " "], "role": "td", "extent": [8365, 8389], "container": true, "attrs": {"width": "25%"}}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Specifies temperature of the surrounding air. A value of ", {"type": "code", "text": ["0"]}, " in the ", {"type": "code", "text": ["temperature"]}, " field gets mapped to ", {"type": "ui", "text": ["Ambient Temp (K)"]}, "."], "extent": [8405, 8535]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Reference Temp (K)"]}, " "], "role": "td", "extent": [8535, 8560], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Physical temperature corresponding to the value of ", {"type": "code", "text": ["1"]}, " in the ", {"type": "code", "text": ["temperature"]}, " field. The highest sourced temperature will equal ", {"type": "code", "text": ["Ambient Temp (K) + T * (Reference Temp (K) - Ambient Temp (K))"]}, ", where ", {"type": "code", "text": ["T"]}, " is the maximum incoming temperature value (as determined for sourcing, see above). Thus, ", {"type": "code", "text": ["Reference Temp (K)"]}, " should be set so that this highest sourced temperature is physically sensible, and the emission colors look correct in the viewport."], "extent": [8560, 9010]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [9010, 9020], "body": [{"type": "para", "indent": 8, "text": ["These parameter values are in Kelvin. The conversion formulas between Kelvin and other common temperature units are given in the table below."], "extent": [9020, 9171]}, {"type": "table", "thead": [], "body": [{"type": "row", "body": [{"type": "cell", "indent": 8, "text": [{"scheme": null, "value": "", "type": "link", "text": "", "exists": true}, " "], "role": "td", "extent": [9171, 9185], "container": true}, {"type": "cell", "indent": 12, "text": ["To Kelvin "], "role": "td", "extent": [9185, 9210], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 16, "text": ["From Kelvin (", {"type": "code", "text": ["K"]}, ")"], "extent": [9210, 9244]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 8, "text": ["Degrees Celsius (", {"type": "code", "text": ["C"]}, ") "], "role": "td", "extent": [9244, 9276], "container": true}, {"type": "cell", "indent": 12, "text": [{"type": "code", "text": ["C + 273.15"]}, " "], "role": "td", "extent": [9276, 9303], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 16, "text": [{"type": "code", "text": ["K - 273.15"]}], "extent": [9303, 9332]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 8, "text": ["Degrees Fahrenheit (", {"type": "code", "text": ["F"]}, ") "], "role": "td", "extent": [9332, 9367], "container": true}, {"type": "cell", "indent": 12, "text": [{"type": "code", "text": ["(F - 32) * 5/9 + 273.15"]}, " "], "role": "td", "extent": [9367, 9407], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 16, "text": [{"type": "code", "text": ["(K - 273.15) * 9/5 + 32"]}], "extent": [9407, 9450]}]}], "divider": false}]}], "container": true}], "container": true, "role": "item_group"}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Gravity"]}, " "], "role": "td", "extent": [9450, 9464], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Magnitude and direction of the gravitational force, which affects strength of the buoyancy forces. You should adjust these parameters for the scene scale and then leave them alone. ", {"type": "ui", "text": ["Buoyancy Scale"]}, " can be used to fine-tune the effect of buoyancy."], "extent": [9464, 9718]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Buoyancy Scale"]}, " "], "role": "td", "extent": [9718, 9739], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Multiplier on strength of the buoyancy force. Use this parameter to tweak buoyancy to ensure that your smoke rises at the desired speed."], "extent": [9739, 9881]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "ui", "text": ["Cooling Rate"]}, " "], "role": "td", "extent": [9881, 9900], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 4, "text": ["Rate at which the ", {"type": "code", "text": ["temperature"]}, " field cools toward the ambient temperature. When searching for an appropriate value, watch for where the smoke\u2019s rising rate begins to slow down."], "extent": [9900, 10083]}]}], "divider": false}]}]}, {"level": 3, "id": "flames", "container": true, "type": "h", "indent": 0, "text": ["Flames parameters"], "extent": [10083, 10118], "body": [{"type": "para", "indent": 0, "text": ["Parameters on the solver\u2019s ", {"type": "ui", "text": ["Flames"]}, " tab have a significant impact on simulations that make use of the ", {"type": "code", "text": ["flame"]}, " field. You should begin by tuning the ", {"type": "ui", "text": ["Flame Lifespan"]}, " parameter to ensure that the ", {"type": "code", "text": ["flame"]}, " values persist for the desired amount of time. From there, you can enable the outputs that you want to\ngenerate from the ", {"type": "code", "text": ["flame"]}, " field and tune their activation ranges. See the ", {"scheme": null, "value": "flames", "type": "link", "text": ["Flames"], "fullpath": "/pyro/flames"}, " page for more information about these outputs."], "extent": [10118, 10566]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [10566, 10571], "body": [{"type": "para", "indent": 4, "text": ["Knowing the incoming ", {"type": "code", "text": ["flame"]}, " values from sourcing is very helpful when searching for flame ranges. You should calculate the maximum incoming values when working on the sources."], "extent": [10571, 10753]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 3, "id": "shape", "container": true, "type": "h", "indent": 0, "text": ["Shape operators"], "extent": [10753, 10785], "body": [{"type": "para", "indent": 0, "text": ["The previous steps are meant to determine the bulk shape and motion of the simulated smoke. Once you are happy with these bulk characteristics, you can use shape operators to add details to the simulation. The\n", {"scheme": "Node", "value": "/nodes/dop/pyrosolver_sparse", "type": "link", "text": ["pyro solver"], "fullpath": "/nodes/dop/pyrosolver_sparse"}, " has 4 built-in shape operators:\n", {"type": "em", "text": ["dissipation"]}, ", ", {"type": "em", "text": ["disturbance"]}, ", ", {"type": "em", "text": ["shredding"]}, ", and ", {"type": "em", "text": ["turbulence"]}, "."], "extent": [10785, 11131]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Dissipation"], "extent": [11131, 11144], "body": [{"type": "para", "indent": 4, "text": ["Reduces the ", {"type": "code", "text": ["density"]}, " values over time, so that smoke fades and eventually disappears. It is important to set an appropriate value for the ", {"type": "ui", "text": ["Clamp Below"]}, " parameter when performing a sparse simulation. Otherwise, tiny density values will linger and unnecessarily inflate the active simulation region."], "extent": [11144, 11450]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Disturbance and shredding"], "extent": [11450, 11477], "body": [{"type": "para", "indent": 4, "text": ["Applies random forces to break up the simulation. Disturbance exerts linear accelerations and is useful for breaking up smooth smoke caps. Shredding rotates velocities to redirect the flow. Shredding is effective for adding chaotic motion without speeding up or slowing down the flow. It is     especially useful for fire simulations, which are dominated by vertical licks when no shredding is used."], "extent": [11477, 11882]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Turbulence"], "extent": [11882, 11894], "body": [{"type": "para", "indent": 4, "text": ["Can be used to add powerful large-scale noise to the simulation velocities."], "extent": [11894, 11975]}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": ["Each shaping operation has a checkbox to turn it on and a scaling factor to specify how strongly to apply it. There is also a tab containing further parameters for each built-in operator. A common theme here is the control field, which can be used to spatially attenuate strength of the shaping operator. When enabled, the value of the ", {"type": "ui", "text": ["Control Field"]}, " is fitted from the ", {"type": "ui", "text": ["Control Range"]}, " to ", {"type": "code", "text": ["0-1"]}, ". This is further passed through the ", {"type": "ui", "text": ["Control Ramp"]}, " if ", {"type": "ui", "text": ["Remap Control Field"]}, " is enabled. The remapped control value is then applied as a scaling factor on top of the global strength. Control fields allow you to\nbuild a mask out of desired regions and only apply a shaping operator there."], "extent": [11975, 12667]}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips and troubleshooting"], "extent": [12667, 12698], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "ui", "text": ["Advection-Reflection"]}, " can greatly help with vortex preservation."], "extent": [12698, 12769], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "ui", "text": ["Disabled"]}, " turns off advection-reflection. This is the safest option for simulations that involve the ", {"type": "code", "text": ["divergence"]}, " field (such as explosions)."], "extent": [12769, 12920]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "ui", "text": ["Single-Project"]}, " uses a cheap reflection method that does not add much overhead to the simulation."], "extent": [12920, 13027]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "ui", "text": ["Double-Project"]}, " exhibits best vortex preservation qualities. However, this method effectively doubles the number of substeps and is significantly more expensive than ", {"type": "ui", "text": ["Single-Project"]}, "."], "extent": [13027, 13223]}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"type": "ui", "text": ["Time Scale"]}, " parameter can be animated. This can be especially useful with simulations of explosions, where a high time scale at the start can capture the violent initial blast."], "extent": [13223, 13410]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["When ", {"type": "ui", "text": ["Mode"]}, " for disturbance is set to ", {"type": "ui", "text": ["Continuous"]}, ", independent noise will be added at every voxel, creating disturbance at the highest representable scale. This is useful for an avalanche-type effect. However, if voxel size is too small, disturbance in continuous mode can lead to a noisy, undesirable look."], "extent": [13410, 13726]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can attach microsolvers to the pyro solver\u2019s ", {"type": "em", "text": ["Forces"]}, " input to apply custom forces to the smoke."], "extent": [13726, 13830]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you notice staircase-like artifacts in a sparse simulation, then there is insufficient padding. To fix this problem, increase ", {"type": "ui", "text": ["Max Substeps"]}, " and/or increase ", {"type": "ui", "text": ["Padding"]}, " on the ", {"type": "ui", "text": ["Advanced"]}, " tab."], "extent": [13830, 14032]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If sources and simulation are very fast, than insufficient substepping will manifest as noticeable streaks. Increase ", {"type": "ui", "text": ["Max Substeps"]}, " to fix this problem."], "extent": [14032, 14190]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If the smoke doesn\u2019t seem to be interacting with collision geometry, increasing ", {"type": "ui", "text": ["IOP Iterations"]}, " on the ", {"type": "ui", "text": ["Advanced \u25b8 Collisions"]}, " tab may help."], "extent": [14190, 14339]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you notice thin axis-aligned streaks of smoke, enable hourglass filtering. Its controls can be found on the ", {"type": "ui", "text": ["Advanced \u25b8 Hourglass Filtering"]}, " tab of the solver."], "extent": [14339, 14507]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Sparse solvers perform advection in batches to speed up the simulation time, which results in higher peak memory utilization. If you're experiencing issues with memory usage, you can limit the batch size in ", {"type": "ui", "text": ["Advanced \u25b8 Advection \u25b8 Max Batch Size"]}, "."], "extent": [14507, 14762]}], "container": true}, {"level": 3, "id": "minimal", "container": true, "type": "h", "indent": 0, "text": ["Minimal OpenCL Solve"], "extent": [14762, 14800], "body": [{"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 0, "role": "item", "extent": [14800, 14809], "body": [], "container": true, "attrs": {"src": "/videos/minimal_solve.mp4"}}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["The ", {"scheme": "Node", "value": "/nodes/sop/pyrosolver", "type": "link", "text": ["Pyro Solver SOP"], "fullpath": "/nodes/sop/pyrosolver"}, " has the ability to perform a ", {"type": "ui", "text": ["Minimal OpenCL"]}, " solve, which is useful for very rapid prototyping. This option is located on the ", {"type": "ui", "text": ["General"]}, " tab in the ", {"type": "ui", "text": ["Simulation Type"]}, " dropdown menu. It allows for interactive manipulation of parameters during a running simulation, which can give you quick feedback of their effects on the simulation."], "extent": [14846, 15228]}, {"type": "para", "indent": 0, "text": ["When this option is selected, some features of the solver are turned off to to ensure that all simulation data can stay in video memory, avoiding costly copies that are necessary when only ", {"type": "ui", "text": ["Use OpenCL"]}, " is turned on."], "extent": [15228, 15447]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [15447, 15452], "body": [{"type": "para", "indent": 4, "text": ["Turn on ", {"type": "ui", "text": ["Live Parameter Display during Playback"]}, " in the ", {"type": "ui", "text": ["Edit"]}, " menu to make sure the solver interface updates as you are tweaking parameters in the midst of a simulation."], "extent": [15452, 15632]}], "container": true}, {"type": "tip", "indent": 0, "role": "item", "extent": [15632, 15637], "body": [{"type": "para", "indent": 4, "text": ["You can animate the ", {"type": "ui", "text": ["Center"]}, " parameter on the\n    ", {"scheme": "Node", "value": "/nodes/sop/pyrosolver", "type": "link", "text": ["Pyro Solver SOP"], "fullpath": "/nodes/sop/pyrosolver"}, " to move the simulation container. For\n    example, you can do this to track the world-space motion of a moving torch as you\n    are simulating its fire."], "extent": [15637, 15885]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["To produce fast simulations, ", {"type": "ui", "text": ["Minimal OpenCL"]}, " uses the OpenCL device and imposes the following limitations. "], "extent": [15885, 15997]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Simulation caching is disabled. This means that you cannot scrub the timeline to view saved results."], "extent": [15997, 16100]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "ui", "text": ["Advection-Reflection"]}, " is not supported."], "extent": [16100, 16145]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Only a dense simulation can be performed."], "extent": [16145, 16189]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Dynamic resizing of the container is turned off. A static size needs to be set under the ", {"type": "ui", "text": ["Bound"]}, " tab."], "extent": [16189, 16295]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The solver will not dynamically substep based on the ", {"type": "ui", "text": ["CFL Condition"]}, "."], "extent": [16295, 16369]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Sourcing and collider support are more restricted. A frame range needs to be specified for both, and the solver will loop these input sources throughout the simulation. Additionally, the collider must be converted into a signed distance field (called ", {"type": "code", "text": ["collision"]}, ") and a velocity field (", {"type": "code", "text": ["v"]}, ")."], "extent": [16369, 16664]}], "container": true}, {"type": "para", "indent": 0, "text": ["There is more you can do to increase performance:"], "extent": [16664, 16715]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["The use of a ", {"scheme": "Node", "value": "/nodes/sop/pyrobakevolume", "type": "link", "text": ["Pyro Bake Volume SOP"], "fullpath": "/nodes/sop/pyrobakevolume"}, " node should be avoided during look development to maintain performance."], "extent": [16715, 16849]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Make sure that the Pyro Solver SOP node\u2019s field and shape guides are turned off: ", {"type": "ui", "text": ["Fields \u25b8 Field Guides \u25b8 Field Guide \u25b8 No Guide"]}, " and the appropriate parameter in the ", {"type": "ui", "text": ["Shape"]}, " tab."], "extent": [16849, 17035]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Use looping sources where possible."], "extent": [17035, 17073]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you use microsolvers, check if the ", {"type": "ui", "text": ["Use OpenCL"]}, " option is turned on to avoid bottlenecks."], "extent": [17073, 17171]}], "container": true}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [17171, 17176], "body": [{"type": "para", "indent": 4, "text": ["The ", {"scheme": "Shelf", "value": "../shelf/spyro_simplegroundexplosion", "type": "link", "text": ["Simple GPU Ground Explosion"], "fullpath": "/shelf/spyro_simplegroundexplosion"}, " is a very good start to test performance and solver settings."], "extent": [17176, 17320]}], "container": true}], "container": true, "role": "item_group"}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [17320, 17326], "body": [{"type": "para", "indent": 4, "text": ["Best performance is achieved when the OpenCL device is set to the GPU that is responsible for rendering the viewport."], "extent": [17326, 17450]}], "container": true}], "container": true, "role": "item_group"}]}]}], "title": ["Pyro workflow"]}