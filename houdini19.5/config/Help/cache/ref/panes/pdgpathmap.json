{"type": "root", "attrs": {}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["PDG Path Map"], "extent": [0, 17]}, {"type": "summary", "indent": 0, "text": ["The PDG Path Map manages the mapping of paths between file systems."], "extent": [17, 93]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [93, 108], "body": [{"type": "para", "indent": 0, "text": ["TOPs work with compute farms that may have various file systems. For example, you can use a Windows machine and a Linux-based farm. This creates a problem on how to map file paths from one file system to another."], "extent": [108, 323]}, {"type": "para", "indent": 0, "text": ["For example ", {"type": "code", "text": ["\\\\allfiles\\shot1\\file1.bgeo.sc"]}, " < \u2192 ", {"type": "code", "text": ["/mnt/hq/shot1/file1/bgeo.sc"]}, ". To address this, the ", {"type": "ui", "text": ["PDG Path Map"]}, " in TOPs lets you establish cross-system file path mapping rules."], "extent": [323, 507]}, {"type": "tip_group", "body": [{"ext": null, "type": "tip", "indent": 0, "role": "item", "extent": [507, 513], "body": [{"type": "para", "indent": 4, "text": ["You can chain mapping rules with the ", {"type": "ui", "text": ["PDG Path Map"]}, ". For example if ", {"type": "code", "text": ["/mnt/hq"]}, " maps to ", {"type": "code", "text": ["Z:"]}, " in zone ", {"type": "code", "text": ["WIN"]}, ", and ", {"type": "code", "text": ["Z:"]}, " maps to ", {"type": "code", "text": ["//allfiles"]}, " in the same zone ", {"type": "code", "text": ["WIN"]}, ", then ", {"type": "code", "text": ["/mnt/hq"]}, " will map to ", {"type": "code", "text": ["//allfiles"]}, "."], "extent": [513, 722]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["How mapping works"], "extent": [722, 746], "body": [{"type": "para", "indent": 0, "text": ["There is one path mapping table per file and is shared between every scheduler inside it. File attributes and file results store their ", {"type": "code", "text": ["original"]}, " path, and their ", {"type": "code", "text": ["mapped"]}, " path is generated on demand using the ", {"type": "ui", "text": ["PDG Path Map"]}, "."], "extent": [746, 975]}, {"type": "para", "indent": 0, "text": ["The mapping table is stored in a ", {"type": "code", "text": ["PDG_PATHMAP"]}, " global variable, which is saved in the HIP file. When you execute PDG jobs, this ", {"type": "code", "text": ["PDG_PATHMAP"]}, " is set in your environment and is used to determine the local version of a given file path. This happens automatically when you use the PDG work item API."], "extent": [975, 1273]}, {"type": "note_group", "body": [{"ext": null, "type": "note", "indent": 0, "text": ["Notes"], "role": "item", "extent": [1273, 1286], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Only the first matched rule applies for a given zone. For example if there are 2 rules for zone ", {"type": "code", "text": ["WIN"]}, " which map a given source path to different destination paths, then ", {"type": "em", "text": ["only"]}, " the first rule applies. "], "extent": [1286, 1493]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["The ", {"type": "ui", "text": ["PDG Path Map"]}, " does ", {"type": "em", "text": ["not"]}, " have checks to verify whether or not a file path exists."], "extent": [1493, 1589]}], "container": true}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Zones"], "extent": [1589, 1601], "body": [{"type": "para", "indent": 0, "text": ["PDG automatically determines the local Zone that matches your workstation\u2019s platform: ", {"type": "code", "text": ["LINUX"]}, ", ", {"type": "code", "text": ["WIN"]}, ", or ", {"type": "code", "text": ["MAC"]}, "."], "extent": [1601, 1714]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can override this with parameters on the Scheduler nodes, which apply to all jobs scheduled by the Schedulers."], "extent": [1714, 1831]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can globally override this with the environment variable ", {"type": "code", "text": ["$PDG_PATHMAP_ZONE"]}, "."], "extent": [1831, 1915]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Custom zones are useful for more complex farm set-ups. For example, a hybrid cloud involving ", {"type": "code", "text": ["AWS"]}, " and ", {"type": "code", "text": ["LINUX"]}, "."], "extent": [1915, 2029]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The special ", {"type": "code", "text": ["*"]}, " Zone applies to ", {"type": "em", "text": ["all"]}, " platforms."], "extent": [2029, 2081]}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["PDG Path Map window"], "extent": [2081, 2107], "body": [{"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/ui/pdgpathmap_window1.jpg", "type": "img", "text": ""}], "extent": [2107, 2151]}, {"type": "task_group", "body": [{"ext": null, "type": "task", "indent": 0, "text": [" Open the ", {"type": "ui", "text": ["PDG Path Map"]}, " window"], "role": "item", "extent": [2151, 2191], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["For the ", {"scheme": "Icon", "value": "/icons/MISC/hqueue_logo.svg", "type": "link", "text": "", "fullpath": "/icons/MISC/hqueue_logo.svg"}, " ", {"scheme": "Node", "value": "/nodes/top/hqueuescheduler", "type": "link", "text": ["HQueue Scheduler"], "fullpath": "/nodes/top/hqueuescheduler"}, ", click ", {"type": "ui", "text": ["Load Path Map"]}, " in its parameter settings."], "extent": [2191, 2336]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["For all other schedulers, select ", {"type": "ui", "text": ["PDG Path Map"]}, " from the ", {"scheme": null, "value": "/tops/ui#top_menu", "type": "link", "text": ["Tasks menu"], "fullpath": "/tops/ui#top_menu", "fragment": "#top_menu"}, "."], "extent": [2336, 2435]}], "container": true}], "container": true}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Zone Controls"], "extent": [2435, 2457], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/plus", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/plus"}, " adds a new zone to your PDG path map."], "extent": [2457, 2524]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/minus", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/minus"}, " removes the selected zone."], "extent": [2524, 2580]}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Table Controls"], "extent": [2580, 2603], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/plus", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/plus"}, " adds a new mapping to the table."], "extent": [2603, 2665]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/minus", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/minus"}, " removes the selected mapping from the table."], "extent": [2665, 2739]}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["The Path Map Table"], "extent": [2739, 2766], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Zone"], "extent": [2766, 2773], "body": [{"type": "para", "indent": 4, "text": ["The name of the path mapping zone that this mapping maps to."], "extent": [2773, 2839]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Source Path"], "extent": [2839, 2852], "body": [{"type": "para", "indent": 4, "text": ["The path that is replaced."], "extent": [2852, 2884]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Destination Path"], "extent": [2884, 2903], "body": [{"type": "para", "indent": 4, "text": ["The path that the ", {"type": "ui", "text": ["Source Path"]}, " is replaced with, when running in the given ", {"type": "ui", "text": ["Zone"]}, "."], "extent": [2903, 2996]}], "container": true}], "container": true}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/paste", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/paste"}, " loads the table from the contents of the clipboard."], "extent": [2996, 3077]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Smallicon", "value": "BUTTONS/copy", "type": "link", "text": "", "fullpath": "/ref/panes/BUTTONS/copy"}, " copies the table contents to the clipboard as JSON."], "extent": [3077, 3157]}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Sorting"], "extent": [3157, 3173], "body": [{"type": "para", "indent": 0, "text": ["The PDG Path Map table first sorts by ", {"type": "ui", "text": ["Created by"]}, " to group all the schedulers together. Then, it sorts by ", {"type": "ui", "text": ["Zone"]}, ".  "], "extent": [3173, 3296]}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["API"], "extent": [3296, 3306], "body": [{"type": "para", "indent": 0, "text": ["You can access the Path Map Python API through ", {"scheme": "Py", "value": "pdg.PathMap", "type": "link", "text": "", "fullpath": "/ref/panes/pdg.PathMap"}, "."], "extent": [3306, 3373]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Porting from 18.0"], "extent": [3373, 3397], "body": [{"type": "para", "indent": 0, "text": ["Scheduler nodes from a previous version of Houdini are automatically set to the ", {"type": "code", "text": ["None"]}, " mode of path mapping, which disables the path mapping logic and instead relies on paths being ", {"type": "code", "text": ["delocalized"]}, " with the tokens ", {"type": "code", "text": ["__PDG_DIR__"]}, ", ", {"type": "code", "text": ["__PDG_TEMP__"]}, "."], "extent": [3397, 3641]}, {"type": "para", "indent": 0, "text": ["If you do ", {"type": "em", "text": ["not"]}, " require path mappings, you can set this to ", {"type": "code", "text": ["Global"]}, "."], "extent": [3641, 3711]}, {"type": "para", "indent": 0, "text": ["If you require path mappings, you should add them with the ", {"type": "ui", "text": ["PDG Path Map"]}, " and then set it to ", {"type": "code", "text": ["Global"]}, "."], "extent": [3711, 3818]}]}], "title": ["PDG Path Map"], "summary": ["The PDG Path Map manages the mapping of paths between file systems."]}