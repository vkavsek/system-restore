{"type": "root", "attrs": {"type": "vex", "context": "all", "tags": "shading, volume", "group": "shading", "showtags": "true"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["gradient"], "extent": [0, 13]}, {"type": "summary", "indent": 0, "text": ["Returns the gradient of a field."], "extent": [79, 119]}, {"type": "usage_group", "body": [{"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["vector gradient(float val, ...)"]}], "role": "item", "extent": [119, 161]}, {"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["vector gradient(vector P, float val, ...)"]}], "role": "item", "extent": [161, 214]}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["This method computes the derivative of a volume field using the partial\nderivatives with respect to a given position (", {"type": "code", "text": ["Du"]}, ", ", {"type": "code", "text": ["Dv"]}, ", and ", {"type": "code", "text": ["Dw"]}, ").  If no\nposition is provided, ", {"type": "code", "text": ["P"]}, " is assumed in shading contexts.  If only ", {"type": "code", "text": ["Du"]}, " and\n", {"type": "code", "text": ["Dv"]}, " are defined, the derivative will be tangent to the surface being\nrendered."], "extent": [214, 519]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Derivatives options"], "extent": [16, 42], "body": [{"type": "para", "indent": 0, "text": ["Functions which compute derivatives take additional arguments to\nallow tuning of the derivative computation."], "extent": [42, 153]}, {"type": "arg_group", "body": [{"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["extrapolate"]}, "role": "item", "extent": [153, 172], "body": [{"type": "para", "indent": 4, "text": ["Whether derivatives are\n    ", {"type": "q", "text": ["smooth"]}, " across patch boundaries. In most cases this is true and if\n    extrapolation is turned on, derivative computation should be exact\n    for C2 surfaces. However, when the VEX variables are changing with a\n    high frequency (for example, a high frequency displacement map\n    causing high frequency changes to the P variable), extrapolation of\n    derivative computation may cause exaggeration of discontinuities\n    between patch boundaries."], "extent": [208, 695]}], "container": true, "attrs": {"type": "int", "default": "0"}, "variadic": true}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["smooth"]}, "role": "item", "extent": [695, 709], "body": [{"type": "para", "indent": 4, "text": ["Adjust the magnitude of the\n    differentials non-uniformly over patches. This will usually reduce\n    patch discontinuities in displacement/textured shaders. However, in\n    some odd cases you may want to turn this feature off."], "extent": [745, 979]}], "container": true, "attrs": {"type": "int", "default": "1"}, "variadic": true}], "container": true, "role": "item_group"}, {"lang": "vex", "type": "pre", "indent": 0, "text": ["\nN = computenormal(P, \"extrapolate\", 1, \"smooth\", 0);\n"], "extent": [979, 1046]}]}, {"level": 1, "id": "examples", "container": true, "type": "examples_section", "indent": 0, "role": "section", "extent": [548, 558], "body": [{"type": "para", "indent": 0, "text": ["Return the gradient of the density field:"], "extent": [558, 602]}, {"lang": "vex", "type": "pre", "indent": 0, "text": ["\nsurface test_grad(float density = 0)\n{\nCf = gradient(density);\n}\n"], "extent": [602, 681]}], "text": "Examples"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [681, 692], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Vex", "value": "/vex/functions/volume", "type": "link", "text": "", "fallback_text": "volume()", "fullpath": "/vex/functions/volume"}], "extent": [692, 708]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Vex", "value": "/vex/functions/Du", "type": "link", "text": "", "fallback_text": "Du()", "fullpath": "/vex/functions/Du"}], "extent": [708, 719]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Vex", "value": "/vex/functions/Dv", "type": "link", "text": "", "fallback_text": "Dv()", "fullpath": "/vex/functions/Dv"}], "extent": [719, 730]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Vex", "value": "/vex/functions/Dw", "type": "link", "text": "", "fallback_text": "Dw()", "fullpath": "/vex/functions/Dw"}], "extent": [730, 742]}], "container": true}], "text": "Related"}], "title": ["gradient"], "summary": ["Returns the gradient of a field."], "included": ["/vex/functions/_derive_variadic"]}