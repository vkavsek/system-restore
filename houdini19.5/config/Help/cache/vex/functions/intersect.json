{"type": "root", "attrs": {"type": "vex", "context": "all", "tags": "ray, intersect, search", "group": "geo", "showtags": "true"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["intersect"], "extent": [0, 14]}, {"type": "summary", "indent": 0, "text": ["This function computes the first intersection of a ray with geometry."], "extent": [83, 160]}, {"type": "para", "indent": 0, "text": ["To get a list of ", {"type": "em", "text": ["all"]}, " intersections along a ray, use ", {"scheme": "Vex", "value": "/vex/functions/intersect_all", "type": "link", "text": "", "fallback_text": "intersect_all()", "fullpath": "/vex/functions/intersect_all"}, "."], "extent": [160, 236]}, {"type": "usage_group", "body": [{"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int intersect(<geometry>, vector orig, vector dir, vector &p, float &u, float &v)"]}], "role": "item", "extent": [236, 328]}, {"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int intersect(<geometry>, vector orig, vector dir, vector &p, float &u, float &v, ...)"]}], "role": "item", "extent": [328, 426], "body": [{"type": "para", "indent": 4, "text": ["Computes the first intersection of the specified ray with the geometry.\n    To get ", {"type": "em", "text": ["all"]}, " intersections along a vector, use ", {"scheme": "Vex", "value": "/vex/functions/intersect_all", "type": "link", "text": "", "fallback_text": "intersect_all()", "fullpath": "/vex/functions/intersect_all"}, " instead.\n    The variadic argument ", {"type": "code", "text": ["\"farthest\""]}, " can be used to indicate whether to return the last intersection instead of the first."], "extent": [426, 708]}], "container": true}, {"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int intersect(<geometry>, vector orig, vector dir, vector &p, vector &uvw)"]}], "role": "item", "extent": [708, 794], "body": [{"type": "para", "indent": 4, "text": ["Computes the first intersection of the specified ray with the geometry.\n    To get ", {"type": "em", "text": ["all"]}, " intersections along a vector, use ", {"scheme": "Vex", "value": "/vex/functions/intersect_all", "type": "link", "text": "", "fallback_text": "intersect_all()", "fullpath": "/vex/functions/intersect_all"}, " instead."], "extent": [794, 951]}], "container": true}, {"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int intersect(<geometry>, string group, vector orig, vector dir, vector &p, vector &uvw)"]}], "role": "item", "extent": [951, 1051], "body": [{"type": "para", "indent": 4, "text": ["Computes the intersection of the specified ray with primitives in the given group."], "extent": [1051, 1139]}], "container": true}], "container": true, "role": "item_group"}, {"type": "arg_group", "body": [{"ext": null, "type": "arg", "indent": 0, "text": [{"type": "code", "text": ["<geometry>"]}], "role": "item", "extent": [16, 35], "body": [{"type": "para", "indent": 4, "text": ["When running in the context of a node (such as a wrangle SOP), this argument can be an integer representing the input number (starting at 0) to read the geometry from."], "extent": [58, 235]}, {"type": "para", "indent": 4, "text": ["Alternatively, the argument can be a string specifying a geometry file (for example, a ", {"type": "code", "text": [".bgeo"]}, ") to read from. When running inside Houdini, this can be an ", {"type": "code", "text": ["op:/path/to/sop"]}, " reference."], "extent": [235, 423]}], "container": true, "attrs": {"id": "geometry"}}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["group"]}, "role": "item", "extent": [1167, 1179], "body": [{"type": "para", "indent": 4, "text": ["If given, only intersect primitives in this group."], "extent": [1199, 1255]}], "container": true, "attrs": {"id": "group"}}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["orig"]}, "role": "item", "extent": [1255, 1266], "body": [{"type": "para", "indent": 4, "text": ["The ray origin point."], "extent": [1285, 1312]}], "container": true, "attrs": {"id": "orig"}}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["dir"]}, "role": "item", "extent": [1312, 1322], "body": [{"type": "para", "indent": 4, "text": ["The ray direction ", {"type": "em", "text": ["and maximum distance"]}, ".\n    This function does not expect a normalized direction vector.\n    Instead, it uses the length of the vector as the maximum distance to search."], "extent": [1340, 1533]}], "container": true, "attrs": {"id": "dir"}}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["&p"]}, "role": "item", "extent": [1533, 1542], "body": [{"type": "para", "indent": 4, "text": ["If the ray intersects a primitive, this variable is overwritten with the intersection position in world space."], "extent": [1542, 1658]}], "container": true}, {"ext": null, "type": "arg", "indent": 0, "text": [{"type": "code", "text": ["&u"]}, ", ", {"type": "code", "text": ["&v"]}, ", ", {"type": "code", "text": ["&uvw"]}], "role": "item", "extent": [1658, 1683], "body": [{"type": "para", "indent": 4, "text": ["If the ray intersects a primitive, this/these variable(s) is/are overwritten with the parametric intersection position on the primitive."], "extent": [1683, 1825]}], "container": true}, {"ext": null, "type": "arg", "indent": 0, "role": "item", "extent": [1825, 1835], "body": [{"type": "para", "indent": 4, "text": ["The intersected primitive number, or ", {"type": "code", "text": ["-1"]}, " if there was an error or the ray didn\u2019t intersect anything."], "extent": [1835, 1942]}], "container": true, "returns": true}], "container": true, "role": "item_group"}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1942, 1948], "body": [{"type": "para", "indent": 4, "text": ["When intersections are performed against metaball geometry, it is\n    impossible to determine the primitive number of the metaball which\n    was hit. In this case, the function returns the number of primitives\n    in the intersection geometry."], "extent": [1948, 2197]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "examples", "container": true, "type": "examples_section", "indent": 0, "role": "section", "extent": [2197, 2207], "body": [{"lang": "vex", "type": "pre", "indent": 0, "text": ["\n// Intersect against the second input's geometry, using a ray at the current\n// point's position and in the direction of its velocity vector.\nvector origin = @P;\nfloat max_dist = 1000;\nvector dir = max_dist * normalize(@v);\n\nvector isect_pos;\nfloat isect_u, isect_v;\nint isect_prim = intersect(@OpInput2, origin, dir, isect_pos, isect_u, isect_v);\n\n// Return the farthest intersection instead.\nisect_prim = intersect(@OpInput2, origin, dir, isect_pos, isect_u, isect_v, \"farthest\", 1);\n"], "extent": [2207, 2707]}], "text": "Examples"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [2707, 2717], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Vex", "value": "/vex/functions/intersect_all", "type": "link", "text": "", "fallback_text": "intersect_all()", "fullpath": "/vex/functions/intersect_all"}], "extent": [2717, 2740]}], "container": true}], "text": "Related"}], "title": ["intersect"], "summary": ["This function computes the first intersection of a ray with geometry."], "included": ["/vex/functions/_common"]}