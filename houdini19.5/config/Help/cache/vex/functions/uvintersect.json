{"type": "root", "attrs": {"type": "vex", "context": "all", "tags": "ray, intersect", "group": "geo", "showtags": "true"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["uvintersect"], "extent": [0, 16]}, {"type": "summary", "indent": 0, "text": ["This function computes the intersection of the specified ray with the geometry in uv space."], "extent": [77, 176]}, {"type": "usage_group", "body": [{"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int uvintersect(<geometry>, string uvname, vector orig, vector dir, vector &pos, vector &primuv)"]}], "role": "item", "extent": [176, 283]}, {"ext": null, "type": "usage", "indent": 0, "text": [" ", {"type": "code", "text": ["int uvintersect(<geometry>, string primgroup, string uvname, vector orig, vector dir, vector &pos, vector &primuv)"]}], "role": "item", "extent": [283, 409]}], "container": true, "role": "item_group"}, {"type": "arg_group", "body": [{"ext": null, "type": "arg", "indent": 0, "text": [{"type": "code", "text": ["<geometry>"]}], "role": "item", "extent": [16, 35], "body": [{"type": "para", "indent": 4, "text": ["When running in the context of a node (such as a wrangle SOP), this argument can be an integer representing the input number (starting at 0) to read the geometry from."], "extent": [58, 235]}, {"type": "para", "indent": 4, "text": ["Alternatively, the argument can be a string specifying a geometry file (for example, a ", {"type": "code", "text": [".bgeo"]}, ") to read from. When running inside Houdini, this can be an ", {"type": "code", "text": ["op:/path/to/sop"]}, " reference."], "extent": [235, 423]}], "container": true, "attrs": {"id": "geometry"}}, {"ext": null, "type": "arg", "indent": 0, "text": {"type": "code", "text": ["primgroup"]}, "role": "item", "extent": [437, 453], "body": [{"type": "para", "indent": 4, "text": ["The name of a primitive group or a pattern to generate a primitive\n    group.  Uses the same semantics as a SOP group, so empty strings\n    will match all primitives.  Attribute groups like ", {"type": "code", "text": ["@Cd.x>0"]}, " can\n    also be used, but note that the ", {"type": "code", "text": ["@"]}, " may need to be escaped with\n    a backslash in a ", {"scheme": "Node", "value": "/nodes/vop/snippet", "type": "link", "text": ["Snippet VOP"], "fullpath": "/nodes/vop/snippet"}, "."], "extent": [453, 783]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["This function computes the intersection of the specified ray with the geometry in uv space. The primitive number is returned, or -1 if there is an error or no intersection found."], "extent": [783, 963]}, {"type": "para", "indent": 0, "text": ["The position in uvspace of the intersection location is stored in ", {"type": "var", "text": ["p"]}, ". The corresponding parametric location of the intersection is stored in ", {"type": "var", "text": ["primuv"]}, ". In the case of multiple intersections, the intersection closest to the ray origin is used."], "extent": [963, 1211]}, {"type": "para", "indent": 0, "text": ["This function does not expect a normalized direction vector. Instead, it uses the length of the vector as the maximum distance. The integer result is the primitive hit."], "extent": [1211, 1381]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1381, 1387], "body": [{"type": "para", "indent": 4, "text": ["It can be hard to visualize a 3D intersection of a ray in a 3D UV space. One trick that can be used is to unwrap the geometry in SOP to get better visualization of the space. This can be done by using a ", {"scheme": "Node", "value": "/nodes/sop/splitvertex", "type": "link", "text": ["Split Vertex SOP"], "fullpath": "/nodes/sop/splitvertex"}, " followed by a ", {"scheme": "Node", "value": "/nodes/sop/attribcopy", "type": "link", "text": ["Attribute Copy SOP"], "fullpath": "/nodes/sop/attribcopy"}, ". This will disconnect the faces at uv boundaries and stamp the uvw values on top of the ", {"type": "code", "text": ["P"]}, " attribute."], "extent": [1387, 1793]}], "container": true}, {"type": "note", "indent": 0, "role": "item", "extent": [1793, 1799], "body": [{"type": "para", "indent": 4, "text": ["When intersections are performed against metaball geometry, it is impossible to determine the primitive number of the metaball which was hit. In this case, the function returns the number of primitives in the intersection geometry."], "extent": [1799, 2035]}], "container": true}], "container": true, "role": "item_group"}], "title": ["uvintersect"], "summary": ["This function computes the intersection of the specified ray with the geometry in uv space."], "included": ["/vex/functions/_common"]}